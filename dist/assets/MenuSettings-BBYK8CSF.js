import{l as E,a as s,n as P,p as k,q as n,B as j}from"./index-DjhjgXs3.js";import{F as L,C as a,S as U}from"./Table-DvR3ObBF.js";import{C as V}from"./ConfirmationDialog-B5mGHD-5.js";import"./useForceUpdate-Cjrk0ddK.js";import"./Dropdown-BOgXC6sa.js";import"./index-Cxjwi2K_.js";import"./Skeleton-CSgj4YNl.js";const R=()=>{const o=E(),[N,r]=s.useState(!1),[S,u]=s.useState([]),[i,C]=s.useState({title:"",message:"",buttonText:"",action:()=>{}}),[f,y]=s.useState(0),{setSuccessNotification:p,setErrorNotification:l}=P(),b=k(),v=new URLSearchParams(b.search),m=Number(v.get("page"))||1,[x,d]=s.useState({current:m,pageSize:10}),M=e=>{d(e),o(`?page=${e.current}`)};s.useEffect(()=>{d(e=>({...e,current:m}))},[m]);const g=(e,t)=>{e==="edit"&&o(`/menu-settings/edit/${t.key}`),e==="add"&&o("/menu-settings/add")};s.useEffect(()=>{h()},[f]);const h=()=>{u([]);try{fetch("https://bo-api.lorenzaceramica.com/all-products-sideNavs",{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},cache:"no-store"}).then(e=>e.json()).then(e=>{const t=e.length>0?e.map(c=>{const z=c.subNavs.length;return{...c,key:c.id,childNum:z}}):[];u([...t])})}catch(e){console.error("Error fetching Product SideNavs:",e)}},D=e=>{if(e.subNavs.length>0)return l("Menu not allowed to delete. Child Menu existed.");r(!0),C({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{fetch(`https://bo-api.lorenzaceramica.com/delete-products-sideNav/${e.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(async t=>{t.status===204&&(p("Delete Successful!"),await h())}).catch(t=>{console.log("Delete Menu error:",t),l("Delete Failed. Please try again later.")}),r(!1)}})};return n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"form-button-container",children:[n.jsxDEV("div",{children:n.jsxDEV("h2",{children:"Menu Settings"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:109,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:108,columnNumber:17},void 0),n.jsxDEV("div",{children:n.jsxDEV(j,{type:"primary",className:"form-button",onClick:()=>g("add"),children:"Add"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:112,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:111,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:107,columnNumber:13},void 0),n.jsxDEV(V,{showModal:N,title:i.title,confirmationMessage:i.message,setShowModal:r,action:i.action,actionText:i.buttonText},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:115,columnNumber:13},void 0),n.jsxDEV("div",{children:n.jsxDEV(L,{dataSource:S,rowKey:"id",pagination:x,onChange:M,children:[n.jsxDEV(a,{title:"Main Title",dataIndex:"name"},"mainCategory",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:123,columnNumber:21},void 0),n.jsxDEV(a,{title:"Number of Child",dataIndex:"childNum"},"childNum",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:124,columnNumber:21},void 0),n.jsxDEV(a,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:125,columnNumber:21},void 0),n.jsxDEV(a,{title:"Action",render:(e,t)=>n.jsxDEV(U,{size:"middle",children:[n.jsxDEV("a",{onClick:()=>g("edit",t),children:"Edit"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:131,columnNumber:33},void 0),n.jsxDEV("a",{onClick:()=>D(t),children:"Delete"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:132,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:130,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:126,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:120,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/MenuSettings.tsx",lineNumber:106,columnNumber:9},void 0)};export{R as default};
