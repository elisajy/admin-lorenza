import{a as c,F as z,l as e,B as v,j as L,n as U,k as F}from"./index-vWTrhrdT.js";import{F as I,C as x,S as j}from"./Table-CmRqO7Hu.js";import{C as y}from"./ConfirmationDialog-BJn_djRM.js";import{c as A,g as w,d as q}from"./FormItems-BpDlMKYg.js";import{D as T}from"./index-BHyiv_oo.js";import{C as $}from"./Collapse-Jx7a6h2a.js";import"./useForceUpdate-YTLBdeLH.js";import"./Dropdown-CbO9ky1n.js";import"./index-BWLKLEpg.js";import"./Skeleton-DF6--Msu.js";const B=({childMenu:a,selectedTableName:t,setSubNavs:r,subNavs:m})=>{const[p,C]=c.useState(!1),[g,h]=c.useState(!1),[d,M]=c.useState({title:"",message:"",buttonText:"",action:()=>{}}),[o]=z.useForm(),s=new Date().toISOString(),n=()=>{o.resetFields(),C(!0)},i=()=>{C(!1)},N=()=>{const S=o.getFieldsValue().childNav,f=m;f.push({tableName:t,name:S,updatedAt:s}),r([...f]),C(!1)},D=S=>{h(!0),M({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const f=m.findIndex(b=>b.name===S.name);if(f!==-1){const b=[...m];b.splice(f,1),r([...b])}h(!1)}})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"form-button-child-container",children:e.jsxDEV("div",{children:e.jsxDEV(v,{type:"primary",className:"form-button",onClick:n,children:"Add"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:63,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:62,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:61,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(I,{dataSource:m,children:[e.jsxDEV(x,{title:"Child Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:69,columnNumber:21},void 0),e.jsxDEV(x,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:70,columnNumber:21},void 0),e.jsxDEV(x,{title:"Action",render:(S,f)=>e.jsxDEV(j,{size:"middle",children:e.jsxDEV("a",{onClick:()=>D(f),children:"Delete"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:76,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:75,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:71,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:67,columnNumber:13},void 0),e.jsxDEV(y,{showModal:g,title:d.title,confirmationMessage:d.message,setShowModal:h,action:d.action,actionText:d.buttonText},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:82,columnNumber:13},void 0),e.jsxDEV(T,{title:"Add Child",width:720,onClose:i,open:p,styles:{body:{paddingBottom:80}},extra:e.jsxDEV(j,{children:[e.jsxDEV(v,{onClick:i,children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:98,columnNumber:25},void 0),e.jsxDEV(v,{onClick:N,type:"primary",children:"Submit"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:99,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:97,columnNumber:21},void 0),children:e.jsxDEV(z,{layout:"vertical",form:o,children:a&&a.length>0&&A("Child Name","childNav","Please select child.",!1,a)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:105,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:86,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:60,columnNumber:9},void 0)},O=({form:a,data:t,setTableNameArr:r,tableNameArr:m,setSelectedTableName:p,selectedTableName:C,setChildArray:g,childArray:h})=>{const d=[{id:1,val:"categories",label:"Categories"},{id:2,val:"finishes",label:"Finishes"},{id:3,val:"tags",label:"Tags"},{id:4,val:"sizes",label:"Sizes"},{id:5,val:"colors",label:"Colors"}];c.useEffect(()=>{a.setFieldsValue({name:t==null?void 0:t.name,mainSideNavId:t==null?void 0:t.mainSideNavId,sequence:t==null?void 0:t.sequence})},[t]);const M=o=>{r([]),p(o),a.setFieldValue("menuName",null),o==="categories"?fetch("https://bo-api.lorenzaceramica.com/all-categories").then(s=>s.json()).then(s=>{let n=[];s.map(i=>{n.push({val:i.name,label:i.name})}),g(n),r(n)}):o==="sizes"?(a.setFieldValue("menuName","Sizes"),fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(s=>s.json()).then(s=>{let n=[];s.map(i=>{n.push({val:i.value,label:i.name,id:i.id})}),g(n),r(n)})):o==="finishes"?(a.setFieldValue("menuName","Finishes"),fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(s=>s.json()).then(s=>{let n=[];s.map(i=>{n.push({val:i.name,label:i.name,id:i.id})}),g(n),r(n)})):o==="tags"?fetch("https://bo-api.lorenzaceramica.com/all-tags").then(s=>s.json()).then(s=>{let n=[];s.map(i=>{n.push({val:i.name,label:i.name})}),g(n),r(n)}):o==="colors"&&(a.setFieldValue("menuName","Colors"),fetch("https://bo-api.lorenzaceramica.com/all-colors").then(s=>s.json()).then(s=>{let n=[];s.map(i=>{n.push({val:i.name,label:i.name})}),g(n),r(n)}))};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"form-container",children:[e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(z,{layout:"vertical",form:a,className:"form-box",children:[d.length>0&&A("Types","tableName","Please select a type.",!1,d,!0,"180px",M),C!==void 0&&e.jsxDEV(e.Fragment,{children:["colors","sizes","finishes"].includes(C)?e.jsxDEV(e.Fragment,{children:w("Menu Name","menuName","Please fill in the Menu Name.","",!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:158,columnNumber:41},void 0):e.jsxDEV(e.Fragment,{children:m&&(m.length>0||m.length===0)&&A("Menu Name","menuName","Please select a name.",!1,m,!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:151,columnNumber:41},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:148,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:137,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:136,columnNumber:17},void 0),e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(z,{layout:"vertical",form:a,className:"form-box",children:q("Sequence","sequence","Please fill in sequence.")},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:167,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:166,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:135,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:134,columnNumber:9},void 0)},ne=()=>{const a=L(),t="New Menu",[r]=z.useForm(),{id:m}=U(),[p,C]=c.useState(),{setSuccessNotification:g,setErrorNotification:h}=F(),[d,M]=c.useState([]),[o,s]=c.useState(),[n,i]=c.useState(),[N,D]=c.useState([]),S=[{key:"1",label:"Basic Information",children:e.jsxDEV(O,{form:r,data:p,setTableNameArr:M,tableNameArr:d,setSelectedTableName:s,selectedTableName:o,setChildArray:i,childArray:n},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:26,columnNumber:23},void 0)},{key:"2",label:"Child Settings",children:e.jsxDEV(B,{childMenu:n,tableNameArr:d,selectedTableName:o,setSubNavs:D,subNavs:N},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:31,columnNumber:23},void 0)}],f=u=>{console.log(u)};c.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/products-sideNavs-details/${m}`).then(u=>u.json()).then(u=>{C(u)})},[]);const b=()=>{const u=r.getFieldsValue(),V=N.length>0?N.map((l,E)=>({name:l.name,path:"/"+l.name.toLowerCase(),sequence:E+1,tableName:l.tableName})):[];if(N.find(l=>l.name===u.menuName))return h("Main Menu cannot be assigned as child. Please check again");const P=N.map(l=>l.name);if(new Set(P).size!==P.length)return h("Duplicate child found. Please check again");const k={name:u.menuName,tableName:u.tableName,path:"/"+u.menuName.toLowerCase(),sequence:u.sequence,subSideNavs:V};fetch("https://bo-api.lorenzaceramica.com/add-products-sideNav",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}).then(async l=>{l.status===201&&(g("Insert Successful!"),a("/menu-settings")),l.status===409&&h("Duplicated records. Please check again.")}).catch(l=>{console.log("Insert Menu error:",l),h("Insert Failed. Please try again later.")})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{textAlign:"left"},children:[e.jsxDEV("h2",{children:t},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:104,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:105,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:103,columnNumber:13},void 0),e.jsxDEV($,{style:{textAlign:"left"},items:S,defaultActiveKey:["1","2"],onChange:f},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:107,columnNumber:13},void 0),";",e.jsxDEV("div",{className:"form-action-button-container",children:[e.jsxDEV(v,{type:"primary",className:"form-button",onClick:b,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:109,columnNumber:17},void 0),e.jsxDEV(v,{className:"form-button",onClick:()=>a("/menu-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:110,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:108,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:102,columnNumber:9},void 0)};export{ne as default};
