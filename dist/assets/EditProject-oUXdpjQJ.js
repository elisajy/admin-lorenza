import{L as I,n as T,j as F,F as l,a as i,k as w,l as t,B as j}from"./index-C2K8AR7W.js";import{P as $,h as O}from"./PreviewImage-IiUvUdrc.js";import{T as A}from"./TextEditor-BeVcSBjJ.js";import{g as N,b as B,f as K,U as b}from"./FormItems-BIhz8kcz.js";import{C as R}from"./Collapse-DJC44Ff8.js";import"./index-Cvpz9R5X.js";import"./Skeleton-BM-4ttUs.js";import"./useForceUpdate-C_cK0Z1j.js";import"./quill.snow-DBzZAfSZ.js";const Z=()=>{const C="Edit Project",v=I(),{id:s}=T(),m=F(),[n]=l.useForm(),[_,P]=i.useState(),{setSuccessNotification:d,setErrorNotification:c}=w();i.useState();const[p,g]=i.useState(),[h,x]=i.useState(),[u,E]=i.useState(),[D,f]=i.useState({previewVisible:!1,previewImage:"",previewTitle:""});i.useEffect(()=>{try{const e=v.pathname.split("/")[1];let r;e==="project-residentials"?r="project-residential-details":r="project-commercial-details",E(e),fetch(`https://bo-api.lorenzaceramica.com/${r}/${s}`).then(o=>o.json()).then(o=>{n.setFieldsValue({title:o.title,description:o.description,path:o.path,thumbnail:[{uid:"-2",status:"done",url:o.thumbnail,name:`thumbnail_${s}`}]}),g(o.content),P(o)})}catch(e){console.error("Error fetching Project Details:",e)}},[]);const z=async e=>{const r=new FormData;r.append("image",e);let o;u==="project-residentials"?o="upload-residential-thumbnail":o="upload-commercial-thumbnail",fetch(`https://bo-api.lorenzaceramica.com/${o}/${s}`,{method:"POST",body:r}).then(async a=>{a.status===201&&(d("Upload Thumbnail Successful!"),m("/project-settings"))}).catch(a=>{console.log("Upload Project error:",a),c("Upload Project Failed. Please try again later.")})},S=()=>{const e=n.getFieldsValue(),r={path:e.path,content:p,description:e.description,title:e.title};let o;u==="project-residentials"?o="update-project-residential":o="update-project-commercial",fetch(`https://bo-api.lorenzaceramica.com/${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,id:s})}).then(async a=>{a.status===204&&(d("Update Successful!"),h!==void 0?z(h):m("/project-settings"))}).catch(a=>{console.log("Update Project error:",a),c("Update Failed. Please try again later.")})},y=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(c("Image file size is more than 1MB. Please try a smaller size file."),b.LIST_IGNORE):!1:(c("Only .jpg, .jpeg and .png image file format are accepted!"),b.LIST_IGNORE),U=e=>Array.isArray(e)?e:(x(e.file),e&&e.fileList),V=async e=>{e=await O(e),f({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},k=[{key:"1",label:"Basic Information",children:t.jsxDEV("div",{className:"form-container",children:t.jsxDEV("div",{className:"form-wrap",children:t.jsxDEV(l,{layout:"vertical",form:n,className:"form-box",children:[N("Title","title","Please fill in the Title."),B("Description","description","Please fill in the Description.",6),N("Path","path","Please fill in the Path."),K("thumbnail","Thumbnail",U,V,y,!1)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:168,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:167,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:165,columnNumber:23},void 0)},{key:"2",label:"Project Content",children:t.jsxDEV("div",{className:"form-container",children:t.jsxDEV("div",{className:"form-wrap",children:t.jsxDEV(l,{layout:"vertical",form:n,className:"form-box",children:[t.jsxDEV(l.Item,{name:"content",children:t.jsxDEV(A,{className:"para-editor",routeName:`/upload-${u}-images`,setEditorValue:g,editorValue:p},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:193,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:192,columnNumber:25},void 0),t.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:196,columnNumber:25},void 0),t.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:197,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:187,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:186,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:185,columnNumber:23},void 0)}],L=e=>{console.log(e)};return t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{style:{textAlign:"left"},children:[t.jsxDEV("h2",{children:C},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:211,columnNumber:17},void 0),t.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:212,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:210,columnNumber:13},void 0),t.jsxDEV(R,{style:{textAlign:"left"},items:k,defaultActiveKey:["1","2"],onChange:L},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:214,columnNumber:13},void 0),";",t.jsxDEV("div",{className:"form-action-button-container",children:[t.jsxDEV(j,{type:"primary",className:"form-button",onClick:S,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:216,columnNumber:17},void 0),t.jsxDEV(j,{className:"form-button",onClick:()=>m("/project-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:217,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:215,columnNumber:13},void 0),t.jsxDEV($,{displayImg:D,setDisplayImg:f},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:219,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:209,columnNumber:9},void 0)};export{Z as default};
