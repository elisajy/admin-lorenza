import{l as C,a as t,n as A,p as z,q as r,B as R}from"./index-X1Fn-djM.js";import{F as L,C as o,S as O}from"./Table-CVhOhLHz.js";import{C as S}from"./ConfirmationDialog-BH9I-EQ5.js";import"./useForceUpdate-CQ54DrJu.js";import"./Dropdown-DcJVY8ub.js";import"./index-BsiXEUhZ.js";import"./Skeleton-Dx8Irf0r.js";const $=()=>{const i=C(),[f,c]=t.useState(!1),[a,P]=t.useState({title:"",message:"",buttonText:"",action:()=>{}}),[p,d]=t.useState([]),{setSuccessNotification:b,setErrorNotification:x}=A(),[E,V]=t.useState(0),D=z(),g=new URLSearchParams(D.search),m=Number(g.get("page"))||1,[v,u]=t.useState({current:m,pageSize:10}),j=e=>{u(e),i(`?page=${e.current}`)};t.useEffect(()=>{u(e=>({...e,current:m}))},[m]);const N=(e,s)=>{e==="edit"&&i(`/partners/edit/${s.key}`),e==="add"&&i("/partners/add")};t.useEffect(()=>{h()},[E]);const h=()=>{d([]);try{fetch("https://bo-api.lorenzaceramica.com/all-home-partners",{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},cache:"no-store"}).then(e=>e.json()).then(e=>{const s=e.length>0?e.map(n=>({...n,key:n.id})):[];d([...s])})}catch(e){console.error("Error fetching Partners:",e)}},U=e=>{c(!0),P({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const n={partners:[e.id]};fetch("https://bo-api.lorenzaceramica.com/delete-home-partner",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(async l=>{l.status===204&&(b("Delete Successful!"),await h())}).catch(l=>{console.log("Delete Partner error:",l),x("Delete Failed. Please try again later.")}),c(!1)}})};return r.jsxDEV(r.Fragment,{children:[r.jsxDEV("div",{className:"form-button-container",children:[r.jsxDEV("div",{children:r.jsxDEV("h2",{children:"Partners"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:108,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:107,columnNumber:17},void 0),r.jsxDEV("div",{children:r.jsxDEV(R,{type:"primary",className:"form-button",onClick:()=>N("add"),children:"Add"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:111,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:110,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:106,columnNumber:13},void 0),r.jsxDEV(S,{showModal:f,title:a.title,confirmationMessage:a.message,setShowModal:c,action:a.action,actionText:a.buttonText},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:114,columnNumber:13},void 0),r.jsxDEV("div",{children:r.jsxDEV(L,{dataSource:p,pagination:v,onChange:j,rowKey:"id",children:[r.jsxDEV(o,{title:"Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:123,columnNumber:21},void 0),r.jsxDEV(o,{title:"Sequence",dataIndex:"sequence"},"sequence",!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:124,columnNumber:21},void 0),r.jsxDEV(o,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:125,columnNumber:21},void 0),r.jsxDEV(o,{title:"Action",render:(e,s)=>r.jsxDEV(O,{size:"middle",children:[r.jsxDEV("a",{onClick:()=>N("edit",s),children:"Edit"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:131,columnNumber:33},void 0),r.jsxDEV("a",{onClick:()=>U(s),children:"Delete"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:132,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:130,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:126,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:119,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:118,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/Partners/Partners.tsx",lineNumber:105,columnNumber:9},void 0)};export{$ as default};
