import{p as R,s as I,l as Z,F as l,a as i,n as S,q as t,B as b}from"./index-Bda6XKA_.js";import{P as T,h as F}from"./PreviewImage-soCePQyn.js";import{T as w}from"./TextEditor-CSXfSwm_.js";import{g as E,b as $,f as k,U as g}from"./FormItems-B3KVdrSg.js";import{C as B}from"./Collapse-cIqbUZha.js";import"./index-B5RL7PKT.js";import"./Skeleton-BeLUGjBR.js";import"./useForceUpdate-CTWU0G51.js";import"./quill.snow-JdAcXx8H.js";const Y=()=>{const v="Edit Project",P=R(),{id:a}=I(),m=Z(),[c]=l.useForm(),[K,h]=i.useState(),{setSuccessNotification:d,setErrorNotification:n}=S();i.useState();const[p,j]=i.useState(),[N,x]=i.useState(),[u,D]=i.useState(),[U,f]=i.useState({previewVisible:!1,previewImage:"",previewTitle:""});i.useEffect(()=>{try{const e=P.pathname.split("/")[1];let r;e==="project-residentials"?r="project-residential-details":r="project-commercial-details",D(e),fetch(`https://bo-api.lorenzaceramica.com/${r}/${a}`).then(s=>s.json()).then(s=>{c.setFieldsValue({title:s.title,description:s.description,path:s.path,thumbnail:[{uid:"-2",status:"done",url:s.thumbnail,name:`thumbnail_${a}`}]}),j(s.content),h(s)})}catch(e){console.error("Error fetching Project Details:",e)}},[]);const y=async e=>{const r=new FormData;r.append("image",e);let s;u==="project-residentials"?s="upload-residential-thumbnail":s="upload-commercial-thumbnail",fetch(`https://bo-api.lorenzaceramica.com/${s}/${a}`,{method:"POST",body:r}).then(async o=>{o.status===201&&(d("Upload Thumbnail Successful!"),m("/project-settings"))}).catch(o=>{console.log("Upload Project error:",o),n("Upload Project Failed. Please try again later.")})},C=()=>{const e=c.getFieldsValue(),r={path:e.path,content:p,description:e.description,title:e.title};let s;u==="project-residentials"?s="update-project-residential":s="update-project-commercial",fetch(`https://bo-api.lorenzaceramica.com/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,id:a})}).then(async o=>{o.status===204&&(d("Update Successful!"),N!==void 0?y(N):m("/project-settings"))}).catch(o=>{console.log("Update Project error:",o),n("Update Failed. Please try again later.")})},O=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(n("Image file size is more than 1MB. Please try a smaller size file."),g.LIST_IGNORE):!1:(n("Only .jpg, .jpeg and .png image file format are accepted!"),g.LIST_IGNORE),V=e=>Array.isArray(e)?e:(x(e.file),e&&e.fileList),z=async e=>{e=await F(e),f({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},A=[{key:"1",label:"Basic Information",children:t.jsxDEV("div",{className:"form-container",children:t.jsxDEV("div",{className:"form-wrap",children:t.jsxDEV(l,{layout:"vertical",form:c,className:"form-box",children:[E("Title","title","Please fill in the Title."),$("Description","description","Please fill in the Description.",6),E("Path","path","Please fill in the Path."),k("thumbnail","Thumbnail",V,z,O,!1)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:168,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:167,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:165,columnNumber:23},void 0)},{key:"2",label:"Project Content",children:t.jsxDEV("div",{className:"form-container",children:t.jsxDEV("div",{className:"form-wrap",children:t.jsxDEV(l,{layout:"vertical",form:c,className:"form-box",children:[t.jsxDEV(l.Item,{name:"content",children:t.jsxDEV(w,{className:"para-editor",routeName:`/upload-${u}-images`,setEditorValue:j,editorValue:p},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:193,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:192,columnNumber:25},void 0),t.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:196,columnNumber:25},void 0),t.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:197,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:187,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:186,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:185,columnNumber:23},void 0)}],L=e=>{console.log(e)};return t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{style:{textAlign:"left"},children:[t.jsxDEV("h2",{children:v},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:211,columnNumber:17},void 0),t.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:212,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:210,columnNumber:13},void 0),t.jsxDEV(B,{style:{textAlign:"left"},items:A,defaultActiveKey:["1","2"],onChange:L},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:214,columnNumber:13},void 0),";",t.jsxDEV("div",{className:"form-action-button-container",children:[t.jsxDEV(b,{type:"primary",className:"form-button",onClick:C,children:"Save"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:216,columnNumber:17},void 0),t.jsxDEV(b,{className:"form-button",onClick:()=>m("/project-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:217,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:215,columnNumber:13},void 0),t.jsxDEV(T,{displayImg:U,setDisplayImg:f},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:219,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:209,columnNumber:9},void 0)};export{Y as default};
