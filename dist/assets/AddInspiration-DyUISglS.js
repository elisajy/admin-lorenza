import{l as j,F as r,n as U,a as l,q as i,B as g}from"./index-ChGBaCPw.js";import{P as V,h as k}from"./PreviewImage-BFkW-dRN.js";import{g as h,b as L,f as T,U as f}from"./FormItems-DAuXv36Z.js";import{Q as w}from"./QuillTextEditor-DixnvUys.js";import{C as F}from"./Collapse-BurgorTz.js";import"./index-D6FC3MZ1.js";import"./Skeleton-Te47yDLn.js";import"./useForceUpdate-DuvXfk5J.js";const J=()=>{const N="New Inspiration",m=j(),[t]=r.useForm(),{setSuccessNotification:c,setErrorNotification:o}=U(),[b,C]=l.useState(),[d,v]=l.useState(),[x,u]=l.useState({previewVisible:!1,previewImage:"",previewTitle:""}),D=async(e,a)=>{const n=new FormData;n.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-inspiration-thumbnail/${a}`,{method:"POST",body:n}).then(async s=>{s.status===201&&(c("Upload Thumbnail Successful!"),m("/inspiration-settings"))}).catch(s=>{console.log("Upload Thumbnail error:",s),o("Upload Thumbnail Failed. Please try again later.")})},I=e=>{let a=e;return a=a.replace(/<ol([^>]*)>(.*?)<\/ol>/g,(n,s,p)=>p.includes('data-list="bullet"')?`<ul${s} style="padding-left: 1.5em;">${p}</ul>`:n),a=a.replace(/<(ul|ol)([^>]*)>/g,'<$1$2 style="padding-left: 1.5em;">'),a},z=()=>{const e=t.getFieldsValue();if(e.thumbnail===void 0||e.thumbnail&&e.thumbnail.length===0)return o("Please ensure that image is uploaded.");const a={path:e.path,content:I(d),description:e.description,title:e.title};fetch("https://bo-api.lorenzaceramica.com/add-inspiration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(async n=>{if(n.status===201){c("Insert Successful!");const s=await n.json();D(b,s.id)}}).catch(n=>{console.log("Insert Inspiration error:",n),o("Insert Failed. Please try again later.")})},P=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(o("Image file size is more than 1MB. Please try a smaller size file."),f.LIST_IGNORE):!1:(o("Only .jpg, .jpeg and .png image file format are accepted!"),f.LIST_IGNORE),y=e=>Array.isArray(e)?e:(C(e.file),e&&e.fileList),S=async e=>{e=await k(e),u({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},E=[{key:"1",label:"Basic Information",children:i.jsxDEV("div",{className:"form-container",children:i.jsxDEV("div",{className:"form-wrap",children:i.jsxDEV(r,{layout:"vertical",form:t,className:"form-box",children:[h("Title","title","Please fill in the Title."),L("Description","description","Please fill in the Description.",6),h("Path","path","Please fill in the Path."),T("thumbnail","Thumbnail",y,S,P,!1)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:128,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:127,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:125,columnNumber:23},void 0)},{key:"2",label:"Inspiration Content",children:i.jsxDEV("div",{className:"form-container",children:i.jsxDEV("div",{className:"form-wrap",children:i.jsxDEV(r,{layout:"vertical",form:t,className:"form-box",children:[i.jsxDEV(r.Item,{name:"content",children:i.jsxDEV(w,{className:"para-editor",routeName:"/upload-inspirations-images",setEditorValue:v,editorValue:d},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:153,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:152,columnNumber:25},void 0),i.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:156,columnNumber:25},void 0),i.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:157,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:147,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:146,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:145,columnNumber:23},void 0)}],A=e=>{console.log(e)};return i.jsxDEV(i.Fragment,{children:[i.jsxDEV("div",{style:{textAlign:"left"},children:[i.jsxDEV("h2",{children:N},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:171,columnNumber:17},void 0),i.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:172,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:170,columnNumber:13},void 0),i.jsxDEV(F,{style:{textAlign:"left"},items:E,defaultActiveKey:["1","2"],onChange:A},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:174,columnNumber:13},void 0),";",i.jsxDEV("div",{className:"form-action-button-container",children:[i.jsxDEV(g,{type:"primary",className:"form-button",onClick:z,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:176,columnNumber:17},void 0),i.jsxDEV(g,{className:"form-button",onClick:()=>m(-1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:177,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:175,columnNumber:13},void 0),i.jsxDEV(V,{displayImg:x,setDisplayImg:u},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:179,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/inspirations/AddInspiration.tsx",lineNumber:169,columnNumber:9},void 0)};export{J as default};
