import{l as L,F as n,n as V,a as l,q as a,B as b}from"./index-BkWEOLim.js";import{P as w,h as F}from"./PreviewImage-CAG5gjof.js";import{c as O,g as N,b as $,f as B,U as C}from"./FormItems-Dw6BNSkf.js";import{Q as R}from"./QuillTextEditor-OKuJU-3o.js";import{C as G}from"./Collapse-gknION_I.js";import"./index-CN0E7QP3.js";import"./Skeleton-pJUdaWfE.js";import"./useForceUpdate-BLQBKbLH.js";const X=()=>{const v="New Project",c=L(),[m]=n.useForm(),{setSuccessNotification:i,setErrorNotification:t}=V(),[P,d]=l.useState(),[u,x]=l.useState(),[p,y]=l.useState(),[D,g]=l.useState({previewVisible:!1,previewImage:"",previewTitle:""}),z=async(e,s)=>{const o=new FormData;o.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-commercial-thumbnail/${s}`,{method:"POST",body:o}).then(async r=>{r.status===201&&(i("Upload Thumbnail Successful!"),c("/project-settings"))}).catch(r=>{console.log("Upload Thumbnail error:",r),t("Upload Thumbnail Failed. Please try again later.")})},S=async(e,s)=>{const o=new FormData;o.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-residential-thumbnail/${s}`,{method:"POST",body:o}).then(async r=>{r.status===201&&(i("Upload Thumbnail Successful!"),c("/project-settings"))}).catch(r=>{console.log("Upload Thumbnail error:",r),t("Upload Thumbnail Failed. Please try again later.")})},T=e=>{let s=e;return s=s.replace(/<ol([^>]*)>(.*?)<\/ol>/g,(o,r,j)=>j.includes('data-list="bullet"')?`<ul${r} style="padding-left: 1.5em;">${j}</ul>`:o),s=s.replace(/<(ul|ol)([^>]*)>/g,'<$1$2 style="padding-left: 1.5em;">'),s},I=()=>{const e=m.getFieldsValue();if(e.thumbnail===void 0||e.thumbnail&&e.thumbnail.length===0)return t("Please ensure that image is uploaded.");const s={path:e.path,content:T(u),description:e.description,title:e.title};e.projectType==="residentials"?fetch("https://bo-api.lorenzaceramica.com/add-project-residential",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(async o=>{if(o.status===201){i("Insert Successful!");const r=await o.json();S(p,r.id)}}).catch(o=>{console.log("Insert Inspiration error:",o),t("Insert Failed. Please try again later.")}):fetch("https://bo-api.lorenzaceramica.com/add-project-commercial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(async o=>{if(o.status===201){i("Insert Successful!");const r=await o.json();z(p,r.id)}}).catch(o=>{console.log("Insert Project Commercial error:",o),t("Insert Failed. Please try again later.")})},U=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(t("Image file size is more than 1MB. Please try a smaller size file."),C.LIST_IGNORE):!1:(t("Only .jpg, .jpeg and .png image file format are accepted!"),C.LIST_IGNORE),E=e=>Array.isArray(e)?e:(y(e.file),e&&e.fileList),A=async e=>{e=await F(e),g({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},h=[{key:1,val:"residentials",label:"Residentials"},{key:2,val:"commercials",label:"Commercials"}],f=e=>{e==="residentials"?d("/upload-project-residentials-images"):e==="commercials"&&d("/upload-project-commercials-images")},k=[{key:"1",label:"Basic Information",children:a.jsxDEV("div",{className:"form-container",children:a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(n,{layout:"vertical",form:m,className:"form-box",children:[h.length>0?O("Project Type","projectType","Please select a Type.",!1,h,!1,"180px",f):null,N("Title","title","Please fill in the Title."),$("Description","description","Please fill in the Description.",6),N("Path","path","Please fill in the Path."),B("thumbnail","Thumbnail",E,A,U,!1)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:195,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:194,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:192,columnNumber:23},void 0)},{key:"2",label:"Project Content",children:a.jsxDEV("div",{className:"form-container",children:a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(n,{layout:"vertical",form:m,className:"form-box",children:[a.jsxDEV(n.Item,{name:"content",children:a.jsxDEV(R,{className:"para-editor",routeName:P,setEditorValue:x,editorValue:u},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:226,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:225,columnNumber:25},void 0),a.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:229,columnNumber:25},void 0),a.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:230,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:220,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:219,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:218,columnNumber:23},void 0)}];return a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{style:{textAlign:"left"},children:[a.jsxDEV("h2",{children:v},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:240,columnNumber:17},void 0),a.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:241,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:239,columnNumber:13},void 0),a.jsxDEV(G,{style:{textAlign:"left"},items:k,defaultActiveKey:["1","2"],onChange:f},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:243,columnNumber:13},void 0),";",a.jsxDEV("div",{className:"form-action-button-container",children:[a.jsxDEV(b,{type:"primary",className:"form-button",onClick:I,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:245,columnNumber:17},void 0),a.jsxDEV(b,{className:"form-button",onClick:()=>c(-1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:246,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:244,columnNumber:13},void 0),a.jsxDEV(w,{displayImg:D,setDisplayImg:g},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:248,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:238,columnNumber:9},void 0)};export{X as default};
