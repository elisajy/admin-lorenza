import{a as c,F as D,l as e,B as z,j as y,n as F,k as I}from"./index-D0w7fh3Y.js";import{F as w,C as x,S as j}from"./Table-DvYdb-Cc.js";import{C as P}from"./ConfirmationDialog-BOoF4k_y.js";import{c as U,g as $,e as q}from"./FormItems-CdrhNv4W.js";import{D as T}from"./index-PezqIBlH.js";import{C as k}from"./Collapse-ChlRIL_B.js";import"./useForceUpdate-D_dwVU7x.js";import"./Dropdown-D7By9NS7.js";import"./index-Dhc9P1gH.js";import"./Skeleton-CpdFBqgh.js";const B=({childMenu:t,selectedTableName:i,setSubNavs:o,subNavs:u})=>{const[M,N]=c.useState(!1),[b,g]=c.useState(!1),[d,v]=c.useState({title:"",message:"",buttonText:"",action:()=>{}}),[r]=D.useForm(),n=new Date().toISOString(),a=()=>{r.resetFields(),N(!0)},s=()=>{N(!1)},h=()=>{const p=r.getFieldsValue().childNav,f=u;f.push({tableName:i,name:p,updatedAt:n}),o([...f]),N(!1)},S=p=>{g(!0),v({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const f=u.findIndex(C=>C.name===p.name);if(f!==-1){const C=[...u];C.splice(f,1),o([...C])}g(!1)}})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"form-button-child-container",children:e.jsxDEV("div",{children:e.jsxDEV(z,{type:"primary",className:"form-button",onClick:a,children:"Add"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:63,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:62,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:61,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(w,{dataSource:u,children:[e.jsxDEV(x,{title:"Child Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:69,columnNumber:21},void 0),e.jsxDEV(x,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:70,columnNumber:21},void 0),e.jsxDEV(x,{title:"Action",render:(p,f)=>e.jsxDEV(j,{size:"middle",children:e.jsxDEV("a",{onClick:()=>S(f),children:"Delete"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:76,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:75,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:71,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:67,columnNumber:13},void 0),e.jsxDEV(P,{showModal:b,title:d.title,confirmationMessage:d.message,setShowModal:g,action:d.action,actionText:d.buttonText},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:82,columnNumber:13},void 0),e.jsxDEV(T,{title:"Add Child",width:720,onClose:s,open:M,styles:{body:{paddingBottom:80}},extra:e.jsxDEV(j,{children:[e.jsxDEV(z,{onClick:s,children:"Cancel"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:98,columnNumber:25},void 0),e.jsxDEV(z,{onClick:h,type:"primary",children:"Submit"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:99,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:97,columnNumber:21},void 0),children:e.jsxDEV(D,{layout:"vertical",form:r,children:t&&t.length>0&&U("Child Name","childNav","Please select child.",!1,t)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:105,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:86,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:60,columnNumber:9},void 0)},O=({form:t,data:i,setTableNameArr:o,tableNameArr:u,setSelectedTableName:M,selectedTableName:N,setChildArray:b,childArray:g})=>{const d=[{id:1,val:"categories",label:"Categories"},{id:2,val:"finishes",label:"Finishes"},{id:3,val:"tags",label:"Tags"},{id:4,val:"sizes",label:"Sizes"},{id:5,val:"colors",label:"Colors"}];c.useEffect(()=>{t.setFieldsValue({name:i==null?void 0:i.name,mainSideNavId:i==null?void 0:i.mainSideNavId,sequence:i==null?void 0:i.sequence})},[i]);const v=r=>{o([]),M(r),t.setFieldValue("menuName",null),r==="categories"?(fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),o(a)}),fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),console.log(a),b(a)})):r==="sizes"?(t.setFieldValue("menuName","Sizes"),fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.value,label:s.name,id:s.id})}),o(a)})):r==="finishes"?(t.setFieldValue("menuName","Finishes"),fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name,id:s.id})}),o(a)})):r==="tags"?(fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),o(a)}),fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),b(a)})):r==="colors"&&(t.setFieldValue("menuName","Colors"),fetch("https://bo-api.lorenzaceramica.com/all-colors").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),o(a)}))};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"form-container",children:[e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(D,{layout:"vertical",form:t,className:"form-box",children:[d.length>0&&U("Types","tableName","Please select a type.",!1,d,!0,"180px",v),N!==void 0&&e.jsxDEV(e.Fragment,{children:["colors","sizes","finishes"].includes(N)?e.jsxDEV(e.Fragment,{children:$("Menu Name","menuName","Please fill in the Menu Name.","",!0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:179,columnNumber:41},void 0):e.jsxDEV(e.Fragment,{children:u&&u.length>0&&U("Menu Name","menuName","Please select a name.",!1,u,!0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:172,columnNumber:41},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:169,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:158,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:157,columnNumber:17},void 0),e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(D,{layout:"vertical",form:t,className:"form-box",children:q("Sequence","sequence","Please fill in sequence.")},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:188,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:187,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:156,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:155,columnNumber:9},void 0)},ne=()=>{const t=y(),i="New Menu",[o]=D.useForm(),{id:u}=F(),[M,N]=c.useState(),{setSuccessNotification:b,setErrorNotification:g}=I(),[d,v]=c.useState([]),[r,n]=c.useState(),[a,s]=c.useState(),[h,S]=c.useState([]),p=[{key:"1",label:"Basic Information",children:e.jsxDEV(O,{form:o,data:M,setTableNameArr:v,tableNameArr:d,setSelectedTableName:n,selectedTableName:r,setChildArray:s,childArray:a},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:26,columnNumber:23},void 0)},{key:"2",label:"Child Settings",children:e.jsxDEV(B,{childMenu:a,tableNameArr:d,selectedTableName:r,setSubNavs:S,subNavs:h},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:31,columnNumber:23},void 0)}],f=m=>{console.log(m)};c.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/products-sideNavs-details/${u}`).then(m=>m.json()).then(m=>{N(m)})},[]);const C=()=>{const m=o.getFieldsValue(),V=h.length>0?h.map((l,L)=>({name:l.name,path:"/"+l.name.toLowerCase(),sequence:L+1,tableName:l.tableName})):[];if(h.find(l=>l.name===m.menuName))return g("Main Menu cannot be assigned as child. Please check again");const A=h.map(l=>l.name);if(new Set(A).size!==A.length)return g("Duplicate child found. Please check again");const E={name:m.menuName,tableName:m.tableName,path:"/"+m.menuName.toLowerCase(),sequence:m.sequence,subSideNavs:V};fetch("https://bo-api.lorenzaceramica.com/add-products-sideNav",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}).then(async l=>{l.status===201&&(b("Insert Successful!"),t("/menu-settings")),l.status===409&&g("Duplicated records. Please check again.")}).catch(l=>{console.log("Insert Menu error:",l),g("Insert Failed. Please try again later.")})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{textAlign:"left"},children:[e.jsxDEV("h2",{children:i},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:104,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:105,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:103,columnNumber:13},void 0),e.jsxDEV(k,{style:{textAlign:"left"},items:p,defaultActiveKey:["1"],onChange:f},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:107,columnNumber:13},void 0),";",e.jsxDEV("div",{className:"form-action-button-container",children:[e.jsxDEV(z,{type:"primary",className:"form-button",onClick:C,children:"Save"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:109,columnNumber:17},void 0),e.jsxDEV(z,{className:"form-button",onClick:()=>t("/menu-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:110,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:108,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:102,columnNumber:9},void 0)};export{ne as default};
