import{a as r,q as e,F as E,B as M,l as A,s as w,n as $}from"./index-BYKBY7iu.js";import{g as q,d as T,c as B}from"./FormItems-DdCEerBD.js";import{F as O,C as k,S as V}from"./Table-ws2Rri8v.js";import{C as R}from"./ConfirmationDialog-MO3yT7Ol.js";import{D as J}from"./index-DbTt1ZeM.js";import{C as K}from"./Collapse-DZcyDJes.js";import"./useForceUpdate-Ca5D_xqM.js";import"./Dropdown-D0DVhJjE.js";import"./index-D3qJHe3i.js";import"./Skeleton-C0PweUTl.js";const W=({form:l,data:i,setTableNameArr:u,tableNameArr:g,setSelectedTableName:h,selectedTableName:z,setChildArray:c,childArray:D})=>{r.useEffect(()=>{l.setFieldsValue({menuName:i==null?void 0:i.name,sequence:i==null?void 0:i.sequence}),f(i==null?void 0:i.tableName)},[i]);const f=a=>{u([]),h(a),a==="categories"?(fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),u(s)}),fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),c(s)})):a==="sizes"?(l.setFieldValue("menuName","Sizes"),fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.value,label:t.name,id:t.id})}),u(s)})):a==="finishes"?(l.setFieldValue("menuName","Finishes"),fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name,id:t.id})}),u(s)})):a==="tags"?(fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),u(s)}),fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),c(s)})):a==="colors"&&(l.setFieldValue("menuName","Colors"),fetch("https://bo-api.lorenzaceramica.com/all-colors").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),u(s)}))};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"form-container",children:[e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(E,{layout:"vertical",form:l,className:"form-box",children:q("Menu Name","menuName","Please fill in the Menu Name.","",!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:128,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:127,columnNumber:17},void 0),e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(E,{layout:"vertical",form:l,className:"form-box",children:T("Sequence","sequence","Please fill in sequence.")},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:137,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:136,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:126,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:125,columnNumber:9},void 0)},_=()=>[{key:"1",id:"1",name:"Wood",updatedAt:"2024-11-05"},{key:"2",id:"2",name:"Marble-like",updatedAt:"2024-11-05"},{key:"3",id:"3",name:"Terazzo",updatedAt:"2024-11-05"},{key:"4",id:"4",name:"Stone",updatedAt:"2024-11-05"}],G=({childMenu:l,data:i,selectedTableName:u,setSubNavs:g,subNavs:h})=>{const[z,c]=r.useState(!1),[D,f]=r.useState(!1),[a,n]=r.useState({title:"",message:"",buttonText:"",action:()=>{}}),[s]=E.useForm(),t=new Date().toISOString(),x=()=>{s.resetFields(),c(!0)},S=()=>{c(!1)},j=()=>{const N=s.getFieldsValue().childNav,m=h;m.push({tableName:u,name:N,updatedAt:t}),g([...m]),c(!1)};r.useEffect(()=>{i&&g(i.subNavs)},[i]);const v=N=>{f(!0),n({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const m=h.findIndex(p=>p.name===N.name);if(m!==-1){const p=[...h];p.splice(m,1),g([...p])}f(!1)}})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"form-button-child-container",children:e.jsxDEV("div",{children:e.jsxDEV(M,{type:"primary",className:"form-button",onClick:x,children:"Add"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:69,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:67,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(O,{dataSource:h,children:[e.jsxDEV(k,{title:"Child Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:75,columnNumber:21},void 0),e.jsxDEV(k,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:76,columnNumber:21},void 0),e.jsxDEV(k,{title:"Action",render:(N,m)=>e.jsxDEV(V,{size:"middle",children:e.jsxDEV("a",{onClick:()=>v(m),children:"Delete"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:82,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:81,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:77,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:74,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:73,columnNumber:13},void 0),e.jsxDEV(R,{showModal:D,title:a.title,confirmationMessage:a.message,setShowModal:f,action:a.action,actionText:a.buttonText},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:88,columnNumber:13},void 0),e.jsxDEV(J,{title:"Add Child",width:720,onClose:S,open:z,styles:{body:{paddingBottom:80}},extra:e.jsxDEV(V,{children:[e.jsxDEV(M,{onClick:S,children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:104,columnNumber:25},void 0),e.jsxDEV(M,{onClick:j,type:"primary",children:"Submit"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:105,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:103,columnNumber:21},void 0),children:e.jsxDEV(E,{layout:"vertical",form:s,children:l&&l.length>0&&B("Child","childNav","Please select child.",!1,l)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:111,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:92,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:66,columnNumber:9},void 0)},oe=()=>{const l=A(),i="Edit Menu",[u]=E.useForm(),{id:g}=w(),[h,z]=r.useState(),[c,D]=r.useState(),{setSuccessNotification:f,setErrorNotification:a}=$(),[n,s]=r.useState(),[t,x]=r.useState([]),[S,j]=r.useState(),[v,N]=r.useState(),[m,p]=r.useState([]);r.useEffect(()=>{const o=_();let C=[];o.map(b=>{C.push({val:b.id,label:b.name})}),z(C)},[]);const U=[{key:"1",label:"Basic Information",children:e.jsxDEV(W,{form:u,data:c,setTableNameArr:x,tableNameArr:t,setSelectedTableName:j,selectedTableName:S,setChildArray:N,childArray:v},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:39,columnNumber:23},void 0)},{key:"2",label:"Child Settings",children:e.jsxDEV(G,{childMenu:v,data:c,tableNameArr:t,selectedTableName:S,setSubNavs:p,subNavs:m},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:44,columnNumber:23},void 0)}],y=o=>{console.log(o)};r.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/products-sideNavs-details/${g}`).then(o=>o.json()).then(o=>{D(o)})},[]),r.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories").then(o=>o.json()).then(o=>{let C=[];o.map(b=>{C.push({val:b.id,label:b.name})}),s(C)})},[]);const L=()=>{const o=u.getFieldsValue(),C=m.length>0?m.map((d,I)=>({name:d.name,path:"/"+d.name.toLowerCase(),sequence:I+1,tableName:d.tableName})):[];if(m.find(d=>d.name===o.menuName))return a("Main Menu cannot be assigned as child. Please check again");const P=m.map(d=>d.name);if(new Set(P).size!==P.length)return a("Duplicate child found. Please check again");const F={name:o.menuName,tableName:c.tableName,path:c.path,sequence:o.sequence,subSideNavs:C};fetch("https://bo-api.lorenzaceramica.com/update-products-sideNav",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...F,id:g})}).then(async d=>{d.status===204&&(f("Update Successful!"),l("/menu-settings"))}).catch(d=>{console.log("Update Menu error:",d),a("Update Failed. Please try again later.")})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{textAlign:"left"},children:[e.jsxDEV("h2",{children:i},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:132,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:133,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:131,columnNumber:13},void 0),e.jsxDEV(K,{style:{textAlign:"left"},items:U,defaultActiveKey:["1","2"],onChange:y},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:135,columnNumber:13},void 0),";",e.jsxDEV("div",{className:"form-action-button-container",children:[e.jsxDEV(M,{type:"primary",className:"form-button",onClick:L,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:137,columnNumber:17},void 0),e.jsxDEV(M,{className:"form-button",onClick:()=>l(-1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:138,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:136,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:130,columnNumber:9},void 0)};export{oe as default};
