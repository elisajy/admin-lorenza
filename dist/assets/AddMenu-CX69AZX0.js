import{a as i,l as e,F as U,k as I,B as x,j as $,n as P}from"./index-US9K7eiX.js";import{D as q,m as T}from"./dummyProduct-BXXzAgCt.js";import{c as y,g as k,e as B}from"./FormItems-BNRME0ep.js";import{F as O,C as L,S as F}from"./Table-DX7ayBoA.js";import{C as K}from"./ConfirmationDialog-B-AxN91o.js";import{C as R}from"./Collapse-Bj1Dv9_0.js";import"./index-CsdL8JI2.js";import"./Skeleton-D57MXuDl.js";import"./useForceUpdate-t_T1H4u5.js";import"./Dropdown-Bwnzy9Oo.js";const J=({form:r,data:l,setTableNameArr:m,tableNameArr:f,setSelectedTableName:z,selectedTableName:u,setChildArray:N,childArray:C})=>{const p=[{id:1,val:"categories",label:"Categories"},{id:2,val:"finishes",label:"Finishes"},{id:3,val:"tags",label:"Tags"},{id:4,val:"sizes",label:"Sizes"},{id:5,val:"colors",label:"Colors"}];i.useEffect(()=>{r.setFieldsValue({name:l==null?void 0:l.name,mainSideNavId:l==null?void 0:l.mainSideNavId,sequence:l==null?void 0:l.sequence})},[l]);const d=o=>{m([]),z(o),r.setFieldValue("menuName",null),o==="categories"?(fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),m(a)}),fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),console.log(a),N(a)})):o==="sizes"?(r.setFieldValue("menuName","Sizes"),fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.value,label:s.name,id:s.id})}),m(a)})):o==="finishes"?(r.setFieldValue("menuName","Finishes"),fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name,id:s.id})}),m(a)})):o==="tags"?(fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),m(a)}),fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),N(a)})):o==="colors"&&(r.setFieldValue("menuName","Colors"),fetch("https://bo-api.lorenzaceramica.com/all-colors").then(n=>n.json()).then(n=>{let a=[];n.map(s=>{a.push({val:s.name,label:s.name})}),m(a)}))};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"form-container",children:[e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(U,{layout:"vertical",form:r,className:"form-box",children:[p.length>0&&y("Types","tableName","Please select a type.",!1,p,!0,"180px",d),u!==void 0&&e.jsxDEV(e.Fragment,{children:["colors","sizes","finishes"].includes(u)?e.jsxDEV(e.Fragment,{children:k("Menu Name","menuName","Please fill in the Menu Name.","",!0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:179,columnNumber:41},void 0):e.jsxDEV(e.Fragment,{children:f&&f.length>0&&y("Menu Name","menuName","Please select a name.",!1,f,!0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:172,columnNumber:41},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:169,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:158,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:157,columnNumber:17},void 0),e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(U,{layout:"vertical",form:r,className:"form-box",children:B("Sequence","sequence","Please fill in sequence.")},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:188,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:187,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:156,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:155,columnNumber:9},void 0)},_=({childMenu:r,data:l,tableNameArr:m,selectedTableName:f,setSubNavs:z,subNavs:u})=>{const[N,C]=i.useState(!1),[p,d]=i.useState(!1),[o,n]=i.useState({title:"",message:"",buttonText:"",action:()=>{}});I();const[a,s]=i.useState(0),[M]=U.useForm(),V=new Date().toISOString(),A=()=>{M.resetFields(),C(!0)},j=()=>{C(!1)},S=()=>{const v=M.getFieldsValue().childNav,c=u;c.push({tableName:f,name:v,updatedAt:V}),z([...c]),C(!1)},E=v=>{d(!0),n({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const c=u.filter(D=>D.name===v.value);z([...c]),d(!1),s(D=>D+1)}})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"form-button-child-container",children:e.jsxDEV("div",{children:e.jsxDEV(x,{type:"primary",className:"form-button",onClick:A,children:"Add"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:62,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:61,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:60,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(O,{dataSource:u,children:[e.jsxDEV(L,{title:"Child Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:68,columnNumber:21},void 0),e.jsxDEV(L,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:69,columnNumber:21},void 0),e.jsxDEV(L,{title:"Action",render:(v,c)=>e.jsxDEV(F,{size:"middle",children:e.jsxDEV("a",{onClick:()=>E(c),children:"Delete"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:75,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:74,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:70,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:67,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:66,columnNumber:13},void 0),e.jsxDEV(K,{showModal:p,title:o.title,confirmationMessage:o.message,setShowModal:d,action:o.action,actionText:o.buttonText},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:81,columnNumber:13},void 0),e.jsxDEV(q,{title:"Add Child",width:720,onClose:j,open:N,styles:{body:{paddingBottom:80}},extra:e.jsxDEV(F,{children:[e.jsxDEV(x,{onClick:j,children:"Cancel"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:97,columnNumber:25},void 0),e.jsxDEV(x,{onClick:S,type:"primary",children:"Submit"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:98,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:96,columnNumber:21},void 0),children:e.jsxDEV(U,{layout:"vertical",form:M,children:r&&r.length>0&&y("Child Name","childNav","Please select child.",!1,r)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:104,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:85,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:59,columnNumber:9},void 0)},ae=()=>{const r=$(),l="New Menu",[m]=U.useForm(),{id:f}=P(),[z,u]=i.useState(),[N,C]=i.useState(),{setSuccessNotification:p,setErrorNotification:d}=I(),[o,n]=i.useState(),[a,s]=i.useState([]),[M,V]=i.useState(),[A,j]=i.useState(),[S,E]=i.useState([]);i.useEffect(()=>{const t=T();let h=[];t.map(b=>{h.push({val:b.id,label:b.name})}),u(h)},[]);const v=[{key:"1",label:"Basic Information",children:e.jsxDEV(J,{form:m,data:N,setTableNameArr:s,tableNameArr:a,setSelectedTableName:V,selectedTableName:M,setChildArray:j,childArray:A},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:39,columnNumber:23},void 0)},{key:"2",label:"Child Settings",children:e.jsxDEV(_,{childMenu:A,data:N,tableNameArr:a,selectedTableName:M,setSubNavs:E,subNavs:S},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:44,columnNumber:23},void 0)}],c=t=>{console.log(t)};i.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/products-sideNavs-details/${f}`).then(t=>t.json()).then(t=>{C(t)})},[]),i.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories").then(t=>t.json()).then(t=>{let h=[];t.map(b=>{h.push({val:b.id,label:b.name})}),n(h)})},[]);const D=()=>{const t=m.getFieldsValue(),h=S.length>0?S.map((g,w)=>({name:g.name,path:"/"+g.name.toLowerCase(),sequence:w+1,tableName:g.tableName})):[],b={name:t.menuName,tableName:t.tableName,path:"/"+t.menuName.toLowerCase(),sequence:t.sequence,subNavs:h};fetch("https://bo-api.lorenzaceramica.com/add-products-sideNav",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then(async g=>{g.status===201&&(p("Insert Successful!"),r("/menu-settings")),g.status===409&&d("Duplicated records. Please check again.")}).catch(g=>{console.log("Insert Menu error:",g),d("Insert Failed. Please try again later.")})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{textAlign:"left"},children:[e.jsxDEV("h2",{children:l},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:119,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:120,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV(R,{style:{textAlign:"left"},items:v,defaultActiveKey:["1"],onChange:c},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:122,columnNumber:13},void 0),";",e.jsxDEV("div",{className:"form-action-button-container",children:[e.jsxDEV(x,{type:"primary",className:"form-button",onClick:D,children:"Save"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:124,columnNumber:17},void 0),e.jsxDEV(x,{className:"form-button",onClick:()=>r("/menu-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:125,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:123,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:117,columnNumber:9},void 0)};export{ae as default};
