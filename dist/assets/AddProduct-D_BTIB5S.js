import{l as a,F as g,j as O,a as t,k as q,B as N}from"./index-vWTrhrdT.js";import{g as u,a as C,b as B,c as b,d as R,e as v,U as z}from"./FormItems-BpDlMKYg.js";import{P as G,h as _}from"./PreviewImage-VfIviS9E.js";import{C as J}from"./Collapse-Jx7a6h2a.js";import"./useForceUpdate-YTLBdeLH.js";import"./index-BWLKLEpg.js";import"./Skeleton-DF6--Msu.js";const K=({form:i,categoryData:n,finishesData:c,sizesData:l,tagsData:m})=>a.jsxDEV(a.Fragment,{children:a.jsxDEV("div",{className:"form-container",children:[a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(g,{layout:"vertical",form:i,className:"form-box",children:[u("Product Name","prdName","Please fill in the Product Name."),n&&n.length>0&&C("Product Category","prdCategory","Please select category.",!1,n),u("Product Variation","prdVariation","Please fill in the Product Variation."),B("Product Description","prdDesc","Please fill in the Product Description.",6)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:18,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:17,columnNumber:17},void 0),a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(g,{layout:"vertical",form:i,className:"form-box",children:[u("Product Code","prdCode","Please fill in the Product Code."),u("Product Thickness","prdThickness","Please fill in the Product Thickness."),l&&l.length>0&&b("Product Size","prdSize","Please select a Product Size.",!1,l),c&&c.length>0&&b("Product Finishes","prdFinish","Please select a Product Finishes.",!1,c),u("Product Color","prdColor","Please fill in the Product Color."),m&&m.length>0&&C("Product Tags","prdTag","Please select Tag.",!1,m),R("Sequence","sequence","Please fill in sequence.")]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:34,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:33,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:16,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:15,columnNumber:9},void 0),re=()=>{const i=O(),[n]=g.useForm(),[c,l]=t.useState(),[m,D]=t.useState(),[I,x]=t.useState(),[A,y]=t.useState(),{setSuccessNotification:p,setErrorNotification:d}=q(),[S,k]=t.useState(),[j,E]=t.useState(),[U,h]=t.useState({previewVisible:!1,previewImage:"",previewTitle:""}),f=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(d("Image file size is more than 1MB. Please try a smaller size file."),z.LIST_IGNORE):!1:(d("Only .jpg, .jpeg and .png image file format are accepted!"),z.LIST_IGNORE),V=e=>Array.isArray(e)?e:(k(e.file),e&&e.fileList),F=e=>Array.isArray(e)?e:(E(e.file),e&&e.fileList),P=async e=>{e=await _(e),h({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},L=[{key:"1",label:"Basic Information",children:a.jsxDEV(K,{form:n,categoryData:c,tagsData:m,sizesData:I,finishesData:A},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:82,columnNumber:9},void 0)},{key:"2",label:"Product Images",children:a.jsxDEV("div",{className:"form-container",children:a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(g,{layout:"vertical",form:n,className:"form-box",children:v("images","Product Image",V,P,f,!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:97,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:96,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:95,columnNumber:9},void 0)},{key:"3",label:"Mock Images",children:a.jsxDEV("div",{className:"form-container",children:a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(g,{layout:"vertical",form:n,className:"form-box",children:v("mockedImages","Mocked Image",F,P,f,!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:117,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:116,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:115,columnNumber:9},void 0)}],T=e=>{console.log(e)};t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories-no-level").then(e=>e.json()).then(e=>{let o=[];e.map(r=>{o.push({val:r.id,label:r.name})}),l(o)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-tags-no-level").then(e=>e.json()).then(e=>{let o=[];e.map(r=>{o.push({val:r.id,label:r.name})}),D(o)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(e=>e.json()).then(e=>{let o=[];e.map(r=>{o.push({val:r.id,label:r.name,id:r.id})}),x(o)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(e=>e.json()).then(e=>{let o=[];e.map(r=>{o.push({val:r.id,label:r.name,id:r.id})}),y(o)})},[]);const w=async(e,o)=>{const r=new FormData;r.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-products-images/${o}`,{method:"POST",body:r}).then(async s=>{s.status===201&&(p("Upload Product Images Successful!"),i("/product-listing"))}).catch(s=>{console.log("Upload Product Images error:",s),d("Upload Product Images Failed. Please try again later.")})},M=async(e,o)=>{const r=new FormData;r.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-mocked-images/${o}`,{method:"POST",body:r}).then(async s=>{s.status===201&&(p("Upload Mocked Images Successful!"),i("/product-listing"))}).catch(s=>{console.log("Upload Mocked Images error:",s),d("Upload Mocked Images Failed. Please try again later.")})},$=()=>{const e=n.getFieldsValue();if(console.log(e),e.images===void 0||e.images&&e.images.length===0)return d("Please ensure that image is uploaded.");const o={name:e.prdName,code:e.prdCode,description:e.prdDesc,variation:e.prdVariation,thickness:e.prdThickness,color:e.prdColor,tags:e.prdTag,categories:e.prdCategory,size:e.prdSize,finish:e.prdFinish,sequence:e.sequence};fetch("https://bo-api.lorenzaceramica.com/add-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(async r=>{if(r.status===201){p("Insert Successful!");const s=await r.json();console.log(s),w(S,s.id),M(j,s.id)}r.status===409&&d("Duplicated records. Please try again later.")}).catch(r=>{console.log("Insert Inspiration error:",r),d("Insert Failed. Please try again later.")})};return a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{style:{textAlign:"left"},children:[a.jsxDEV("h2",{children:"Add New Product"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:291,columnNumber:9},void 0),a.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:292,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:290,columnNumber:7},void 0),a.jsxDEV(J,{style:{textAlign:"left"},items:L,defaultActiveKey:["1","2","3"],onChange:T},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:294,columnNumber:7},void 0),";",a.jsxDEV("div",{className:"form-action-button-container",children:[a.jsxDEV(N,{type:"primary",className:"form-button",onClick:$,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:302,columnNumber:9},void 0),a.jsxDEV(N,{className:"form-button",onClick:()=>i("/product-listing"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:305,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:301,columnNumber:7},void 0),a.jsxDEV(G,{displayImg:U,setDisplayImg:h},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:312,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:289,columnNumber:5},void 0)};export{re as default};
