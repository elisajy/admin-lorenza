import{a as t,l as o,F as f,j as J,n as K,k as q,B as C}from"./index-BwIVOf_g.js";import{P as H,h as Q}from"./PreviewImage-CwreqY-S.js";import{g as p,a as z,b as W,c as U,d as D,U as I}from"./FormItems-1D3W1h5B.js";import{C as X}from"./Collapse-tp8auHvP.js";import"./index-CW4q8-e4.js";import"./Skeleton-Ai-ZFmr3.js";import"./useForceUpdate-DDK1q1ze.js";const Y=({form:c,data:r,categoryData:n,tagsData:a,sizesData:l,finishesData:d})=>(t.useEffect(()=>{c.setFieldsValue({prdName:r==null?void 0:r.name,prdCode:r==null?void 0:r.code,prdDesc:r==null?void 0:r.description,prdFinish:r==null?void 0:r.finish,prdThickness:r==null?void 0:r.thickness,prdSize:r==null?void 0:r.size,prdColor:r==null?void 0:r.color,prdVariation:r==null?void 0:r.variation,prdTag:r==null?void 0:r.tags,prdCategory:r==null?void 0:r.categories})},[r]),o.jsxDEV(o.Fragment,{children:o.jsxDEV("div",{className:"form-container",children:[o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(f,{layout:"vertical",form:c,className:"form-box",children:[p("Product Name","prdName","Please fill in the Product Name.","",!0),n&&n.length>0&&z("Product Category","prdCategory","Please select category.",!1,n),p("Product Variation","prdVariation","Please fill in the Product Variation."),W("Product Description","prdDesc","Please fill in the Product Description.",9)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/ProductInfo-edit.tsx",lineNumber:35,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/ProductInfo-edit.tsx",lineNumber:34,columnNumber:17},void 0),o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(f,{layout:"vertical",form:c,className:"form-box",children:[p("Product Code","prdCode","Please fill in the Product Code.","",!0),p("Product Thickness","prdThickness","Please fill in the Product Thickness."),l&&l.length>0&&U("Product Size","prdSize","Please select a Product Size.",!1,l),d&&d.length>0&&U("Product Finishes","prdFinish","Please select a Product Finishes.",!1,d),p("Product Color","prdColor","Please fill in the Product Color.","",!0),a&&a.length>0&&z("Product Tags","prdTag","Please select Tag.",!1,a)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/ProductInfo-edit.tsx",lineNumber:51,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/ProductInfo-edit.tsx",lineNumber:50,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/ProductInfo-edit.tsx",lineNumber:33,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/ProductInfo-edit.tsx",lineNumber:32,columnNumber:9},void 0)),ae=()=>{const c=J(),r="Edit Product",{id:n}=K(),[a]=f.useForm(),[l,d]=t.useState(),[x,y]=t.useState(),[j,V]=t.useState(),[F,k]=t.useState(),[S,L]=t.useState(),{setSuccessNotification:g,setErrorNotification:m}=q(),[P,T]=t.useState(),[h,w]=t.useState(),[$,v]=t.useState({previewVisible:!1,previewImage:"",previewTitle:""}),b=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(m("Image file size is more than 1MB. Please try a smaller size file."),I.LIST_IGNORE):!1:(m("Only .jpg, .jpeg and .png image file format are accepted!"),I.LIST_IGNORE),M=e=>Array.isArray(e)?e:(T(e.file),e&&e.fileList),A=e=>Array.isArray(e)?e:(w(e.file),e&&e.fileList),E=async e=>{e=await Q(e),v({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},O=[{key:"1",label:"Basic Information",children:o.jsxDEV(Y,{form:a,data:l,categoryData:x,tagsData:j,sizesData:F,finishesData:S},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:70,columnNumber:23},void 0)},{key:"2",label:"Product Images",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(f,{layout:"vertical",form:a,className:"form-box",children:D("images","Product Image",M,E,b)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:77,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:76,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:75,columnNumber:23},void 0)},{key:"3",label:"Mock Images",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(f,{layout:"vertical",form:a,className:"form-box",children:D("mockedImages","Mocked Image",A,E,b)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:91,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:90,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:89,columnNumber:23},void 0)}],B=e=>{console.log(e)};t.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/product-details/${n}`).then(e=>e.json()).then(e=>{let i=[],s=[];e.images.length!==0&&e.images.map((N,u)=>i.push({uid:`-${u+1}`,name:`image_${u+1}`,status:"done",url:N})),e.mockedImages.length!==0&&e.mockedImages.map((N,u)=>s.push({uid:`-${u+1}`,name:`image_${u+1}`,status:"done",url:N})),a.setFieldsValue({images:i,mockedImages:s}),d(e)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories-no-level").then(e=>e.json()).then(e=>{let i=[];e.map(s=>{i.push({val:s.id,label:s.name})}),y(i)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-tags-no-level").then(e=>e.json()).then(e=>{let i=[];e.map(s=>{i.push({val:s.id,label:s.name})}),V(i)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(e=>e.json()).then(e=>{let i=[];e.map(s=>{i.push({val:s.id,label:s.name,id:s.id})}),k(i)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(e=>e.json()).then(e=>{let i=[];e.map(s=>{i.push({val:s.id,label:s.name,id:s.id})}),L(i)})},[]);const _=async e=>{const i=new FormData;i.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-products-images/${n}`,{method:"POST",body:i}).then(async s=>{s.status===201&&(g("Upload Product Images Successful!"),c("/product-listing"))}).catch(s=>{console.log("Upload Product Images error:",s),m("Upload Product Images Failed. Please try again later.")})},R=async e=>{const i=new FormData;i.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-mocked-images/${n}`,{method:"POST",body:i}).then(async s=>{s.status===201&&(g("Upload Mocked Images Successful!"),c("/product-listing"))}).catch(s=>{console.log("Upload Mocked Images error:",s),m("Upload Mocked Images Failed. Please try again later.")})},G=()=>{const e=a.getFieldsValue(),i={name:e.prdName,code:e.prdCode,description:e.prdDesc,variation:e.prdVariation,thickness:e.prdThickness,color:e.prdColor,tags:e.prdTag,categories:e.prdCategory,size:e.prdSize,finish:e.prdFinish};fetch("https://bo-api.lorenzaceramica.com/update-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...i,id:n})}).then(async s=>{s.status===204&&(g("Update Successful!"),P!==void 0&&_(P),h!==void 0&&R(h),h===void 0&&P===void 0&&c("/product-listing"))}).catch(s=>{console.log("Update Product error:",s),m("Update Failed. Please try again later.")})};return o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{style:{textAlign:"left"},children:[o.jsxDEV("h2",{children:r},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:299,columnNumber:17},void 0),o.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:300,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:298,columnNumber:13},void 0),o.jsxDEV(X,{style:{textAlign:"left"},items:O,defaultActiveKey:["1"],onChange:B},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:302,columnNumber:13},void 0),";",o.jsxDEV("div",{className:"form-action-button-container",children:[o.jsxDEV(C,{type:"primary",className:"form-button",onClick:G,children:"Save"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:304,columnNumber:17},void 0),o.jsxDEV(C,{className:"form-button",onClick:()=>c("/product-listing"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:305,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:303,columnNumber:13},void 0),o.jsxDEV(H,{displayImg:$,setDisplayImg:v},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:307,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/products/EditProduct/EditProduct.tsx",lineNumber:297,columnNumber:9},void 0)};export{ae as default};
