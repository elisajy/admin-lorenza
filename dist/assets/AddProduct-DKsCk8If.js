import{l as s,F as p,j as B,a as t,k as L,B as h}from"./index-BhSXeCWi.js";import{g as u,a as v,b as R,c as b,d as j,U as I}from"./FormItems-HpFZQcjc.js";import{P as G,h as _}from"./PreviewImage-B3Wk5Rws.js";import{C as J}from"./Collapse-CAjfZ2go.js";import"./useForceUpdate-P-Y8wlp1.js";import"./index-Zo-ZTWiQ.js";import"./Skeleton-BtgP4zmY.js";const K=({form:i,categoryData:d,finishesData:l,sizesData:n,tagsData:m})=>s.jsxDEV(s.Fragment,{children:s.jsxDEV("div",{className:"form-container",children:[s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(p,{layout:"vertical",form:i,className:"form-box",children:[u("Product Name","prdName","Please fill in the Product Name."),d&&d.length>0&&v("Product Category","prdCategory","Please select category.",!1,d),u("Product Variation","prdVariation","Please fill in the Product Variation."),R("Product Description","prdDesc","Please fill in the Product Description.",6)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:18,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:17,columnNumber:17},void 0),s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(p,{layout:"vertical",form:i,className:"form-box",children:[u("Product Code","prdCode","Please fill in the Product Code."),u("Product Thickness","prdThickness","Please fill in the Product Thickness."),n&&n.length>0&&b("Product Size","prdSize","Please select a Product Size.",!1,n),l&&l.length>0&&b("Product Finishes","prdFinish","Please select a Product Finishes.",!1,l),u("Product Color","prdColor","Please fill in the Product Color."),m&&m.length>0&&v("Product Tags","prdTag","Please select Tag.",!1,m)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:34,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:33,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:16,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:15,columnNumber:9},void 0),ee=()=>{const i=B(),[d]=p.useForm(),[l,n]=t.useState(),[m,x]=t.useState(),[A,y]=t.useState(),[C,z]=t.useState(),{setSuccessNotification:f,setErrorNotification:c}=L(),[E,U]=t.useState(),[V,D]=t.useState(),[k,P]=t.useState({previewVisible:!1,previewImage:"",previewTitle:""}),g=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(c("Image file size is more than 1MB. Please try a smaller size file."),I.LIST_IGNORE):!1:(c("Only .jpg, .jpeg and .png image file format are accepted!"),I.LIST_IGNORE),F=e=>Array.isArray(e)?e:(U(e.file),e&&e.fileList),S=e=>Array.isArray(e)?e:(D(e.file),e&&e.fileList),N=async e=>{e=await _(e),P({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},T=[{key:"1",label:"Basic Information",children:s.jsxDEV(K,{form:d,categoryData:l,tagsData:m,sizesData:A,finishesData:C},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:68,columnNumber:23},void 0)},{key:"2",label:"Product Images",children:s.jsxDEV("div",{className:"form-container",children:s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(p,{layout:"vertical",form:d,className:"form-box",children:j("image","Product Image",F,N,g,!0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:75,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:74,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:73,columnNumber:23},void 0)},{key:"3",label:"Mock Images",children:s.jsxDEV("div",{className:"form-container",children:s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(p,{layout:"vertical",form:d,className:"form-box",children:j("mockedImages","Mocked Image",S,N,g,!0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:89,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:88,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:87,columnNumber:23},void 0)}],w=e=>{console.log(e)};t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories-no-level").then(e=>e.json()).then(e=>{let a=[];e.map(r=>{a.push({val:r.id,label:r.name})}),n(a)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-tags-no-level").then(e=>e.json()).then(e=>{let a=[];e.map(r=>{a.push({val:r.id,label:r.name})}),x(a)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(e=>e.json()).then(e=>{let a=[];e.map(r=>{a.push({val:r.id,label:r.name,id:r.id})}),y(a)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(e=>e.json()).then(e=>{let a=[];e.map(r=>{a.push({val:r.id,label:r.name,id:r.id})}),z(a)})},[]);const M=async(e,a)=>{const r=new FormData;r.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-products-images/${a}`,{method:"POST",body:r}).then(async o=>{o.status===201&&(f("Upload Product Images Successful!"),i("/product-listing"))}).catch(o=>{console.log("Upload Product Images error:",o),c("Upload Product Images Failed. Please try again later.")})},$=async(e,a)=>{const r=new FormData;r.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-mocked-images/${a}`,{method:"POST",body:r}).then(async o=>{o.status===201&&(f("Upload Mocked Images Successful!"),i("/product-listing"))}).catch(o=>{console.log("Upload Mocked Images error:",o),c("Upload Mocked Images Failed. Please try again later.")})},O=()=>{const e=d.getFieldsValue();if(e.images===void 0||e.images&&e.images.length===0)return c("Please ensure that image is uploaded.");if(e.mockedImages===void 0||e.mockedImages&&e.mockedImages.length===0)return c("Please ensure that Mocked Image is uploaded.");const a={name:e.prdName,code:e.prdCode,description:e.prdDesc,variation:e.prdVariation,thickness:e.prdThickness,color:e.prdColor,tags:e.prdTag,categories:e.prdCategory,size:e.prdSize,finish:e.prdFinish};fetch("https://bo-api.lorenzaceramica.com/add-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(async r=>{if(r.status===201){f("Insert Successful!");const o=await r.json();console.log(o),M(E,o.id),$(V,o.id)}r.status===409&&c("Duplicated records. Please try again later.")}).catch(r=>{console.log("Insert Inspiration error:",r),c("Insert Failed. Please try again later.")})};return s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{style:{textAlign:"left"},children:[s.jsxDEV("h2",{children:"Add New Product"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:264,columnNumber:17},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:265,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:263,columnNumber:13},void 0),s.jsxDEV(J,{style:{textAlign:"left"},items:T,defaultActiveKey:["1"],onChange:w},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:267,columnNumber:13},void 0),";",s.jsxDEV("div",{className:"form-action-button-container",children:[s.jsxDEV(h,{type:"primary",className:"form-button",onClick:O,children:"Save"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:269,columnNumber:17},void 0),s.jsxDEV(h,{className:"form-button",onClick:()=>i("/product-listing"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:270,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:268,columnNumber:13},void 0),s.jsxDEV(G,{displayImg:k,setDisplayImg:P},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:272,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:262,columnNumber:9},void 0)};export{ee as default};
