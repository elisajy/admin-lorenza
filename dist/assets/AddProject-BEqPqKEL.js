import{j as V,F as l,k as S,a as c,l as r,B as N}from"./index-BhSXeCWi.js";import{P as w,h as F}from"./PreviewImage-B3Wk5Rws.js";import{T as O}from"./TextEditor-NxgVmLU3.js";import{c as k,g,b as $,f as B,U as h}from"./FormItems-HpFZQcjc.js";import{C as L}from"./Collapse-CAjfZ2go.js";import"./index-Zo-ZTWiQ.js";import"./Skeleton-BtgP4zmY.js";import"./useForceUpdate-P-Y8wlp1.js";import"./quill.snow-CvW9EUuQ.js";const W=()=>{const v="New Project",n=V(),[m]=l.useForm(),{setSuccessNotification:i,setErrorNotification:t}=S(),[P,d]=c.useState(),[p,x]=c.useState(),[u,y]=c.useState(),[C,f]=c.useState({previewVisible:!1,previewImage:"",previewTitle:""}),T=async(e,o)=>{const s=new FormData;s.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-commercial-thumbnail/${o}`,{method:"POST",body:s}).then(async a=>{a.status===201&&(i("Upload Thumbnail Successful!"),n("/project-settings"))}).catch(a=>{console.log("Upload Thumbnail error:",a),t("Upload Thumbnail Failed. Please try again later.")})},I=async(e,o)=>{const s=new FormData;s.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-residential-thumbnail/${o}`,{method:"POST",body:s}).then(async a=>{a.status===201&&(i("Upload Thumbnail Successful!"),n("/project-settings"))}).catch(a=>{console.log("Upload Thumbnail error:",a),t("Upload Thumbnail Failed. Please try again later.")})},U=()=>{const e=m.getFieldsValue();if(e.thumbnail===void 0||e.thumbnail&&e.thumbnail.length===0)return t("Please ensure that image is uploaded.");const o={path:e.path,content:p,description:e.description,title:e.title};e.projectType==="residentials"?fetch("https://bo-api.lorenzaceramica.com/add-project-residential",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(async s=>{if(s.status===201){i("Insert Successful!");const a=await s.json();I(u,a.id)}}).catch(s=>{console.log("Insert Inspiration error:",s),t("Insert Failed. Please try again later.")}):fetch("https://bo-api.lorenzaceramica.com/add-project-commercial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(async s=>{if(s.status===201){i("Insert Successful!");const a=await s.json();T(u,a.id)}}).catch(s=>{console.log("Insert Project Commercial error:",s),t("Insert Failed. Please try again later.")})},D=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(t("Image file size is more than 1MB. Please try a smaller size file."),h.LIST_IGNORE):!1:(t("Only .jpg, .jpeg and .png image file format are accepted!"),h.LIST_IGNORE),z=e=>Array.isArray(e)?e:(y(e.file),e&&e.fileList),A=async e=>{e=await F(e),f({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},j=[{key:1,val:"residentials",label:"Residentials"},{key:2,val:"commercials",label:"Commercials"}],b=e=>{e==="residentials"?d("/upload-project-residentials-images"):e==="commercials"&&d("/upload-project-commercials-images")},E=[{key:"1",label:"Basic Information",children:r.jsxDEV("div",{className:"form-container",children:r.jsxDEV("div",{className:"form-wrap",children:r.jsxDEV(l,{layout:"vertical",form:m,className:"form-box",children:[j.length>0?k("Project Type","projectType","Please select a Type.",!1,j,!1,"180px",b):null,g("Title","title","Please fill in the Title."),$("Description","description","Please fill in the Description.",6),g("Path","path","Please fill in the Path."),B("thumbnail","Thumbnail",z,A,D,!1)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:181,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:180,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:178,columnNumber:23},void 0)},{key:"2",label:"Project Content",children:r.jsxDEV("div",{className:"form-container",children:r.jsxDEV("div",{className:"form-wrap",children:r.jsxDEV(l,{layout:"vertical",form:m,className:"form-box",children:[r.jsxDEV(l.Item,{name:"content",children:r.jsxDEV(O,{className:"para-editor",routeName:P,setEditorValue:x,editorValue:p},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:212,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:211,columnNumber:25},void 0),r.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:215,columnNumber:25},void 0),r.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:216,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:206,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:205,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:204,columnNumber:23},void 0)}];return r.jsxDEV(r.Fragment,{children:[r.jsxDEV("div",{style:{textAlign:"left"},children:[r.jsxDEV("h2",{children:v},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:226,columnNumber:17},void 0),r.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:227,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:225,columnNumber:13},void 0),r.jsxDEV(L,{style:{textAlign:"left"},items:E,defaultActiveKey:["1"],onChange:b},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:229,columnNumber:13},void 0),";",r.jsxDEV("div",{className:"form-action-button-container",children:[r.jsxDEV(N,{type:"primary",className:"form-button",onClick:U,children:"Save"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:231,columnNumber:17},void 0),r.jsxDEV(N,{className:"form-button",onClick:()=>n("/project-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:232,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:230,columnNumber:13},void 0),r.jsxDEV(w,{displayImg:C,setDisplayImg:f},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:234,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:224,columnNumber:9},void 0)};export{W as default};
