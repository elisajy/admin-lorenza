import{a as l,l as e,F as C,B as S,j as k,n as $,k as T}from"./index-BhSXeCWi.js";import{g as q,e as B,c as O}from"./FormItems-HpFZQcjc.js";import{F as R,C as P,S as U}from"./Table-Dw4oP3mS.js";import{C as L}from"./ConfirmationDialog-CXYvt_dm.js";import{D as J}from"./index-CG3ZjnRw.js";import{C as K}from"./Collapse-CAjfZ2go.js";import"./useForceUpdate-P-Y8wlp1.js";import"./Dropdown-DrSbEMFv.js";import"./index-Zo-ZTWiQ.js";import"./Skeleton-BtgP4zmY.js";const W=({form:o,data:i,setTableNameArr:u,tableNameArr:f,setSelectedTableName:g,selectedTableName:j,setChildArray:c,childArray:v})=>{l.useEffect(()=>{o.setFieldsValue({menuName:i==null?void 0:i.name,sequence:i==null?void 0:i.sequence}),N(i==null?void 0:i.tableName)},[i]);const N=a=>{u([]),g(a),a==="categories"?(fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(t=>t.json()).then(t=>{let s=[];t.map(n=>{s.push({val:n.name,label:n.name})}),u(s)}),fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(t=>t.json()).then(t=>{let s=[];t.map(n=>{s.push({val:n.name,label:n.name})}),c(s)})):a==="sizes"?(o.setFieldValue("menuName","Sizes"),fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(t=>t.json()).then(t=>{let s=[];t.map(n=>{s.push({val:n.value,label:n.name,id:n.id})}),u(s)})):a==="finishes"?(o.setFieldValue("menuName","Finishes"),fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(t=>t.json()).then(t=>{let s=[];t.map(n=>{s.push({val:n.name,label:n.name,id:n.id})}),u(s)})):a==="tags"?(fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(t=>t.json()).then(t=>{let s=[];t.map(n=>{s.push({val:n.name,label:n.name})}),u(s)}),fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(t=>t.json()).then(t=>{let s=[];t.map(n=>{s.push({val:n.name,label:n.name})}),c(s)})):a==="colors"&&(o.setFieldValue("menuName","Colors"),fetch("https://bo-api.lorenzaceramica.com/all-colors").then(t=>t.json()).then(t=>{let s=[];t.map(n=>{s.push({val:n.name,label:n.name})}),u(s)}))};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"form-container",children:[e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(C,{layout:"vertical",form:o,className:"form-box",children:q("Menu Name","menuName","Please fill in the Menu Name.","",!0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:128,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:127,columnNumber:17},void 0),e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(C,{layout:"vertical",form:o,className:"form-box",children:B("Sequence","sequence","Please fill in sequence.")},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:137,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:136,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:126,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:125,columnNumber:9},void 0)},_=()=>[{key:"1",id:"1",name:"Wood",updatedAt:"2024-11-05"},{key:"2",id:"2",name:"Marble-like",updatedAt:"2024-11-05"},{key:"3",id:"3",name:"Terazzo",updatedAt:"2024-11-05"},{key:"4",id:"4",name:"Stone",updatedAt:"2024-11-05"}],G=({childMenu:o,data:i,selectedTableName:u,setSubNavs:f,subNavs:g})=>{const[j,c]=l.useState(!1),[v,N]=l.useState(!1),[a,t]=l.useState({title:"",message:"",buttonText:"",action:()=>{}}),[s]=C.useForm(),n=new Date().toISOString(),z=()=>{s.resetFields(),c(!0)},E=()=>{c(!1)},D=()=>{const p=s.getFieldsValue().childNav,m=g;m.push({tableName:u,name:p,updatedAt:n}),f([...m]),c(!1)};l.useEffect(()=>{i&&f(i.subNavs)},[i]);const x=p=>{N(!0),t({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const m=g.findIndex(b=>b.name===p.name);if(m!==-1){const b=[...g];b.splice(m,1),f([...b])}N(!1)}})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"form-button-child-container",children:e.jsxDEV("div",{children:e.jsxDEV(S,{type:"primary",className:"form-button",onClick:z,children:"Add"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:69,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:67,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(R,{dataSource:g,children:[e.jsxDEV(P,{title:"Child Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:75,columnNumber:21},void 0),e.jsxDEV(P,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:76,columnNumber:21},void 0),e.jsxDEV(P,{title:"Action",render:(p,m)=>e.jsxDEV(U,{size:"middle",children:e.jsxDEV("a",{onClick:()=>x(m),children:"Delete"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:82,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:81,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:77,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:74,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:73,columnNumber:13},void 0),e.jsxDEV(L,{showModal:v,title:a.title,confirmationMessage:a.message,setShowModal:N,action:a.action,actionText:a.buttonText},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:88,columnNumber:13},void 0),e.jsxDEV(J,{title:"Add Child",width:720,onClose:E,open:j,styles:{body:{paddingBottom:80}},extra:e.jsxDEV(U,{children:[e.jsxDEV(S,{onClick:E,children:"Cancel"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:104,columnNumber:25},void 0),e.jsxDEV(S,{onClick:D,type:"primary",children:"Submit"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:105,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:103,columnNumber:21},void 0),children:e.jsxDEV(C,{layout:"vertical",form:s,children:o&&o.length>0&&O("Child","childNav","Please select child.",!1,o)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:111,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:92,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:66,columnNumber:9},void 0)},re=()=>{const o=k(),i="Edit Menu",[u]=C.useForm(),{id:f}=$(),[g,j]=l.useState(),[c,v]=l.useState(),{setSuccessNotification:N,setErrorNotification:a}=T(),[t,s]=l.useState(),[n,z]=l.useState([]),[E,D]=l.useState(),[x,p]=l.useState(),[m,b]=l.useState([]);l.useEffect(()=>{const r=_();let h=[];r.map(M=>{h.push({val:M.id,label:M.name})}),j(h)},[]);const y=[{key:"1",label:"Basic Information",children:e.jsxDEV(W,{form:u,data:c,setTableNameArr:z,tableNameArr:n,setSelectedTableName:D,selectedTableName:E,setChildArray:p,childArray:x},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:39,columnNumber:23},void 0)},{key:"2",label:"Child Settings",children:e.jsxDEV(G,{childMenu:x,data:c,tableNameArr:n,selectedTableName:E,setSubNavs:b,subNavs:m},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:44,columnNumber:23},void 0)}],F=r=>{console.log(r)};l.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/products-sideNavs-details/${f}`).then(r=>r.json()).then(r=>{v(r)})},[]),l.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories").then(r=>r.json()).then(r=>{let h=[];r.map(M=>{h.push({val:M.id,label:M.name})}),s(h)})},[]);const I=()=>{const r=u.getFieldsValue(),h=m.length>0?m.map((d,w)=>({name:d.name,path:"/"+d.name.toLowerCase(),sequence:w+1,tableName:d.tableName})):[];if(m.find(d=>d.name===r.menuName))return a("Main Menu cannot be assigned as child. Please check again");const V=m.map(d=>d.name);if(new Set(V).size!==V.length)return a("Duplicate child found. Please check again");const A={name:r.menuName,tableName:c.tableName,path:c.path,sequence:r.sequence,subSideNavs:h};fetch("https://bo-api.lorenzaceramica.com/update-products-sideNav",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...A,id:f})}).then(async d=>{d.status===204&&(N("Update Successful!"),o("/menu-settings"))}).catch(d=>{console.log("Update Menu error:",d),a("Update Failed. Please try again later.")})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{textAlign:"left"},children:[e.jsxDEV("h2",{children:i},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:132,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:133,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:131,columnNumber:13},void 0),e.jsxDEV(K,{style:{textAlign:"left"},items:y,defaultActiveKey:["1"],onChange:F},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:135,columnNumber:13},void 0),";",e.jsxDEV("div",{className:"form-action-button-container",children:[e.jsxDEV(S,{type:"primary",className:"form-button",onClick:I,children:"Save"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:137,columnNumber:17},void 0),e.jsxDEV(S,{className:"form-button",onClick:()=>o("/menu-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:138,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:136,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:130,columnNumber:9},void 0)};export{re as default};
