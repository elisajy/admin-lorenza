import{p as I,s as T,l as F,F as l,a as i,n as w,q as o,B as j}from"./index-BYKBY7iu.js";import{P as $,h as O}from"./PreviewImage-CaDH19Pf.js";import{g as N,b as A,f as B,U as b}from"./FormItems-DdCEerBD.js";import{Q as K}from"./QuillTextEditor-BQmt7f2K.js";import{C as R}from"./Collapse-DZcyDJes.js";import"./index-D3qJHe3i.js";import"./Skeleton-C0PweUTl.js";import"./useForceUpdate-Ca5D_xqM.js";const Y=()=>{const C="Edit Project",v=I(),{id:s}=T(),m=F(),[n]=l.useForm(),[_,P]=i.useState(),{setSuccessNotification:d,setErrorNotification:c}=w();i.useState();const[p,g]=i.useState(),[h,x]=i.useState(),[u,E]=i.useState(),[D,f]=i.useState({previewVisible:!1,previewImage:"",previewTitle:""});i.useEffect(()=>{try{const e=v.pathname.split("/")[1];let r;e==="project-residentials"?r="project-residential-details":r="project-commercial-details",E(e),fetch(`https://bo-api.lorenzaceramica.com/${r}/${s}`).then(t=>t.json()).then(t=>{n.setFieldsValue({title:t.title,description:t.description,path:t.path,thumbnail:[{uid:"-2",status:"done",url:t.thumbnail,name:`thumbnail_${s}`}]}),g(t.content),P(t)})}catch(e){console.error("Error fetching Project Details:",e)}},[]);const z=async e=>{const r=new FormData;r.append("image",e);let t;u==="project-residentials"?t="upload-residential-thumbnail":t="upload-commercial-thumbnail",fetch(`https://bo-api.lorenzaceramica.com/${t}/${s}`,{method:"POST",body:r}).then(async a=>{a.status===201&&(d("Upload Thumbnail Successful!"),m("/project-settings"))}).catch(a=>{console.log("Upload Project error:",a),c("Upload Project Failed. Please try again later.")})},S=()=>{const e=n.getFieldsValue(),r={path:e.path,content:p,description:e.description,title:e.title};let t;u==="project-residentials"?t="update-project-residential":t="update-project-commercial",fetch(`https://bo-api.lorenzaceramica.com/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,id:s})}).then(async a=>{a.status===204&&(d("Update Successful!"),h!==void 0?z(h):m("/project-settings"))}).catch(a=>{console.log("Update Project error:",a),c("Update Failed. Please try again later.")})},y=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(c("Image file size is more than 1MB. Please try a smaller size file."),b.LIST_IGNORE):!1:(c("Only .jpg, .jpeg and .png image file format are accepted!"),b.LIST_IGNORE),U=e=>Array.isArray(e)?e:(x(e.file),e&&e.fileList),V=async e=>{e=await O(e),f({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},k=[{key:"1",label:"Basic Information",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(l,{layout:"vertical",form:n,className:"form-box",children:[N("Title","title","Please fill in the Title."),A("Description","description","Please fill in the Description.",6),N("Path","path","Please fill in the Path."),B("thumbnail","Thumbnail",U,V,y,!1)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:168,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:167,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:165,columnNumber:23},void 0)},{key:"2",label:"Project Content",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(l,{layout:"vertical",form:n,className:"form-box",children:[o.jsxDEV(l.Item,{name:"content",children:o.jsxDEV(K,{className:"para-editor",routeName:`/upload-${u}-images`,setEditorValue:g,editorValue:p},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:193,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:192,columnNumber:25},void 0),o.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:196,columnNumber:25},void 0),o.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:197,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:187,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:186,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:185,columnNumber:23},void 0)}],L=e=>{console.log(e)};return o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{style:{textAlign:"left"},children:[o.jsxDEV("h2",{children:C},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:211,columnNumber:17},void 0),o.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:212,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:210,columnNumber:13},void 0),o.jsxDEV(R,{style:{textAlign:"left"},items:k,defaultActiveKey:["1","2"],onChange:L},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:214,columnNumber:13},void 0),";",o.jsxDEV("div",{className:"form-action-button-container",children:[o.jsxDEV(j,{type:"primary",className:"form-button",onClick:S,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:216,columnNumber:17},void 0),o.jsxDEV(j,{className:"form-button",onClick:()=>m(-1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:217,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:215,columnNumber:13},void 0),o.jsxDEV($,{displayImg:D,setDisplayImg:f},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:219,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:209,columnNumber:9},void 0)};export{Y as default};
