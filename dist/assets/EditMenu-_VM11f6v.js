import{a as o,l as e,F as z,B as E,j as k,n as $,k as P}from"./index-DyRJQtJb.js";import{g as T,e as q,c as B}from"./FormItems-C5c3Hh1I.js";import{F as O,C as j,S as y}from"./Table-Dse138Mb.js";import{C as R}from"./ConfirmationDialog-DwnCIbQP.js";import{D as J}from"./index-Dr8-9sn-.js";import{C as K}from"./Collapse-BQ6L7fBF.js";import"./useForceUpdate-Dxvbpl_t.js";import"./Dropdown-MHnaebPI.js";import"./index-CCuLHeRI.js";import"./Skeleton-D3VjkZGw.js";const W=({form:l,data:a,setTableNameArr:u,tableNameArr:g,setSelectedTableName:f,selectedTableName:S,setChildArray:c,childArray:D})=>{o.useEffect(()=>{l.setFieldsValue({menuName:a==null?void 0:a.name,sequence:a==null?void 0:a.sequence}),N(a==null?void 0:a.tableName)},[a]);const N=i=>{u([]),f(i),i==="categories"?(fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),u(s)}),fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),c(s)})):i==="sizes"?(l.setFieldValue("menuName","Sizes"),fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.value,label:t.name,id:t.id})}),u(s)})):i==="finishes"?(l.setFieldValue("menuName","Finishes"),fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name,id:t.id})}),u(s)})):i==="tags"?(fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),u(s)}),fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),c(s)})):i==="colors"&&(l.setFieldValue("menuName","Colors"),fetch("https://bo-api.lorenzaceramica.com/all-colors").then(n=>n.json()).then(n=>{let s=[];n.map(t=>{s.push({val:t.name,label:t.name})}),u(s)}))};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"form-container",children:[e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(z,{layout:"vertical",form:l,className:"form-box",children:T("Menu Name","menuName","Please fill in the Menu Name.","",!0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:128,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:127,columnNumber:17},void 0),e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(z,{layout:"vertical",form:l,className:"form-box",children:q("Sequence","sequence","Please fill in sequence.")},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:137,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:136,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:126,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:125,columnNumber:9},void 0)},_=()=>[{key:"1",id:"1",name:"Wood",updatedAt:"2024-11-05"},{key:"2",id:"2",name:"Marble-like",updatedAt:"2024-11-05"},{key:"3",id:"3",name:"Terazzo",updatedAt:"2024-11-05"},{key:"4",id:"4",name:"Stone",updatedAt:"2024-11-05"}],G=({childMenu:l,data:a,selectedTableName:u,setSubNavs:g,subNavs:f})=>{const[S,c]=o.useState(!1),[D,N]=o.useState(!1),[i,n]=o.useState({title:"",message:"",buttonText:"",action:()=>{}}),[s]=z.useForm(),t=new Date().toISOString(),x=()=>{s.resetFields(),c(!0)},M=()=>{c(!1)},U=()=>{const p=s.getFieldsValue().childNav,m=f;m.push({tableName:u,name:p,updatedAt:t}),g([...m]),c(!1)};o.useEffect(()=>{a&&g(a.subNavs)},[a]);const v=p=>{N(!0),n({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const m=f.findIndex(b=>b.name===p.name);if(m!==-1){const b=[...f];b.splice(m,1),g([...b])}N(!1)}})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"form-button-child-container",children:e.jsxDEV("div",{children:e.jsxDEV(E,{type:"primary",className:"form-button",onClick:x,children:"Add"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:69,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:67,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(O,{dataSource:f,children:[e.jsxDEV(j,{title:"Child Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:75,columnNumber:21},void 0),e.jsxDEV(j,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:76,columnNumber:21},void 0),e.jsxDEV(j,{title:"Action",render:(p,m)=>e.jsxDEV(y,{size:"middle",children:e.jsxDEV("a",{onClick:()=>v(m),children:"Delete"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:82,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:81,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:77,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:74,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:73,columnNumber:13},void 0),e.jsxDEV(R,{showModal:D,title:i.title,confirmationMessage:i.message,setShowModal:N,action:i.action,actionText:i.buttonText},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:88,columnNumber:13},void 0),e.jsxDEV(J,{title:"Add Child",width:720,onClose:M,open:S,styles:{body:{paddingBottom:80}},extra:e.jsxDEV(y,{children:[e.jsxDEV(E,{onClick:M,children:"Cancel"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:104,columnNumber:25},void 0),e.jsxDEV(E,{onClick:U,type:"primary",children:"Submit"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:105,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:103,columnNumber:21},void 0),children:e.jsxDEV(z,{layout:"vertical",form:s,children:l&&l.length>0&&B("Child","childNav","Please select child.",!1,l)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:111,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:92,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:66,columnNumber:9},void 0)},re=()=>{const l=k(),a="Edit Menu",[u]=z.useForm(),{id:g}=$(),[f,S]=o.useState(),[c,D]=o.useState(),{setSuccessNotification:N,setErrorNotification:i}=P(),[n,s]=o.useState(),[t,x]=o.useState([]),[M,U]=o.useState(),[v,p]=o.useState(),[m,b]=o.useState([]);o.useEffect(()=>{const r=_();let h=[];r.map(C=>{h.push({val:C.id,label:C.name})}),S(h)},[]);const L=[{key:"1",label:"Basic Information",children:e.jsxDEV(W,{form:u,data:c,setTableNameArr:x,tableNameArr:t,setSelectedTableName:U,selectedTableName:M,setChildArray:p,childArray:v},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:39,columnNumber:23},void 0)},{key:"2",label:"Child Settings",children:e.jsxDEV(G,{childMenu:v,data:c,tableNameArr:t,selectedTableName:M,setSubNavs:b,subNavs:m},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:44,columnNumber:23},void 0)}],F=r=>{console.log(r)};o.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/products-sideNavs-details/${g}`).then(r=>r.json()).then(r=>{D(r)})},[]),o.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories").then(r=>r.json()).then(r=>{let h=[];r.map(C=>{h.push({val:C.id,label:C.name})}),s(h)})},[]);const I=()=>{const r=u.getFieldsValue(),h=m.length>0?m.map((d,w)=>({name:d.name,path:"/"+d.name.toLowerCase(),sequence:w+1,tableName:d.tableName})):[];if(m.find(d=>d.name===r.menuName))return i("Main Menu cannot be assigned as child. Please check again");const V=m.map(d=>d.name);if(new Set(V).size!==V.length)return i("Duplicate child found. Please check again");const A={name:r.menuName,tableName:c.tableName,path:c.path,sequence:r.sequence,subSideNavs:h};fetch("https://bo-api.lorenzaceramica.com/update-products-sideNav",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...A,id:g})}).then(async d=>{d.status===204&&(N("Update Successful!"),l("/menu-settings"))}).catch(d=>{console.log("Update Menu error:",d),i("Update Failed. Please try again later.")})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{textAlign:"left"},children:[e.jsxDEV("h2",{children:a},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:132,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:133,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:131,columnNumber:13},void 0),e.jsxDEV(K,{style:{textAlign:"left"},items:L,defaultActiveKey:["1"],onChange:F},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:135,columnNumber:13},void 0),";",e.jsxDEV("div",{className:"form-action-button-container",children:[e.jsxDEV(E,{type:"primary",className:"form-button",onClick:I,children:"Save"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:137,columnNumber:17},void 0),e.jsxDEV(E,{className:"form-button",onClick:()=>l("/menu-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:138,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:136,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/U10092494/Documents/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:130,columnNumber:9},void 0)};export{re as default};
