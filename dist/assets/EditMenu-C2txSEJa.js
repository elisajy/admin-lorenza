import{a,q as e,F as z,B as E,l as I,s as w,n as T}from"./index-ChGBaCPw.js";import{g as q,d as $,c as B}from"./FormItems-DAuXv36Z.js";import{F as O,C as P,S as j}from"./Table-DuMrltci.js";import{C as R}from"./ConfirmationDialog-CjTt7aX9.js";import{D as J}from"./index-COyGzH2i.js";import{C as K}from"./Collapse-BurgorTz.js";import"./useForceUpdate-DuvXfk5J.js";import"./Dropdown-BGgjrH9C.js";import"./index-D6FC3MZ1.js";import"./Skeleton-Te47yDLn.js";const W=({form:o,data:s,setTableNameArr:g,tableNameArr:h,setSelectedTableName:f,selectedTableName:D,setChildArray:c,childArray:v})=>{a.useEffect(()=>{o.setFieldsValue({menuName:s==null?void 0:s.name,sequence:s==null?void 0:s.sequence}),C(s==null?void 0:s.tableName)},[s]);const C=n=>{g([]),f(n);let m="";switch(n){case"categories":m="main-categories-no-sub";break;case"tags":m="main-tags-no-sub";break;case"sizes":m="sizes-no-sub";break;case"finishes":m="finishes-no-sub";break;case"colors":m="colors-no-sub";break;default:m="main-categories-no-sub";break}fetch(`https://bo-api.lorenzaceramica.com/${m}`).then(r=>r.json()).then(r=>{let d=[];r.map(i=>{d.push({val:n==="sizes"?i.value:i.name,label:n==="sizes"?i.value:i.name,id:i.id})}),g(d)}),fetch(`https://bo-api.lorenzaceramica.com/${m}`).then(r=>r.json()).then(r=>{let d=[];r.map(i=>{d.push({val:n==="sizes"?i.value:i.name,label:n==="sizes"?i.value:i.name,id:i.id})}),c(d)}),n==="sizes"?o.setFieldValue("menuName","Sizes"):n==="finishes"?o.setFieldValue("menuName","Finishes"):n==="colors"&&o.setFieldValue("menuName","Colors")};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"form-container",children:[e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(z,{layout:"vertical",form:o,className:"form-box",children:q("Menu Name","menuName","Please fill in the Menu Name.","",!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:89,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:88,columnNumber:17},void 0),e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(z,{layout:"vertical",form:o,className:"form-box",children:$("Sequence","sequence","Please fill in sequence.")},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:98,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:97,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:87,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:86,columnNumber:9},void 0)},_=()=>[{key:"1",id:"1",name:"Wood",updatedAt:"2024-11-05"},{key:"2",id:"2",name:"Marble-like",updatedAt:"2024-11-05"},{key:"3",id:"3",name:"Terazzo",updatedAt:"2024-11-05"},{key:"4",id:"4",name:"Stone",updatedAt:"2024-11-05"}],G=({childMenu:o,data:s,selectedTableName:g,setSubNavs:h,subNavs:f})=>{const[D,c]=a.useState(!1),[v,C]=a.useState(!1),[n,m]=a.useState({title:"",message:"",buttonText:"",action:()=>{}}),[r]=z.useForm(),d=new Date().toISOString(),i=()=>{r.resetFields(),c(!0)},M=()=>{c(!1)},k=()=>{const b=r.getFieldsValue().childNav,l=f;l.push({tableName:g,name:b,updatedAt:d}),h([...l]),c(!1)};a.useEffect(()=>{s&&h(s.subNavs)},[s]);const x=b=>{C(!0),m({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const l=f.findIndex(S=>S.name===b.name);if(l!==-1){const S=[...f];S.splice(l,1),h([...S])}C(!1)}})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"form-button-child-container",children:e.jsxDEV("div",{children:e.jsxDEV(E,{type:"primary",className:"form-button",onClick:i,children:"Add"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:69,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:67,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(O,{dataSource:f,children:[e.jsxDEV(P,{title:"Child Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:75,columnNumber:21},void 0),e.jsxDEV(P,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:76,columnNumber:21},void 0),e.jsxDEV(P,{title:"Action",render:(b,l)=>e.jsxDEV(j,{size:"middle",children:e.jsxDEV("a",{onClick:()=>x(l),children:"Delete"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:82,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:81,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:77,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:74,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:73,columnNumber:13},void 0),e.jsxDEV(R,{showModal:v,title:n.title,confirmationMessage:n.message,setShowModal:C,action:n.action,actionText:n.buttonText},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:88,columnNumber:13},void 0),e.jsxDEV(J,{title:"Add Child",width:720,onClose:M,open:D,styles:{body:{paddingBottom:80}},extra:e.jsxDEV(j,{children:[e.jsxDEV(E,{onClick:M,children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:104,columnNumber:25},void 0),e.jsxDEV(E,{onClick:k,type:"primary",children:"Submit"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:105,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:103,columnNumber:21},void 0),children:e.jsxDEV(z,{layout:"vertical",form:r,children:o&&o.length>0&&B("Child","childNav","Please select child.",!1,o)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:111,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:92,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:66,columnNumber:9},void 0)},oe=()=>{const o=I(),s="Edit Menu",[g]=z.useForm(),{id:h}=w(),[f,D]=a.useState(),[c,v]=a.useState(),{setSuccessNotification:C,setErrorNotification:n}=T(),[m,r]=a.useState(),[d,i]=a.useState([]),[M,k]=a.useState(),[x,b]=a.useState(),[l,S]=a.useState([]);a.useEffect(()=>{const t=_();let N=[];t.map(p=>{N.push({val:p.id,label:p.name})}),D(N)},[]);const U=[{key:"1",label:"Basic Information",children:e.jsxDEV(W,{form:g,data:c,setTableNameArr:i,tableNameArr:d,setSelectedTableName:k,selectedTableName:M,setChildArray:b,childArray:x},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:39,columnNumber:23},void 0)},{key:"2",label:"Child Settings",children:e.jsxDEV(G,{childMenu:x,data:c,tableNameArr:d,selectedTableName:M,setSubNavs:S,subNavs:l},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:44,columnNumber:23},void 0)}],L=t=>{console.log(t)};a.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/products-sideNavs-details/${h}`).then(t=>t.json()).then(t=>{v(t)})},[]),a.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories").then(t=>t.json()).then(t=>{let N=[];t.map(p=>{N.push({val:p.id,label:p.name})}),r(N)})},[]);const y=()=>{const t=g.getFieldsValue(),N=l.length>0?l.map((u,A)=>({name:u.name,path:"/"+u.name.toLowerCase(),sequence:A+1,tableName:u.tableName})):[];if(l.find(u=>u.name===t.menuName))return n("Main Menu cannot be assigned as child. Please check again");const V=l.map(u=>u.name);if(new Set(V).size!==V.length)return n("Duplicate child found. Please check again");const F={name:t.menuName,tableName:c.tableName,path:c.path,sequence:t.sequence,subSideNavs:N};fetch("https://bo-api.lorenzaceramica.com/update-products-sideNav",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...F,id:h})}).then(async u=>{u.status===204&&(C("Update Successful!"),o("/menu-settings"))}).catch(u=>{console.log("Update Menu error:",u),n("Update Failed. Please try again later.")})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{textAlign:"left"},children:[e.jsxDEV("h2",{children:s},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:132,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:133,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:131,columnNumber:13},void 0),e.jsxDEV(K,{style:{textAlign:"left"},items:U,defaultActiveKey:["1","2"],onChange:L},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:135,columnNumber:13},void 0),";",e.jsxDEV("div",{className:"form-action-button-container",children:[e.jsxDEV(E,{type:"primary",className:"form-button",onClick:y,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:137,columnNumber:17},void 0),e.jsxDEV(E,{className:"form-button",onClick:()=>o(-1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:138,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:136,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:130,columnNumber:9},void 0)};export{oe as default};
