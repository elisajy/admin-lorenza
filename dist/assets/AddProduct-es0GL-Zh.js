import{q as a,F as h,l as q,a as t,n as B,B as v}from"./index-BYKBY7iu.js";import{P as R,h as G}from"./PreviewImage-CaDH19Pf.js";import{g as p,a as z,b as _,c as P,d as J,e as I,U as y}from"./FormItems-DdCEerBD.js";import{C as K}from"./Collapse-DZcyDJes.js";import"./index-D3qJHe3i.js";import"./Skeleton-C0PweUTl.js";import"./useForceUpdate-Ca5D_xqM.js";const H=({form:c,categoryData:n,finishesData:l,sizesData:m,tagsData:u,colorsData:g})=>a.jsxDEV(a.Fragment,{children:a.jsxDEV("div",{className:"form-container",children:[a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(h,{layout:"vertical",form:c,className:"form-box",children:[p("Product Name","prdName","Please fill in the Product Name."),n&&n.length>0&&z("Product Category","prdCategory","Please select category.",!1,n),p("Product Variation","prdVariation","Please fill in the Product Variation."),_("Product Description","prdDesc","Please fill in the Product Description.",6)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:19,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:18,columnNumber:17},void 0),a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(h,{layout:"vertical",form:c,className:"form-box",children:[p("Product Code","prdCode","Please fill in the Product Code."),p("Product Thickness","prdThickness","Please fill in the Product Thickness."),m&&m.length>0&&P("Product Size","prdSize","Please select a Product Size.",!1,m),l&&l.length>0&&P("Product Finishes","prdFinish","Please select a Product Finishes.",!1,l),g&&g.length>0&&P("Color Category","prdColorId","Please select a Product Color Category.",!1,g),p("Product Color","prdColor","Please fill in the Product Color."),u&&u.length>0&&z("Product Tags","prdTag","Please select Tag.",!1,u),J("Sequence","sequence","Please fill in sequence.")]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:35,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:34,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:17,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:16,columnNumber:9},void 0),se=()=>{const c=q(),[n]=h.useForm(),[l,m]=t.useState(),[u,g]=t.useState(),[x,D]=t.useState(),[k,A]=t.useState(),[S,j]=t.useState(),{setSuccessNotification:f,setErrorNotification:d}=B(),[Q,E]=t.useState(),[W,V]=t.useState(),[U,C]=t.useState({previewVisible:!1,previewImage:"",previewTitle:""}),N=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(d("Image file size is more than 1MB. Please try a smaller size file."),y.LIST_IGNORE):!1:(d("Only .jpg, .jpeg and .png image file format are accepted!"),y.LIST_IGNORE),F=e=>Array.isArray(e)?e:(E(e.file),e&&e.fileList),L=e=>Array.isArray(e)?e:(V(e.file),e&&e.fileList),b=async e=>{e=await G(e),C({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},w=[{key:"1",label:"Basic Information",children:a.jsxDEV(H,{form:n,categoryData:l,tagsData:u,sizesData:x,finishesData:k,colorsData:S},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:76,columnNumber:9},void 0)},{key:"2",label:"Product Images",children:a.jsxDEV("div",{className:"form-container",children:a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(h,{layout:"vertical",form:n,className:"form-box",children:I("images","Product Image",F,b,N,!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:92,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:91,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:90,columnNumber:9},void 0)},{key:"3",label:"Mock Images",children:a.jsxDEV("div",{className:"form-container",children:a.jsxDEV("div",{className:"form-wrap",children:a.jsxDEV(h,{layout:"vertical",form:n,className:"form-box",children:I("mockedImages","Mocked Image",L,b,N,!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:112,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:111,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:110,columnNumber:9},void 0)}],T=e=>{console.log(e)};t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories-no-level").then(e=>e.json()).then(e=>{let r=[];e.map(o=>{r.push({val:o.id,label:o.name})}),m(r)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-tags-no-level").then(e=>e.json()).then(e=>{let r=[];e.map(o=>{r.push({val:o.id,label:o.name})}),g(r)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(e=>e.json()).then(e=>{let r=[];e.map(o=>{r.push({val:o.id,label:o.name,id:o.id})}),D(r)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(e=>e.json()).then(e=>{let r=[];e.map(o=>{r.push({val:o.id,label:o.name,id:o.id})}),A(r)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-colors").then(e=>e.json()).then(e=>{let r=[];e.map(o=>{r.push({val:o.id,label:o.name,id:o.id})}),j(r)})},[]);const $=async(e,r)=>{const o=new FormData;for(let s=0;s<e.length;s++){const i=e[s];o.append(`image-${s}`,i.originFileObj)}fetch(`https://bo-api.lorenzaceramica.com/upload-products-images/${r}`,{method:"POST",body:o}).then(async s=>{if(s.status===201){const i=n.getFieldsValue();i.mockedImages&&i.mockedImages.length!==0?await M(i.mockedImages,r):(f("Upload Product Images Successful!"),c("/product-listing"))}}).catch(s=>{console.log("Upload Product Images error:",s),d("Upload Product Images Failed. Please try again later.")})},M=async(e,r)=>{const o=new FormData;for(let s=0;s<e.length;s++){const i=e[s];o.append(`image-${s}`,i.originFileObj)}fetch(`https://bo-api.lorenzaceramica.com/upload-mocked-images/${r}`,{method:"POST",body:o}).then(async s=>{s.status===201&&(f("Upload Mocked Images Successful!"),c("/product-listing"))}).catch(s=>{console.log("Upload Mocked Images error:",s),d("Upload Mocked Images Failed. Please try again later.")})},O=()=>{const e=n.getFieldsValue();if(e.images===void 0||e.images&&e.images.length===0)return d("Please ensure that image is uploaded.");if(e.mockedImages&&e.mockedImages.length>3)return d("Mocked Images only allow to upload 3(three) images.");const r={name:e.prdName,code:e.prdCode,description:e.prdDesc,variation:e.prdVariation,thickness:e.prdThickness,color:e.prdColor,tags:e.prdTag,categories:e.prdCategory,size:e.prdSize,finish:e.prdFinish,sequence:e.sequence,colorId:e.prdColorId};fetch("https://bo-api.lorenzaceramica.com/add-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(async o=>{if(o.status===201){f("Insert Successful!");const s=await o.json();$(e.images,s.id)}o.status===409&&d("Duplicated records. Please try again later.")}).catch(o=>{console.log("Insert Inspiration error:",o),d("Insert Failed. Please try again later.")})};return a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{style:{textAlign:"left"},children:[a.jsxDEV("h2",{children:"Add New Product"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:316,columnNumber:9},void 0),a.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:317,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:315,columnNumber:7},void 0),a.jsxDEV(K,{style:{textAlign:"left"},items:w,defaultActiveKey:["1","2","3"],onChange:T},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:319,columnNumber:7},void 0),";",a.jsxDEV("div",{className:"form-action-button-container",children:[a.jsxDEV(v,{type:"primary",className:"form-button",onClick:O,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:327,columnNumber:9},void 0),a.jsxDEV(v,{className:"form-button",onClick:()=>c(-1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:330,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:326,columnNumber:7},void 0),a.jsxDEV(R,{displayImg:U,setDisplayImg:C},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:337,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:314,columnNumber:5},void 0)};export{se as default};
