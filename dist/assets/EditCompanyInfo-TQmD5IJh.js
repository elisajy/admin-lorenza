import{l as D,s as j,F as n,n as R,a as l,q as o,B as N}from"./index-BXaUFIZO.js";import{g as t,b as T,f as P,U as y}from"./FormItems-6FS5c-5i.js";import{P as A,h as V}from"./PreviewImage-CpFpMDC0.js";import{T as S}from"./TextEditorWithoutImage-BK6FjjYG.js";import{C as L}from"./index-bJC7c-p6.js";import"./useForceUpdate-BENYtUk7.js";import"./index-Dbqaym1G.js";import"./Skeleton-DDQoyR9s.js";import"./quill.snow-u8Fj1yV3.js";import"./index-6YafCRq8.js";import"./Dropdown-wJULQldz.js";const K=()=>{const C="Edit Company Info",c=D(),{key:a}=j(),[r]=n.useForm(),{setSuccessNotification:u,setErrorNotification:i}=R(),[E,I]=l.useState(),[v,d]=l.useState({previewVisible:!1,previewImage:"",previewTitle:""}),[p,f]=l.useState(),g=e=>{switch(e){case"COMPANY_NAME":return"Company Name";case"COMPANY_REGISTRATION_NUMBER":return"Company Registration Number";case"ADDRESS":return"Address";case"OPERATING_HOURS":return"Operating Hours";case"CONTACT_DESKTOP":return"Contact Desktop View";case"CONTACT_MOBILE":return"Contact Mobile View";case"FACEBOOK":return"Facebook Link";case"INSTAGRAM":return"Instagram Link";case"OUR_STORY_TEXT":return"Our Story - Text";case"OUR_STORY_IMG":return"Our Story - Image";default:return null}};l.useEffect(()=>{try{fetch(`https://bo-api.lorenzaceramica.com/company-info/${a}`).then(e=>e.json()).then(e=>{r.setFieldsValue({title:g(e.key),value:e.key!=="OUR_STORY_IMG"?e.value:[{uid:"-2",status:"done",url:e.value,name:`img_${e.key}`}]}),f(e.value)})}catch(e){console.error("Error fetching Company Info:",e)}},[]);const h=()=>{const e=r.getFieldsValue(),m={value:e.title.toUpperCase().includes("CONTACT")?p:e.value};fetch("https://bo-api.lorenzaceramica.com/update-company-info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,key:a})}).then(async s=>{s.status===204&&(u("Update Successful!"),a==="OUR_STORY_IMG"?x(E):c("/company-info"))}).catch(s=>{console.log("Update Company Info error:",s),i("Update Failed. Please try again later.")})},b=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(i("Image file size is more than 1MB. Please try a smaller size file."),y.LIST_IGNORE):!1:(i("Only .jpg, .jpeg and .png image file format are accepted!"),y.LIST_IGNORE),U=e=>Array.isArray(e)?e:(I(e.file),e&&e.fileList),O=async e=>{e=await V(e),d({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},x=async e=>{const m=new FormData;m.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/modify-our-story-image/${a}`,{method:"POST",body:m}).then(async s=>{s.status===201&&(u("Upload Image Successful!"),c("/company=info"))}).catch(s=>{console.log("Upload Image error:",s),i("Upload Image Failed. Please try again later.")})};return o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{style:{textAlign:"left"},children:[o.jsxDEV("h2",{children:C},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:161,columnNumber:17},void 0),o.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:162,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:160,columnNumber:13},void 0),o.jsxDEV(L,{title:"Edit Company Info",className:"form-card-container",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:a!=null&&a.includes("OUR_STORY")?o.jsxDEV(o.Fragment,{children:a==="OUR_STORY_TEXT"?o.jsxDEV(n,{layout:"vertical",form:r,className:"form-box",children:[t("Title","title","Please fill in the title.","",!0),T("Text","value","Please fill in the text.",6)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:172,columnNumber:45},void 0):o.jsxDEV(n,{layout:"vertical",form:r,className:"form-box",children:[t("Title","title","Please fill in the title.","",!0),P("value","Image",U,O,b,!1)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:181,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:169,columnNumber:33},void 0):a!=null&&a.includes("CONTACT")?o.jsxDEV(n,{layout:"vertical",form:r,className:"form-box",children:[t("Title","title","Please fill in the title.","",!0),o.jsxDEV(n.Item,{name:"value",children:o.jsxDEV(S,{className:"para-editor-small",editorValue:p,setEditorValue:f},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:200,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:199,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:193,columnNumber:37},void 0):o.jsxDEV(n,{layout:"vertical",form:r,className:"form-box",children:[t("Title","title","Please fill in the title.","",!0),t("Value","value","Please fill in the value.")]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:204,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:166,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:165,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:164,columnNumber:13},void 0),o.jsxDEV("div",{className:"form-action-button-container",children:[o.jsxDEV(N,{type:"primary",className:"form-button",onClick:h,children:"Save"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:217,columnNumber:17},void 0),o.jsxDEV(N,{className:"form-button",onClick:()=>c("/company-info"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:218,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:216,columnNumber:13},void 0),o.jsxDEV(A,{displayImg:v,setDisplayImg:d},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:220,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:159,columnNumber:9},void 0)};export{K as default};
