import{l as o,F as p,j as M,a as t,k as O,B as C}from"./index-B2xPJyjb.js";import{g,a as b,b as q,c as v,d as B,e as z,U as I}from"./FormItems-CuzC-ljU.js";import{P as R,h as G}from"./PreviewImage-CvXRmD9g.js";import{C as _}from"./Collapse-EsLxNSho.js";import"./useForceUpdate-DBCnMcBO.js";import"./index-BhylLv_O.js";import"./Skeleton-DHXim5Dc.js";const J=({form:i,categoryData:n,finishesData:l,sizesData:m,tagsData:u})=>o.jsxDEV(o.Fragment,{children:o.jsxDEV("div",{className:"form-container",children:[o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(p,{layout:"vertical",form:i,className:"form-box",children:[g("Product Name","prdName","Please fill in the Product Name."),n&&n.length>0&&b("Product Category","prdCategory","Please select category.",!1,n),g("Product Variation","prdVariation","Please fill in the Product Variation."),q("Product Description","prdDesc","Please fill in the Product Description.",6)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:18,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:17,columnNumber:17},void 0),o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(p,{layout:"vertical",form:i,className:"form-box",children:[g("Product Code","prdCode","Please fill in the Product Code."),g("Product Thickness","prdThickness","Please fill in the Product Thickness."),m&&m.length>0&&v("Product Size","prdSize","Please select a Product Size.",!1,m),l&&l.length>0&&v("Product Finishes","prdFinish","Please select a Product Finishes.",!1,l),g("Product Color","prdColor","Please fill in the Product Color."),u&&u.length>0&&b("Product Tags","prdTag","Please select Tag.",!1,u),B("Sequence","sequence","Please fill in sequence.")]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:34,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:33,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:16,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:15,columnNumber:9},void 0),oe=()=>{const i=M(),[n]=p.useForm(),[l,m]=t.useState(),[u,x]=t.useState(),[D,y]=t.useState(),[A,k]=t.useState(),{setSuccessNotification:h,setErrorNotification:d}=O(),[K,S]=t.useState(),[H,j]=t.useState(),[V,f]=t.useState({previewVisible:!1,previewImage:"",previewTitle:""}),P=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(d("Image file size is more than 1MB. Please try a smaller size file."),I.LIST_IGNORE):!1:(d("Only .jpg, .jpeg and .png image file format are accepted!"),I.LIST_IGNORE),E=e=>Array.isArray(e)?e:(S(e.file),e&&e.fileList),U=e=>Array.isArray(e)?e:(j(e.file),e&&e.fileList),N=async e=>{e=await G(e),f({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},F=[{key:"1",label:"Basic Information",children:o.jsxDEV(J,{form:n,categoryData:l,tagsData:u,sizesData:D,finishesData:A},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:82,columnNumber:9},void 0)},{key:"2",label:"Product Images",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(p,{layout:"vertical",form:n,className:"form-box",children:z("images","Product Image",E,N,P,!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:97,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:96,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:95,columnNumber:9},void 0)},{key:"3",label:"Mock Images",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(p,{layout:"vertical",form:n,className:"form-box",children:z("mockedImages","Mocked Image",U,N,P,!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:117,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:116,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:115,columnNumber:9},void 0)}],L=e=>{console.log(e)};t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories-no-level").then(e=>e.json()).then(e=>{let s=[];e.map(a=>{s.push({val:a.id,label:a.name})}),m(s)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-tags-no-level").then(e=>e.json()).then(e=>{let s=[];e.map(a=>{s.push({val:a.id,label:a.name})}),x(s)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(e=>e.json()).then(e=>{let s=[];e.map(a=>{s.push({val:a.id,label:a.name,id:a.id})}),y(s)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(e=>e.json()).then(e=>{let s=[];e.map(a=>{s.push({val:a.id,label:a.name,id:a.id})}),k(s)})},[]);const w=async(e,s)=>{const a=new FormData;for(let r=0;r<e.length;r++){const c=e[r];a.append(`image-${r}`,c.originFileObj)}fetch(`https://bo-api.lorenzaceramica.com/upload-products-images/${s}`,{method:"POST",body:a}).then(async r=>{if(r.status===201){const c=n.getFieldsValue();c.mockedImages.length!==0?await T(c.mockedImages,s):(h("Upload Product Images Successful!"),i("/product-listing"))}}).catch(r=>{console.log("Upload Product Images error:",r),d("Upload Product Images Failed. Please try again later.")})},T=async(e,s)=>{const a=new FormData;for(let r=0;r<e.length;r++){const c=e[r];a.append(`image-${r}`,c.originFileObj)}fetch(`https://bo-api.lorenzaceramica.com/upload-mocked-images/${s}`,{method:"POST",body:a}).then(async r=>{r.status===201&&(h("Upload Mocked Images Successful!"),i("/product-listing"))}).catch(r=>{console.log("Upload Mocked Images error:",r),d("Upload Mocked Images Failed. Please try again later.")})},$=()=>{const e=n.getFieldsValue();if(e.images===void 0||e.images&&e.images.length===0)return d("Please ensure that image is uploaded.");if(e.mockedImages.length>3)return d("Mocked Images only allow to upload 3(three) images.");const s={name:e.prdName,code:e.prdCode,description:e.prdDesc,variation:e.prdVariation,thickness:e.prdThickness,color:e.prdColor,tags:e.prdTag,categories:e.prdCategory,size:e.prdSize,finish:e.prdFinish,sequence:e.sequence};fetch("https://bo-api.lorenzaceramica.com/add-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(async a=>{if(a.status===201){h("Insert Successful!");const r=await a.json();w(e.images,r.id)}a.status===409&&d("Duplicated records. Please try again later.")}).catch(a=>{console.log("Insert Inspiration error:",a),d("Insert Failed. Please try again later.")})};return o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{style:{textAlign:"left"},children:[o.jsxDEV("h2",{children:"Add New Product"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:307,columnNumber:9},void 0),o.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:308,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:306,columnNumber:7},void 0),o.jsxDEV(_,{style:{textAlign:"left"},items:F,defaultActiveKey:["1","2","3"],onChange:L},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:310,columnNumber:7},void 0),";",o.jsxDEV("div",{className:"form-action-button-container",children:[o.jsxDEV(C,{type:"primary",className:"form-button",onClick:$,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:318,columnNumber:9},void 0),o.jsxDEV(C,{className:"form-button",onClick:()=>i("/product-listing"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:321,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:317,columnNumber:7},void 0),o.jsxDEV(R,{displayImg:V,setDisplayImg:f},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:328,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:305,columnNumber:5},void 0)};export{oe as default};
