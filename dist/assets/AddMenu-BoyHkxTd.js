import{a as c,F as C,l as e,B as j,j as y,n as F,k as I}from"./index-BhSXeCWi.js";import{F as w,C as A,S as P}from"./Table-Dw4oP3mS.js";import{C as $}from"./ConfirmationDialog-CXYvt_dm.js";import{c as z,g as q,e as T}from"./FormItems-HpFZQcjc.js";import{D as k}from"./index-CG3ZjnRw.js";import{C as B}from"./Collapse-CAjfZ2go.js";import"./useForceUpdate-P-Y8wlp1.js";import"./Dropdown-DrSbEMFv.js";import"./index-Zo-ZTWiQ.js";import"./Skeleton-BtgP4zmY.js";const O=({childMenu:i,selectedTableName:a,setSubNavs:l,subNavs:m})=>{const[v,N]=c.useState(!1),[b,f]=c.useState(!1),[u,S]=c.useState({title:"",message:"",buttonText:"",action:()=>{}}),[r]=C.useForm(),n=new Date().toISOString(),t=()=>{r.resetFields(),N(!0)},s=()=>{N(!1)},h=()=>{const p=r.getFieldsValue().childNav,g=m;g.push({tableName:a,name:p,updatedAt:n}),l([...g]),N(!1)},x=p=>{f(!0),S({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const g=m.findIndex(M=>M.name===p.name);if(g!==-1){const M=[...m];M.splice(g,1),l([...M])}f(!1)}})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"form-button-child-container",children:e.jsxDEV("div",{children:e.jsxDEV(j,{type:"primary",className:"form-button",onClick:t,children:"Add"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:63,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:62,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:61,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(w,{dataSource:m,children:[e.jsxDEV(A,{title:"Child Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:69,columnNumber:21},void 0),e.jsxDEV(A,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:70,columnNumber:21},void 0),e.jsxDEV(A,{title:"Action",render:(p,g)=>e.jsxDEV(P,{size:"middle",children:e.jsxDEV("a",{onClick:()=>x(g),children:"Delete"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:76,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:75,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:71,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:67,columnNumber:13},void 0),e.jsxDEV($,{showModal:b,title:u.title,confirmationMessage:u.message,setShowModal:f,action:u.action,actionText:u.buttonText},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:82,columnNumber:13},void 0),e.jsxDEV(k,{title:"Add Child",width:720,onClose:s,open:v,styles:{body:{paddingBottom:80}},extra:e.jsxDEV(P,{children:[e.jsxDEV(j,{onClick:s,children:"Cancel"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:98,columnNumber:25},void 0),e.jsxDEV(j,{onClick:h,type:"primary",children:"Submit"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:99,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:97,columnNumber:21},void 0),children:e.jsxDEV(C,{layout:"vertical",form:r,children:i&&i.length>0&&z("Child Name","childNav","Please select child.",!1,i)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:105,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:86,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/ChildSetting.tsx",lineNumber:60,columnNumber:9},void 0)},R=({form:i,data:a,setTableNameArr:l,tableNameArr:m,setSelectedTableName:v,selectedTableName:N,setChildArray:b,childArray:f})=>{const u=[{id:1,val:"categories",label:"Categories"},{id:2,val:"finishes",label:"Finishes"},{id:3,val:"tags",label:"Tags"},{id:4,val:"sizes",label:"Sizes"},{id:5,val:"colors",label:"Colors"}];c.useEffect(()=>{i.setFieldsValue({name:a==null?void 0:a.name,mainSideNavId:a==null?void 0:a.mainSideNavId,sequence:a==null?void 0:a.sequence})},[a]);const S=r=>{l([]),v(r),i.setFieldValue("menuName",null),r==="categories"?(fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let t=[];n.map(s=>{t.push({val:s.name,label:s.name})}),l(t)}),fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(n=>n.json()).then(n=>{let t=[];n.map(s=>{t.push({val:s.name,label:s.name})}),console.log(t),b(t)})):r==="sizes"?(i.setFieldValue("menuName","Sizes"),fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(n=>n.json()).then(n=>{let t=[];n.map(s=>{t.push({val:s.value,label:s.name,id:s.id})}),l(t)})):r==="finishes"?(i.setFieldValue("menuName","Finishes"),fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(n=>n.json()).then(n=>{let t=[];n.map(s=>{t.push({val:s.name,label:s.name,id:s.id})}),l(t)})):r==="tags"?(fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let t=[];n.map(s=>{t.push({val:s.name,label:s.name})}),l(t)}),fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(n=>n.json()).then(n=>{let t=[];n.map(s=>{t.push({val:s.name,label:s.name})}),b(t)})):r==="colors"&&(i.setFieldValue("menuName","Colors"),fetch("https://bo-api.lorenzaceramica.com/all-colors").then(n=>n.json()).then(n=>{let t=[];n.map(s=>{t.push({val:s.name,label:s.name})}),l(t)}))};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"form-container",children:[e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(C,{layout:"vertical",form:i,className:"form-box",children:[u.length>0&&z("Types","tableName","Please select a type.",!1,u,!0,"180px",S),N!==void 0&&e.jsxDEV(e.Fragment,{children:["colors","sizes","finishes"].includes(N)?e.jsxDEV(e.Fragment,{children:q("Menu Name","menuName","Please fill in the Menu Name.","",!0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:179,columnNumber:41},void 0):e.jsxDEV(e.Fragment,{children:m&&m.length>0&&z("Menu Name","menuName","Please select a name.",!1,m,!0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:172,columnNumber:41},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:169,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:158,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:157,columnNumber:17},void 0),e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(C,{layout:"vertical",form:i,className:"form-box",children:T("Sequence","sequence","Please fill in sequence.")},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:188,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:187,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:156,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/MenuInfo.tsx",lineNumber:155,columnNumber:9},void 0)},ne=()=>{const i=y(),a="New Menu",[l]=C.useForm(),{id:m}=F(),[v,N]=c.useState(),{setSuccessNotification:b,setErrorNotification:f}=I(),[u,S]=c.useState([]),[r,n]=c.useState(),[t,s]=c.useState(),[h,x]=c.useState([]),p=[{key:"1",label:"Basic Information",children:e.jsxDEV(R,{form:l,data:v,setTableNameArr:S,tableNameArr:u,setSelectedTableName:n,selectedTableName:r,setChildArray:s,childArray:t},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:26,columnNumber:23},void 0)},{key:"2",label:"Child Settings",children:e.jsxDEV(O,{childMenu:t,tableNameArr:u,selectedTableName:r,setSubNavs:x,subNavs:h},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:31,columnNumber:23},void 0)}],g=d=>{console.log(d)};c.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/products-sideNavs-details/${m}`).then(d=>d.json()).then(d=>{N(d)})},[]);const M=()=>{const d=l.getFieldsValue(),V=h.length>0?h.map((o,U)=>({name:o.name,path:"/"+o.name.toLowerCase(),sequence:U+1,tableName:o.tableName})):[];if(h.find(o=>o.name===d.menuName))return f("Main Menu cannot be assigned as child. Please check again");const D=h.map(o=>o.name);if(new Set(D).size!==D.length)return f("Duplicate child found. Please check again");const E={name:d.menuName,tableName:d.tableName,path:"/"+d.menuName.toLowerCase(),sequence:d.sequence,subSideNavs:V};fetch("https://bo-api.lorenzaceramica.com/add-products-sideNav",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}).then(async o=>{o.status===201&&(b("Insert Successful!"),i("/menu-settings")),o.status===409&&f("Duplicated records. Please check again.")}).catch(o=>{console.log("Insert Menu error:",o),f("Insert Failed. Please try again later.")})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{textAlign:"left"},children:[e.jsxDEV("h2",{children:a},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:104,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:105,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:103,columnNumber:13},void 0),e.jsxDEV(B,{style:{textAlign:"left"},items:p,defaultActiveKey:["1"],onChange:g},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:107,columnNumber:13},void 0),";",e.jsxDEV("div",{className:"form-action-button-container",children:[e.jsxDEV(j,{type:"primary",className:"form-button",onClick:M,children:"Save"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:109,columnNumber:17},void 0),e.jsxDEV(j,{className:"form-button",onClick:()=>i("/menu-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:110,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:108,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/settings/MenuSettings/AddMenu/AddMenu.tsx",lineNumber:102,columnNumber:9},void 0)};export{ne as default};
