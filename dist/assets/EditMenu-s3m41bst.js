import{a as o,l as e,F as D,B as S,j as Z,n as F,k as I}from"./index-PcU8TtCF.js";import{g as w,d as k,c as $}from"./FormItems-CDXenqOX.js";import{F as T,C as z,S as P}from"./Table-D8UiM6Gy.js";import{C as q}from"./ConfirmationDialog-Cgjj85sB.js";import{D as B}from"./index-D52c6ld5.js";import{C as J}from"./Collapse-BxhlyesM.js";import"./useForceUpdate-CPSZ4iGj.js";import"./Dropdown-DIMmxCkV.js";import"./index-BHKqFL6p.js";import"./Skeleton-DdI-TMQY.js";const K=({form:l,data:i,setTableNameArr:u,tableNameArr:N,setSelectedTableName:g,selectedTableName:C,setChildArray:c,childArray:j})=>{o.useEffect(()=>{l.setFieldsValue({menuName:i==null?void 0:i.name,sequence:i==null?void 0:i.sequence}),f(i==null?void 0:i.tableName)},[i]);const f=a=>{u([]),g(a),a==="categories"?(fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(s=>s.json()).then(s=>{let n=[];s.map(t=>{n.push({val:t.name,label:t.name})}),u(n)}),fetch("https://bo-api.lorenzaceramica.com/main-categories-no-sub").then(s=>s.json()).then(s=>{let n=[];s.map(t=>{n.push({val:t.name,label:t.name})}),c(n)})):a==="sizes"?(l.setFieldValue("menuName","Sizes"),fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(s=>s.json()).then(s=>{let n=[];s.map(t=>{n.push({val:t.value,label:t.name,id:t.id})}),u(n)})):a==="finishes"?(l.setFieldValue("menuName","Finishes"),fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(s=>s.json()).then(s=>{let n=[];s.map(t=>{n.push({val:t.name,label:t.name,id:t.id})}),u(n)})):a==="tags"?(fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(s=>s.json()).then(s=>{let n=[];s.map(t=>{n.push({val:t.name,label:t.name})}),u(n)}),fetch("https://bo-api.lorenzaceramica.com/main-tags-no-sub").then(s=>s.json()).then(s=>{let n=[];s.map(t=>{n.push({val:t.name,label:t.name})}),c(n)})):a==="colors"&&(l.setFieldValue("menuName","Colors"),fetch("https://bo-api.lorenzaceramica.com/all-colors").then(s=>s.json()).then(s=>{let n=[];s.map(t=>{n.push({val:t.name,label:t.name})}),u(n)}))};return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:"form-container",children:[e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(D,{layout:"vertical",form:l,className:"form-box",children:w("Menu Name","menuName","Please fill in the Menu Name.","",!0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:128,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:127,columnNumber:17},void 0),e.jsxDEV("div",{className:"form-wrap",children:e.jsxDEV(D,{layout:"vertical",form:l,className:"form-box",children:k("Sequence","sequence","Please fill in sequence.")},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:137,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:136,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:126,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/MenuInfo.tsx",lineNumber:125,columnNumber:9},void 0)},W=()=>[{key:"1",id:"1",name:"Wood",updatedAt:"2024-11-05"},{key:"2",id:"2",name:"Marble-like",updatedAt:"2024-11-05"},{key:"3",id:"3",name:"Terazzo",updatedAt:"2024-11-05"},{key:"4",id:"4",name:"Stone",updatedAt:"2024-11-05"}],_=({childMenu:l,data:i,selectedTableName:u,setSubNavs:N,subNavs:g})=>{const[C,c]=o.useState(!1),[j,f]=o.useState(!1),[a,s]=o.useState({title:"",message:"",buttonText:"",action:()=>{}}),[n]=D.useForm(),t=new Date().toISOString(),x=()=>{n.resetFields(),c(!0)},M=()=>{c(!1)},U=()=>{const p=n.getFieldsValue().childNav,m=g;m.push({tableName:u,name:p,updatedAt:t}),N([...m]),c(!1)};o.useEffect(()=>{i&&N(i.subNavs)},[i]);const v=p=>{f(!0),s({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{const m=g.findIndex(E=>E.name===p.name);if(m!==-1){const E=[...g];E.splice(m,1),N([...E])}f(!1)}})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"form-button-child-container",children:e.jsxDEV("div",{children:e.jsxDEV(S,{type:"primary",className:"form-button",onClick:x,children:"Add"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:69,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:67,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(T,{dataSource:g,children:[e.jsxDEV(z,{title:"Child Name",dataIndex:"name"},"name",!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:75,columnNumber:21},void 0),e.jsxDEV(z,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:76,columnNumber:21},void 0),e.jsxDEV(z,{title:"Action",render:(p,m)=>e.jsxDEV(P,{size:"middle",children:e.jsxDEV("a",{onClick:()=>v(m),children:"Delete"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:82,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:81,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:77,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:74,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:73,columnNumber:13},void 0),e.jsxDEV(q,{showModal:j,title:a.title,confirmationMessage:a.message,setShowModal:f,action:a.action,actionText:a.buttonText},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:88,columnNumber:13},void 0),e.jsxDEV(B,{title:"Add Child",width:720,onClose:M,open:C,styles:{body:{paddingBottom:80}},extra:e.jsxDEV(P,{children:[e.jsxDEV(S,{onClick:M,children:"Cancel"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:104,columnNumber:25},void 0),e.jsxDEV(S,{onClick:U,type:"primary",children:"Submit"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:105,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:103,columnNumber:21},void 0),children:e.jsxDEV(D,{layout:"vertical",form:n,children:l&&l.length>0&&$("Child","childNav","Please select child.",!1,l)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:111,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:92,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/ChildSetting.tsx",lineNumber:66,columnNumber:9},void 0)},re=()=>{const l=Z(),i="Edit Menu",[u]=D.useForm(),{id:N}=F(),[g,C]=o.useState(),[c,j]=o.useState(),{setSuccessNotification:f,setErrorNotification:a}=I(),[s,n]=o.useState(),[t,x]=o.useState([]),[M,U]=o.useState(),[v,p]=o.useState(),[m,E]=o.useState([]);o.useEffect(()=>{const r=W();let h=[];r.map(b=>{h.push({val:b.id,label:b.name})}),C(h)},[]);const V=[{key:"1",label:"Basic Information",children:e.jsxDEV(K,{form:u,data:c,setTableNameArr:x,tableNameArr:t,setSelectedTableName:U,selectedTableName:M,setChildArray:p,childArray:v},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:39,columnNumber:23},void 0)},{key:"2",label:"Child Settings",children:e.jsxDEV(_,{childMenu:v,data:c,tableNameArr:t,selectedTableName:M,setSubNavs:E,subNavs:m},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:44,columnNumber:23},void 0)}],O=r=>{console.log(r)};o.useEffect(()=>{fetch(`https://bo-api.lorenzaceramica.com/products-sideNavs-details/${N}`).then(r=>r.json()).then(r=>{j(r)})},[]),o.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories").then(r=>r.json()).then(r=>{let h=[];r.map(b=>{h.push({val:b.id,label:b.name})}),n(h)})},[]);const R=()=>{const r=u.getFieldsValue(),h=m.length>0?m.map((d,L)=>({name:d.name,path:"/"+d.name.toLowerCase(),sequence:L+1,tableName:d.tableName})):[];if(m.find(d=>d.name===r.menuName))return a("Main Menu cannot be assigned as child. Please check again");const A=m.map(d=>d.name);if(new Set(A).size!==A.length)return a("Duplicate child found. Please check again");const y={name:r.menuName,tableName:c.tableName,path:c.path,sequence:r.sequence,subSideNavs:h};fetch("https://bo-api.lorenzaceramica.com/update-products-sideNav",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...y,id:N})}).then(async d=>{d.status===204&&(f("Update Successful!"),l("/menu-settings"))}).catch(d=>{console.log("Update Menu error:",d),a("Update Failed. Please try again later.")})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{textAlign:"left"},children:[e.jsxDEV("h2",{children:i},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:132,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:133,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:131,columnNumber:13},void 0),e.jsxDEV(J,{style:{textAlign:"left"},items:V,defaultActiveKey:["1","2"],onChange:O},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:135,columnNumber:13},void 0),";",e.jsxDEV("div",{className:"form-action-button-container",children:[e.jsxDEV(S,{type:"primary",className:"form-button",onClick:R,children:"Save"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:137,columnNumber:17},void 0),e.jsxDEV(S,{className:"form-button",onClick:()=>l("/menu-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:138,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:136,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/settings/MenuSettings/EditMenu/EditMenu.tsx",lineNumber:130,columnNumber:9},void 0)};export{re as default};
