import{j as z,F as l,k as V,a as c,l as s,B as b}from"./index-PcU8TtCF.js";import{P as L,h as R}from"./PreviewImage-z1sSscEd.js";import{T as S}from"./TextEditor-BatsGHbE.js";import{c as Z,g,b as w,f as F,U as h}from"./FormItems-CDXenqOX.js";import{C as k}from"./Collapse-BxhlyesM.js";import"./index-BHKqFL6p.js";import"./Skeleton-DdI-TMQY.js";import"./useForceUpdate-CPSZ4iGj.js";import"./quill.snow-DXfzYZZr.js";const Q=()=>{const v="New Project",n=z(),[m]=l.useForm(),{setSuccessNotification:i,setErrorNotification:a}=V(),[P,d]=c.useState(),[u,x]=c.useState(),[p,U]=c.useState(),[y,j]=c.useState({previewVisible:!1,previewImage:"",previewTitle:""}),D=async(e,o)=>{const t=new FormData;t.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-commercial-thumbnail/${o}`,{method:"POST",body:t}).then(async r=>{r.status===201&&(i("Upload Thumbnail Successful!"),n("/project-settings"))}).catch(r=>{console.log("Upload Thumbnail error:",r),a("Upload Thumbnail Failed. Please try again later.")})},A=async(e,o)=>{const t=new FormData;t.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-residential-thumbnail/${o}`,{method:"POST",body:t}).then(async r=>{r.status===201&&(i("Upload Thumbnail Successful!"),n("/project-settings"))}).catch(r=>{console.log("Upload Thumbnail error:",r),a("Upload Thumbnail Failed. Please try again later.")})},E=()=>{const e=m.getFieldsValue();if(e.thumbnail===void 0||e.thumbnail&&e.thumbnail.length===0)return a("Please ensure that image is uploaded.");const o={path:e.path,content:u,description:e.description,title:e.title};e.projectType==="residentials"?fetch("https://bo-api.lorenzaceramica.com/add-project-residential",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(async t=>{if(t.status===201){i("Insert Successful!");const r=await t.json();A(p,r.id)}}).catch(t=>{console.log("Insert Inspiration error:",t),a("Insert Failed. Please try again later.")}):fetch("https://bo-api.lorenzaceramica.com/add-project-commercial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(async t=>{if(t.status===201){i("Insert Successful!");const r=await t.json();D(p,r.id)}}).catch(t=>{console.log("Insert Project Commercial error:",t),a("Insert Failed. Please try again later.")})},C=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(a("Image file size is more than 1MB. Please try a smaller size file."),h.LIST_IGNORE):!1:(a("Only .jpg, .jpeg and .png image file format are accepted!"),h.LIST_IGNORE),T=e=>Array.isArray(e)?e:(U(e.file),e&&e.fileList),O=async e=>{e=await R(e),j({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},N=[{key:1,val:"residentials",label:"Residentials"},{key:2,val:"commercials",label:"Commercials"}],f=e=>{e==="residentials"?d("/upload-project-residentials-images"):e==="commercials"&&d("/upload-project-commercials-images")},I=[{key:"1",label:"Basic Information",children:s.jsxDEV("div",{className:"form-container",children:s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(l,{layout:"vertical",form:m,className:"form-box",children:[N.length>0?Z("Project Type","projectType","Please select a Type.",!1,N,!1,"180px",f):null,g("Title","title","Please fill in the Title."),w("Description","description","Please fill in the Description.",6),g("Path","path","Please fill in the Path."),F("thumbnail","Thumbnail",T,O,C,!1)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:181,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:180,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:178,columnNumber:23},void 0)},{key:"2",label:"Project Content",children:s.jsxDEV("div",{className:"form-container",children:s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(l,{layout:"vertical",form:m,className:"form-box",children:[s.jsxDEV(l.Item,{name:"content",children:s.jsxDEV(S,{className:"para-editor",routeName:P,setEditorValue:x,editorValue:u},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:212,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:211,columnNumber:25},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:215,columnNumber:25},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:216,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:206,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:205,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:204,columnNumber:23},void 0)}];return s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{style:{textAlign:"left"},children:[s.jsxDEV("h2",{children:v},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:226,columnNumber:17},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:227,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:225,columnNumber:13},void 0),s.jsxDEV(k,{style:{textAlign:"left"},items:I,defaultActiveKey:["1","2"],onChange:f},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:229,columnNumber:13},void 0),";",s.jsxDEV("div",{className:"form-action-button-container",children:[s.jsxDEV(b,{type:"primary",className:"form-button",onClick:E,children:"Save"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:231,columnNumber:17},void 0),s.jsxDEV(b,{className:"form-button",onClick:()=>n("/project-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:232,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:230,columnNumber:13},void 0),s.jsxDEV(L,{displayImg:y,setDisplayImg:j},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:234,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/projects/AddProject.tsx",lineNumber:224,columnNumber:9},void 0)};export{Q as default};
