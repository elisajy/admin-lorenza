import{l as o,F as g,j as O,a as t,k as q,B as N}from"./index-C2K8AR7W.js";import{g as u,a as C,b as B,c as b,d as R,e as v,U as z}from"./FormItems-BIhz8kcz.js";import{P as G,h as _}from"./PreviewImage-IiUvUdrc.js";import{C as J}from"./Collapse-DJC44Ff8.js";import"./useForceUpdate-C_cK0Z1j.js";import"./index-Cvpz9R5X.js";import"./Skeleton-BM-4ttUs.js";const K=({form:i,categoryData:d,finishesData:c,sizesData:l,tagsData:m})=>o.jsxDEV(o.Fragment,{children:o.jsxDEV("div",{className:"form-container",children:[o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(g,{layout:"vertical",form:i,className:"form-box",children:[u("Product Name","prdName","Please fill in the Product Name."),d&&d.length>0&&C("Product Category","prdCategory","Please select category.",!1,d),u("Product Variation","prdVariation","Please fill in the Product Variation."),B("Product Description","prdDesc","Please fill in the Product Description.",6)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:18,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:17,columnNumber:17},void 0),o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(g,{layout:"vertical",form:i,className:"form-box",children:[u("Product Code","prdCode","Please fill in the Product Code."),u("Product Thickness","prdThickness","Please fill in the Product Thickness."),l&&l.length>0&&b("Product Size","prdSize","Please select a Product Size.",!1,l),c&&c.length>0&&b("Product Finishes","prdFinish","Please select a Product Finishes.",!1,c),u("Product Color","prdColor","Please fill in the Product Color."),m&&m.length>0&&C("Product Tags","prdTag","Please select Tag.",!1,m),R("Sequence","sequence","Please fill in sequence.")]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:34,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:33,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:16,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:15,columnNumber:9},void 0),ae=()=>{const i=O(),[d]=g.useForm(),[c,l]=t.useState(),[m,I]=t.useState(),[D,x]=t.useState(),[A,k]=t.useState(),{setSuccessNotification:p,setErrorNotification:n}=q(),[y,S]=t.useState(),[j,E]=t.useState(),[U,h]=t.useState({previewVisible:!1,previewImage:"",previewTitle:""}),f=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(n("Image file size is more than 1MB. Please try a smaller size file."),z.LIST_IGNORE):!1:(n("Only .jpg, .jpeg and .png image file format are accepted!"),z.LIST_IGNORE),V=e=>Array.isArray(e)?e:(S(e.file),e&&e.fileList),F=e=>Array.isArray(e)?e:(E(e.file),e&&e.fileList),P=async e=>{e=await _(e),h({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},L=[{key:"1",label:"Basic Information",children:o.jsxDEV(K,{form:d,categoryData:c,tagsData:m,sizesData:D,finishesData:A},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:82,columnNumber:9},void 0)},{key:"2",label:"Product Images",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(g,{layout:"vertical",form:d,className:"form-box",children:v("images","Product Image",V,P,f,!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:97,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:96,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:95,columnNumber:9},void 0)},{key:"3",label:"Mock Images",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:o.jsxDEV(g,{layout:"vertical",form:d,className:"form-box",children:v("mockedImages","Mocked Image",F,P,f,!0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:117,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:116,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:115,columnNumber:9},void 0)}],T=e=>{console.log(e)};t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories-no-level").then(e=>e.json()).then(e=>{let r=[];e.map(a=>{r.push({val:a.id,label:a.name})}),l(r)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-tags-no-level").then(e=>e.json()).then(e=>{let r=[];e.map(a=>{r.push({val:a.id,label:a.name})}),I(r)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(e=>e.json()).then(e=>{let r=[];e.map(a=>{r.push({val:a.id,label:a.name,id:a.id})}),x(r)})},[]),t.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(e=>e.json()).then(e=>{let r=[];e.map(a=>{r.push({val:a.id,label:a.name,id:a.id})}),k(r)})},[]);const w=async(e,r)=>{const a=new FormData;a.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-products-images/${r}`,{method:"POST",body:a}).then(async s=>{s.status===201&&(p("Upload Product Images Successful!"),i("/product-listing"))}).catch(s=>{console.log("Upload Product Images error:",s),n("Upload Product Images Failed. Please try again later.")})},M=async(e,r)=>{const a=new FormData;a.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/upload-mocked-images/${r}`,{method:"POST",body:a}).then(async s=>{s.status===201&&(p("Upload Mocked Images Successful!"),i("/product-listing"))}).catch(s=>{console.log("Upload Mocked Images error:",s),n("Upload Mocked Images Failed. Please try again later.")})},$=()=>{const e=d.getFieldsValue();if(console.log(e),e.images===void 0||e.images&&e.images.length===0)return n("Please ensure that image is uploaded.");if(e.mockedImages===void 0||e.mockedImages&&e.mockedImages.length===0)return n("Please ensure that Mocked Image is uploaded.");const r={name:e.prdName,code:e.prdCode,description:e.prdDesc,variation:e.prdVariation,thickness:e.prdThickness,color:e.prdColor,tags:e.prdTag,categories:e.prdCategory,size:e.prdSize,finish:e.prdFinish,sequence:e.sequence};fetch("https://bo-api.lorenzaceramica.com/add-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(async a=>{if(a.status===201){p("Insert Successful!");const s=await a.json();console.log(s),w(y,s.id),M(j,s.id)}a.status===409&&n("Duplicated records. Please try again later.")}).catch(a=>{console.log("Insert Inspiration error:",a),n("Insert Failed. Please try again later.")})};return o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{style:{textAlign:"left"},children:[o.jsxDEV("h2",{children:"Add New Product"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:300,columnNumber:9},void 0),o.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:301,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:299,columnNumber:7},void 0),o.jsxDEV(J,{style:{textAlign:"left"},items:L,defaultActiveKey:["1","2","3"],onChange:T},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:303,columnNumber:7},void 0),";",o.jsxDEV("div",{className:"form-action-button-container",children:[o.jsxDEV(N,{type:"primary",className:"form-button",onClick:$,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:311,columnNumber:9},void 0),o.jsxDEV(N,{className:"form-button",onClick:()=>i("/product-listing"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:314,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:310,columnNumber:7},void 0),o.jsxDEV(G,{displayImg:U,setDisplayImg:h},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:321,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:298,columnNumber:5},void 0)};export{ae as default};
