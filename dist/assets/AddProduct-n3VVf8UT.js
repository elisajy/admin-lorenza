import{q as s,F as g,l as $,a,n as M,B as A}from"./index-X1Fn-djM.js";import{P as q,h as B}from"./PreviewImage-D1S0C-Z0.js";import{g as f,a as I,b as G,c as N,d as _,e as j,U as E}from"./FormItems-DjqHx0qX.js";import{C as J}from"./Collapse-BRh-AdPO.js";import"./index-BsiXEUhZ.js";import"./Skeleton-Dx8Irf0r.js";import"./useForceUpdate-CQ54DrJu.js";const K=({form:l,categoryData:d,finishesData:n,sizesData:m,tagsData:u,colorsData:p})=>s.jsxDEV(s.Fragment,{children:s.jsxDEV("div",{className:"form-container",children:[s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(g,{layout:"vertical",form:l,className:"form-box",children:[f("Product Name","prdName","Please fill in the Product Name."),d&&d.length>0&&I("Product Category","prdCategory","Please select category.",!1,d),f("Product Variation","prdVariation","Please fill in the Product Variation."),G("Product Description","prdDesc","Please fill in the Product Description.",6)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:19,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:18,columnNumber:17},void 0),s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(g,{layout:"vertical",form:l,className:"form-box",children:[f("Product Code","prdCode","Please fill in the Product Code."),f("Product Thickness","prdThickness","Please fill in the Product Thickness."),m&&m.length>0&&N("Product Size","prdSize","Please select a Product Size.",!1,m),n&&n.length>0&&N("Product Finishes","prdFinish","Please select a Product Finishes.",!1,n),p&&p.length>0&&N("Color Category","prdColorId","Please select a Product Color Category.",!1,p),f("Product Color","prdColor","Please fill in the Product Color."),u&&u.length>0&&I("Product Tags","prdTag","Please select Tag.",!1,u),_("Sequence","sequence","Please fill in sequence.")]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:35,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:34,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:17,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/ProductInfo-add.tsx",lineNumber:16,columnNumber:9},void 0),te=()=>{const l=$(),[d]=g.useForm(),[n,m]=a.useState(),[u,p]=a.useState(),[U,y]=a.useState(),[x,C]=a.useState(),[D,z]=a.useState(),{setSuccessNotification:P,setErrorNotification:c}=M(),[H,O]=a.useState(),[Q,V]=a.useState(),[F,h]=a.useState({previewVisible:!1,previewImage:"",previewTitle:""}),b=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(c("Image file size is more than 1MB. Please try a smaller size file."),E.LIST_IGNORE):!1:(c("Only .jpg, .jpeg and .png image file format are accepted!"),E.LIST_IGNORE),k=e=>Array.isArray(e)?e:(O(e.file),e&&e.fileList),S=e=>Array.isArray(e)?e:(V(e.file),e&&e.fileList),v=async e=>{e=await B(e),h({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},L=[{key:"1",label:"Basic Information",children:s.jsxDEV(K,{form:d,categoryData:n,tagsData:u,sizesData:U,finishesData:x,colorsData:D},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:76,columnNumber:9},void 0)},{key:"2",label:"Product Images",children:s.jsxDEV("div",{className:"form-container",children:s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(g,{layout:"vertical",form:d,className:"form-box",children:j("images","Product Image",k,v,b,!0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:92,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:91,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:90,columnNumber:9},void 0)},{key:"3",label:"Mock Images",children:s.jsxDEV("div",{className:"form-container",children:s.jsxDEV("div",{className:"form-wrap",children:s.jsxDEV(g,{layout:"vertical",form:d,className:"form-box",children:j("mockedImages","Mocked Image",S,v,b,!0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:112,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:111,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:110,columnNumber:9},void 0)}],R=e=>{console.log(e)};a.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-categories-no-level").then(e=>e.json()).then(e=>{let o=[];e.map(r=>{o.push({val:r.id,label:r.name})}),m(o)})},[]),a.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-tags-no-level").then(e=>e.json()).then(e=>{let o=[];e.map(r=>{o.push({val:r.id,label:r.name})}),p(o)})},[]),a.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-sizes").then(e=>e.json()).then(e=>{let o=[];e.map(r=>{o.push({val:r.id,label:r.name,id:r.id})}),y(o)})},[]),a.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-finishes").then(e=>e.json()).then(e=>{let o=[];e.map(r=>{o.push({val:r.id,label:r.name,id:r.id})}),C(o)})},[]),a.useEffect(()=>{fetch("https://bo-api.lorenzaceramica.com/all-colors").then(e=>e.json()).then(e=>{let o=[];e.map(r=>{o.push({val:r.id,label:r.name,id:r.id})}),z(o)})},[]);const Z=async(e,o)=>{const r=new FormData;for(let t=0;t<e.length;t++){const i=e[t];r.append(`image-${t}`,i.originFileObj)}fetch(`https://bo-api.lorenzaceramica.com/upload-products-images/${o}`,{method:"POST",body:r}).then(async t=>{if(t.status===201){const i=d.getFieldsValue();i.mockedImages&&i.mockedImages.length!==0?await w(i.mockedImages,o):(P("Upload Product Images Successful!"),l("/product-listing"))}}).catch(t=>{console.log("Upload Product Images error:",t),c("Upload Product Images Failed. Please try again later.")})},w=async(e,o)=>{const r=new FormData;for(let t=0;t<e.length;t++){const i=e[t];r.append(`image-${t}`,i.originFileObj)}fetch(`https://bo-api.lorenzaceramica.com/upload-mocked-images/${o}`,{method:"POST",body:r}).then(async t=>{t.status===201&&(P("Upload Mocked Images Successful!"),l("/product-listing"))}).catch(t=>{console.log("Upload Mocked Images error:",t),c("Upload Mocked Images Failed. Please try again later.")})},T=()=>{const e=d.getFieldsValue();if(e.images===void 0||e.images&&e.images.length===0)return c("Please ensure that image is uploaded.");if(e.mockedImages&&e.mockedImages.length>3)return c("Mocked Images only allow to upload 3(three) images.");const o={name:e.prdName,code:e.prdCode,description:e.prdDesc,variation:e.prdVariation,thickness:e.prdThickness,color:e.prdColor,tags:e.prdTag,categories:e.prdCategory,size:e.prdSize,finish:e.prdFinish,sequence:e.sequence,colorId:e.prdColorId};fetch("https://bo-api.lorenzaceramica.com/add-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(async r=>{if(r.status===201){P("Insert Successful!");const t=await r.json();Z(e.images,t.id)}r.status===409&&c("Duplicated records. Please try again later.")}).catch(r=>{console.log("Insert Inspiration error:",r),c("Insert Failed. Please try again later.")})};return s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{style:{textAlign:"left"},children:[s.jsxDEV("h2",{children:"Add New Product"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:316,columnNumber:9},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:317,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:315,columnNumber:7},void 0),s.jsxDEV(J,{style:{textAlign:"left"},items:L,defaultActiveKey:["1","2","3"],onChange:R},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:319,columnNumber:7},void 0),";",s.jsxDEV("div",{className:"form-action-button-container",children:[s.jsxDEV(A,{type:"primary",className:"form-button",onClick:T,children:"Save"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:327,columnNumber:9},void 0),s.jsxDEV(A,{className:"form-button",onClick:()=>l(-1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:330,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:326,columnNumber:7},void 0),s.jsxDEV(q,{displayImg:F,setDisplayImg:h},void 0,!1,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:337,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/User/Documents/Projects/LORENZA/admin-lorenza/src/pages/products/AddProduct/AddProduct.tsx",lineNumber:314,columnNumber:5},void 0)};export{te as default};
