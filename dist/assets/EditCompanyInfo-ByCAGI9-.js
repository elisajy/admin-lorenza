import{l as z,s as T,F as i,n as P,a as l,q as o,B as C}from"./index-DjhjgXs3.js";import{g as s,b as U,f as O,U as g}from"./FormItems-DcQr6DGU.js";import{P as V,h as k}from"./PreviewImage-CeGICmvw.js";import{T as L}from"./TextEditorWithoutImage-RrFlLhCV.js";import{C as j}from"./index-Ci4BBHKT.js";import"./useForceUpdate-Cjrk0ddK.js";import"./index-Cxjwi2K_.js";import"./Skeleton-CSgj4YNl.js";import"./index-CzxZ0ivr.js";import"./Dropdown-BOgXC6sa.js";const K=()=>{const h="Edit Company Info",c=z(),{key:a}=T(),[r]=i.useForm(),{setSuccessNotification:u,setErrorNotification:m}=P(),[N,y]=l.useState(),[I,d]=l.useState({previewVisible:!1,previewImage:"",previewTitle:""}),[p,f]=l.useState(),v=e=>{switch(e){case"COMPANY_NAME":return"Company Name";case"COMPANY_REGISTRATION_NUMBER":return"Company Registration Number";case"ADDRESS":return"Address";case"OPERATING_HOURS":return"Operating Hours";case"CONTACT_DESKTOP":return"Contact Desktop View";case"CONTACT_MOBILE":return"Contact Mobile View";case"FACEBOOK":return"Facebook Link";case"INSTAGRAM":return"Instagram Link";case"OUR_STORY_TEXT":return"Our Story - Text";case"OUR_STORY_IMG":return"Our Story - Image";default:return null}};l.useEffect(()=>{try{fetch(`https://bo-api.lorenzaceramica.com/company-info/${a}`).then(e=>e.json()).then(e=>{r.setFieldsValue({title:v(e.key),value:e.key!=="OUR_STORY_IMG"?e.value:[{uid:"-2",status:"done",url:e.value,name:`img_${e.key}`}]}),f(e.value)})}catch(e){console.error("Error fetching Company Info:",e)}},[]);const E=()=>{const e=r.getFieldsValue(),t={value:e.title.toUpperCase().includes("CONTACT")?p:e.value};fetch("https://bo-api.lorenzaceramica.com/update-company-info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,key:a})}).then(async n=>{n.status===204&&(u("Update Successful!"),a==="OUR_STORY_IMG"?D(N):c("/company-info"))}).catch(n=>{console.log("Update Company Info error:",n),m("Update Failed. Please try again later.")})},b=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(m("Image file size is more than 1MB. Please try a smaller size file."),g.LIST_IGNORE):!1:(m("Only .jpg, .jpeg and .png image file format are accepted!"),g.LIST_IGNORE),x=e=>Array.isArray(e)?e:(y(e.file),e&&e.fileList),S=async e=>{e=await k(e),d({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},D=async e=>{const t=new FormData;t.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/modify-our-story-image/${a}`,{method:"POST",body:t}).then(async n=>{n.status===201&&(u("Upload Image Successful!"),c("/company=info"))}).catch(n=>{console.log("Upload Image error:",n),m("Upload Image Failed. Please try again later.")})};return o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{style:{textAlign:"left"},children:[o.jsxDEV("h2",{children:h},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:161,columnNumber:17},void 0),o.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:162,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:160,columnNumber:13},void 0),o.jsxDEV(j,{title:"Edit Company Info",className:"form-card-container",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:a!=null&&a.includes("OUR_STORY")?o.jsxDEV(o.Fragment,{children:a==="OUR_STORY_TEXT"?o.jsxDEV(i,{layout:"vertical",form:r,className:"form-box",children:[s("Title","title","Please fill in the title.","",!0),U("Text","value","Please fill in the text.",6)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:172,columnNumber:45},void 0):o.jsxDEV(i,{layout:"vertical",form:r,className:"form-box",children:[s("Title","title","Please fill in the title.","",!0),O("value","Image",x,S,b,!1)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:181,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:169,columnNumber:33},void 0):a!=null&&a.includes("CONTACT")?o.jsxDEV(i,{layout:"vertical",form:r,className:"form-box",children:[s("Title","title","Please fill in the title.","",!0),o.jsxDEV(i.Item,{name:"value",children:o.jsxDEV(L,{className:"para-editor-small",editorValue:p,setEditorValue:f},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:200,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:199,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:193,columnNumber:37},void 0):o.jsxDEV(i,{layout:"vertical",form:r,className:"form-box",children:[s("Title","title","Please fill in the title.","",!0),s("Value","value","Please fill in the value.")]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:204,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:166,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:165,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:164,columnNumber:13},void 0),o.jsxDEV("div",{className:"form-action-button-container",children:[o.jsxDEV(C,{type:"primary",className:"form-button",onClick:E,children:"Save"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:217,columnNumber:17},void 0),o.jsxDEV(C,{className:"form-button",onClick:()=>c(-1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:218,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:216,columnNumber:13},void 0),o.jsxDEV(V,{displayImg:I,setDisplayImg:d},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:220,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:159,columnNumber:9},void 0)};export{K as default};
