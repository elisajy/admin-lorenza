import{l as P,q as U,F as s,n as O,a as l,p as o,B as N}from"./index-C5q9eaKk.js";import{g as t,b as V,f as S,U as y}from"./FormItems-BzYKdRp9.js";import{P as D,h as z}from"./PreviewImage-xzJ8jjjK.js";import{T as R}from"./TextEditorWithoutImage-B59KEqgz.js";import{C as _}from"./index-CWPCmIz-.js";import"./useForceUpdate-BAsQwViM.js";import"./index-me5V5Kui.js";import"./Skeleton-CXOUVVOS.js";import"./quill.snow-sMEspRhB.js";import"./index-9tJkGHz9.js";import"./Dropdown-CsSZAm1G.js";const H=()=>{const C="Edit Company Info",c=P(),{key:a}=U(),[n]=s.useForm(),{setSuccessNotification:u,setErrorNotification:i}=O(),[I,v]=l.useState(),[g,f]=l.useState({previewVisible:!1,previewImage:"",previewTitle:""}),[d,p]=l.useState(),h=e=>{switch(e){case"COMPANY_NAME":return"Company Name";case"COMPANY_REGISTRATION_NUMBER":return"Company Registration Number";case"ADDRESS":return"Address";case"OPERATING_HOURS":return"Operating Hours";case"CONTACT_DESKTOP":return"Contact Desktop View";case"CONTACT_MOBILE":return"Contact Mobile View";case"FACEBOOK":return"Facebook Link";case"INSTAGRAM":return"Instagram Link";case"OUR_STORY_TEXT":return"Our Story - Text";case"OUR_STORY_IMG":return"Our Story - Image";default:return null}};l.useEffect(()=>{try{fetch(`https://bo-api.lorenzaceramica.com/company-info/${a}`).then(e=>e.json()).then(e=>{n.setFieldsValue({title:h(e.key),value:e.key!=="OUR_STORY_IMG"?e.value:[{uid:"-2",status:"done",url:e.value,name:`img_${e.key}`}]}),p(e.value)})}catch(e){console.error("Error fetching Company Info:",e)}},[]);const E=()=>{const e=n.getFieldsValue(),m={value:e.title.toUpperCase().includes("CONTACT")?d:e.value};fetch("https://bo-api.lorenzaceramica.com/update-company-info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,key:a})}).then(async r=>{r.status===204&&(u("Update Successful!"),a==="OUR_STORY_IMG"?T(I):c("/company-info"))}).catch(r=>{console.log("Update Company Info error:",r),i("Update Failed. Please try again later.")})},b=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(i("Image file size is more than 1MB. Please try a smaller size file."),y.LIST_IGNORE):!1:(i("Only .jpg, .jpeg and .png image file format are accepted!"),y.LIST_IGNORE),x=e=>Array.isArray(e)?e:(v(e.file),e&&e.fileList),j=async e=>{e=await z(e),f({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},T=async e=>{const m=new FormData;m.append("image",e),fetch(`https://bo-api.lorenzaceramica.com/modify-our-story-image/${a}`,{method:"POST",body:m}).then(async r=>{r.status===201&&(u("Upload Image Successful!"),c("/company=info"))}).catch(r=>{console.log("Upload Image error:",r),i("Upload Image Failed. Please try again later.")})};return o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{style:{textAlign:"left"},children:[o.jsxDEV("h2",{children:C},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:161,columnNumber:17},void 0),o.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:162,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:160,columnNumber:13},void 0),o.jsxDEV(_,{title:"Edit Company Info",className:"form-card-container",children:o.jsxDEV("div",{className:"form-container",children:o.jsxDEV("div",{className:"form-wrap",children:a!=null&&a.includes("OUR_STORY")?o.jsxDEV(o.Fragment,{children:a==="OUR_STORY_TEXT"?o.jsxDEV(s,{layout:"vertical",form:n,className:"form-box",children:[t("Title","title","Please fill in the title.","",!0),V("Text","value","Please fill in the text.",6)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:172,columnNumber:45},void 0):o.jsxDEV(s,{layout:"vertical",form:n,className:"form-box",children:[t("Title","title","Please fill in the title.","",!0),S("value","Image",x,j,b,!1)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:181,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:169,columnNumber:33},void 0):a!=null&&a.includes("CONTACT")?o.jsxDEV(s,{layout:"vertical",form:n,className:"form-box",children:[t("Title","title","Please fill in the title.","",!0),o.jsxDEV(s.Item,{name:"value",children:o.jsxDEV(R,{className:"para-editor-small",editorValue:d,setEditorValue:p},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:200,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:199,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:193,columnNumber:37},void 0):o.jsxDEV(s,{layout:"vertical",form:n,className:"form-box",children:[t("Title","title","Please fill in the title.","",!0),t("Value","value","Please fill in the value.")]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:204,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:166,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:165,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:164,columnNumber:13},void 0),o.jsxDEV("div",{className:"form-action-button-container",children:[o.jsxDEV(N,{type:"primary",className:"form-button",onClick:E,children:"Save"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:217,columnNumber:17},void 0),o.jsxDEV(N,{className:"form-button",onClick:()=>c("/company-info"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:218,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:216,columnNumber:13},void 0),o.jsxDEV(D,{displayImg:g,setDisplayImg:f},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:220,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/home/CompanyInfo/EditCompanyInfo.tsx",lineNumber:159,columnNumber:9},void 0)};export{H as default};
