import{O as F,q as w,l as $,F as n,a as i,n as O,p as t,B as b}from"./index-C5q9eaKk.js";import{P as A,h as k}from"./PreviewImage-xzJ8jjjK.js";import{T as B}from"./TextEditor-hDx0A5CI.js";import{g,b as L,f as K,U as v}from"./FormItems-BzYKdRp9.js";import{C as R}from"./Collapse-CZ1U_TaX.js";import"./index-me5V5Kui.js";import"./Skeleton-CXOUVVOS.js";import"./useForceUpdate-BAsQwViM.js";import"./quill.snow-sMEspRhB.js";const Z=()=>{const P="Edit Project",h=F(),{id:a}=w(),m=$(),[l]=n.useForm(),[_,x]=i.useState(),{setSuccessNotification:u,setErrorNotification:c}=O();i.useState();const[p,f]=i.useState(),[j,E]=i.useState(),[d,y]=i.useState(),[D,N]=i.useState({previewVisible:!1,previewImage:"",previewTitle:""});i.useEffect(()=>{try{const e=h.pathname.split("/")[1];let s;e==="project-residentials"?s="project-residential-details":s="project-commercial-details",y(e),fetch(`https://bo-api.lorenzaceramica.com/${s}/${a}`).then(r=>r.json()).then(r=>{l.setFieldsValue({title:r.title,description:r.description,path:r.path,thumbnail:[{uid:"-2",status:"done",url:r.thumbnail,name:`thumbnail_${a}`}]}),f(r.content),x(r)})}catch(e){console.error("Error fetching Project Details:",e)}},[]);const U=async e=>{const s=new FormData;s.append("image",e);let r;d==="project-residentials"?r="upload-residential-thumbnail":r="upload-commercial-thumbnail",fetch(`https://bo-api.lorenzaceramica.com/${r}/${a}`,{method:"POST",body:s}).then(async o=>{o.status===201&&(u("Upload Thumbnail Successful!"),m("/project-settings"))}).catch(o=>{console.log("Upload Project error:",o),c("Upload Project Failed. Please try again later.")})},C=()=>{const e=l.getFieldsValue(),s={path:e.path,content:p,description:e.description,title:e.title};let r;d==="project-residentials"?r="update-project-residential":r="update-project-commercial",fetch(`https://bo-api.lorenzaceramica.com/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,id:a})}).then(async o=>{o.status===204&&(u("Update Successful!"),j!==void 0?U(j):m("/project-settings"))}).catch(o=>{console.log("Update Project error:",o),c("Update Failed. Please try again later.")})},V=e=>e.type==="image/jpeg"||e.type==="image/png"?e.size>1e6?(c("Image file size is more than 1MB. Please try a smaller size file."),v.LIST_IGNORE):!1:(c("Only .jpg, .jpeg and .png image file format are accepted!"),v.LIST_IGNORE),z=e=>Array.isArray(e)?e:(E(e.file),e&&e.fileList),I=async e=>{e=await k(e),N({previewVisible:!0,previewImage:e.url||e.preview,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)})},S=[{key:"1",label:"Basic Information",children:t.jsxDEV("div",{className:"form-container",children:t.jsxDEV("div",{className:"form-wrap",children:t.jsxDEV(n,{layout:"vertical",form:l,className:"form-box",children:[g("Title","title","Please fill in the Title."),L("Description","description","Please fill in the Description.",6),g("Path","path","Please fill in the Path."),K("thumbnail","Thumbnail",z,I,V,!1)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:168,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:167,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:165,columnNumber:23},void 0)},{key:"2",label:"Project Content",children:t.jsxDEV("div",{className:"form-container",children:t.jsxDEV("div",{className:"form-wrap",children:t.jsxDEV(n,{layout:"vertical",form:l,className:"form-box",children:[t.jsxDEV(n.Item,{name:"content",children:t.jsxDEV(B,{className:"para-editor",routeName:`/upload-${d}-images`,setEditorValue:f,editorValue:p},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:193,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:192,columnNumber:25},void 0),t.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:196,columnNumber:25},void 0),t.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:197,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:187,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:186,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:185,columnNumber:23},void 0)}],T=e=>{console.log(e)};return t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{style:{textAlign:"left"},children:[t.jsxDEV("h2",{children:P},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:211,columnNumber:17},void 0),t.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:212,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:210,columnNumber:13},void 0),t.jsxDEV(R,{style:{textAlign:"left"},items:S,defaultActiveKey:["1","2"],onChange:T},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:214,columnNumber:13},void 0),";",t.jsxDEV("div",{className:"form-action-button-container",children:[t.jsxDEV(b,{type:"primary",className:"form-button",onClick:C,children:"Save"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:216,columnNumber:17},void 0),t.jsxDEV(b,{className:"form-button",onClick:()=>m("/project-settings"),children:"Cancel"},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:217,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:215,columnNumber:13},void 0),t.jsxDEV(A,{displayImg:D,setDisplayImg:N},void 0,!1,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:219,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/70080397/Projects/free/admin-lorenza/src/pages/projects/EditProject.tsx",lineNumber:209,columnNumber:9},void 0)};export{Z as default};
