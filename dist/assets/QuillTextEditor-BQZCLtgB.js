var Cc=Object.defineProperty;var _c=(o,t,e)=>t in o?Cc(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var wt=(o,t,e)=>_c(o,typeof t!="symbol"?t+"":t,e);import{Q as _n,k as rs,S as kc,a as Bi,q as ms}from"./index-DEXdndM0.js";var Zl=typeof global=="object"&&global&&global.Object===Object&&global,Lc=typeof self=="object"&&self&&self.Object===Object&&self,pn=Zl||Lc||Function("return this")(),qn=pn.Symbol,Yl=Object.prototype,Sc=Yl.hasOwnProperty,qc=Yl.toString,hi=qn?qn.toStringTag:void 0;function Oc(o){var t=Sc.call(o,hi),e=o[hi];try{o[hi]=void 0;var i=!0}catch{}var c=qc.call(o);return i&&(t?o[hi]=e:delete o[hi]),c}var Rc=Object.prototype,Mc=Rc.toString;function Ic(o){return Mc.call(o)}var jc="[object Null]",Bc="[object Undefined]",Fo=qn?qn.toStringTag:void 0;function ci(o){return o==null?o===void 0?Bc:jc:Fo&&Fo in Object(o)?Oc(o):Ic(o)}function yn(o){return o!=null&&typeof o=="object"}var jn=Array.isArray;function Rn(o){var t=typeof o;return o!=null&&(t=="object"||t=="function")}function Xl(o){return o}var Pc="[object AsyncFunction]",Dc="[object Function]",zc="[object GeneratorFunction]",$c="[object Proxy]";function no(o){if(!Rn(o))return!1;var t=ci(o);return t==Dc||t==zc||t==Pc||t==$c}var bs=pn["__core-js_shared__"],Vo=function(){var o=/[^.]+$/.exec(bs&&bs.keys&&bs.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function Uc(o){return!!Vo&&Vo in o}var Hc=Function.prototype,Fc=Hc.toString;function Pn(o){if(o!=null){try{return Fc.call(o)}catch{}try{return o+""}catch{}}return""}var Vc=/[\\^$.*+?()[\]{}|]/g,Wc=/^\[object .+?Constructor\]$/,Gc=Function.prototype,Kc=Object.prototype,Zc=Gc.toString,Yc=Kc.hasOwnProperty,Xc=RegExp("^"+Zc.call(Yc).replace(Vc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qc(o){if(!Rn(o)||Uc(o))return!1;var t=no(o)?Xc:Wc;return t.test(Pn(o))}function Jc(o,t){return o==null?void 0:o[t]}function Dn(o,t){var e=Jc(o,t);return Qc(e)?e:void 0}var Os=Dn(pn,"WeakMap"),Wo=Object.create,tu=function(){function o(){}return function(t){if(!Rn(t))return{};if(Wo)return Wo(t);o.prototype=t;var e=new o;return o.prototype=void 0,e}}();function eu(o,t,e){switch(e.length){case 0:return o.call(t);case 1:return o.call(t,e[0]);case 2:return o.call(t,e[0],e[1]);case 3:return o.call(t,e[0],e[1],e[2])}return o.apply(t,e)}function Ql(o,t){var e=-1,i=o.length;for(t||(t=Array(i));++e<i;)t[e]=o[e];return t}var ru=800,nu=16,iu=Date.now;function su(o){var t=0,e=0;return function(){var i=iu(),c=nu-(i-e);if(e=i,c>0){if(++t>=ru)return arguments[0]}else t=0;return o.apply(void 0,arguments)}}function ou(o){return function(){return o}}var Qi=function(){try{var o=Dn(Object,"defineProperty");return o({},"",{}),o}catch{}}(),lu=Qi?function(o,t){return Qi(o,"toString",{configurable:!0,enumerable:!1,value:ou(t),writable:!0})}:Xl,au=su(lu);function cu(o,t){for(var e=-1,i=o==null?0:o.length;++e<i&&t(o[e],e,o)!==!1;);return o}var uu=9007199254740991,hu=/^(?:0|[1-9]\d*)$/;function Jl(o,t){var e=typeof o;return t=t??uu,!!t&&(e=="number"||e!="symbol"&&hu.test(o))&&o>-1&&o%1==0&&o<t}function io(o,t,e){t=="__proto__"&&Qi?Qi(o,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):o[t]=e}function _i(o,t){return o===t||o!==o&&t!==t}var du=Object.prototype,fu=du.hasOwnProperty;function ta(o,t,e){var i=o[t];(!(fu.call(o,t)&&_i(i,e))||e===void 0&&!(t in o))&&io(o,t,e)}function ki(o,t,e,i){var c=!e;e||(e={});for(var u=-1,f=t.length;++u<f;){var m=t[u],g=void 0;g===void 0&&(g=o[m]),c?io(e,m,g):ta(e,m,g)}return e}var Go=Math.max;function pu(o,t,e){return t=Go(t===void 0?o.length-1:t,0),function(){for(var i=arguments,c=-1,u=Go(i.length-t,0),f=Array(u);++c<u;)f[c]=i[t+c];c=-1;for(var m=Array(t+1);++c<t;)m[c]=i[c];return m[t]=e(f),eu(o,this,m)}}function gu(o,t){return au(pu(o,t,Xl),o+"")}var mu=9007199254740991;function ea(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=mu}function ns(o){return o!=null&&ea(o.length)&&!no(o)}function bu(o,t,e){if(!Rn(e))return!1;var i=typeof t;return(i=="number"?ns(e)&&Jl(t,e.length):i=="string"&&t in e)?_i(e[t],o):!1}function vu(o){return gu(function(t,e){var i=-1,c=e.length,u=c>1?e[c-1]:void 0,f=c>2?e[2]:void 0;for(u=o.length>3&&typeof u=="function"?(c--,u):void 0,f&&bu(e[0],e[1],f)&&(u=c<3?void 0:u,c=1),t=Object(t);++i<c;){var m=e[i];m&&o(t,m,i,u)}return t})}var yu=Object.prototype;function so(o){var t=o&&o.constructor,e=typeof t=="function"&&t.prototype||yu;return o===e}function wu(o,t){for(var e=-1,i=Array(o);++e<o;)i[e]=t(e);return i}var xu="[object Arguments]";function Ko(o){return yn(o)&&ci(o)==xu}var ra=Object.prototype,Tu=ra.hasOwnProperty,Nu=ra.propertyIsEnumerable,Rs=Ko(function(){return arguments}())?Ko:function(o){return yn(o)&&Tu.call(o,"callee")&&!Nu.call(o,"callee")};function Au(){return!1}var na=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zo=na&&typeof module=="object"&&module&&!module.nodeType&&module,Eu=Zo&&Zo.exports===na,Yo=Eu?pn.Buffer:void 0,Cu=Yo?Yo.isBuffer:void 0,wi=Cu||Au,_u="[object Arguments]",ku="[object Array]",Lu="[object Boolean]",Su="[object Date]",qu="[object Error]",Ou="[object Function]",Ru="[object Map]",Mu="[object Number]",Iu="[object Object]",ju="[object RegExp]",Bu="[object Set]",Pu="[object String]",Du="[object WeakMap]",zu="[object ArrayBuffer]",$u="[object DataView]",Uu="[object Float32Array]",Hu="[object Float64Array]",Fu="[object Int8Array]",Vu="[object Int16Array]",Wu="[object Int32Array]",Gu="[object Uint8Array]",Ku="[object Uint8ClampedArray]",Zu="[object Uint16Array]",Yu="[object Uint32Array]",Ge={};Ge[Uu]=Ge[Hu]=Ge[Fu]=Ge[Vu]=Ge[Wu]=Ge[Gu]=Ge[Ku]=Ge[Zu]=Ge[Yu]=!0;Ge[_u]=Ge[ku]=Ge[zu]=Ge[Lu]=Ge[$u]=Ge[Su]=Ge[qu]=Ge[Ou]=Ge[Ru]=Ge[Mu]=Ge[Iu]=Ge[ju]=Ge[Bu]=Ge[Pu]=Ge[Du]=!1;function Xu(o){return yn(o)&&ea(o.length)&&!!Ge[ci(o)]}function oo(o){return function(t){return o(t)}}var ia=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mi=ia&&typeof module=="object"&&module&&!module.nodeType&&module,Qu=mi&&mi.exports===ia,vs=Qu&&Zl.process,ii=function(){try{var o=mi&&mi.require&&mi.require("util").types;return o||vs&&vs.binding&&vs.binding("util")}catch{}}(),Xo=ii&&ii.isTypedArray,lo=Xo?oo(Xo):Xu,Ju=Object.prototype,th=Ju.hasOwnProperty;function sa(o,t){var e=jn(o),i=!e&&Rs(o),c=!e&&!i&&wi(o),u=!e&&!i&&!c&&lo(o),f=e||i||c||u,m=f?wu(o.length,String):[],g=m.length;for(var y in o)(t||th.call(o,y))&&!(f&&(y=="length"||c&&(y=="offset"||y=="parent")||u&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||Jl(y,g)))&&m.push(y);return m}function oa(o,t){return function(e){return o(t(e))}}var eh=oa(Object.keys,Object),rh=Object.prototype,nh=rh.hasOwnProperty;function ih(o){if(!so(o))return eh(o);var t=[];for(var e in Object(o))nh.call(o,e)&&e!="constructor"&&t.push(e);return t}function ao(o){return ns(o)?sa(o):ih(o)}function sh(o){var t=[];if(o!=null)for(var e in Object(o))t.push(e);return t}var oh=Object.prototype,lh=oh.hasOwnProperty;function ah(o){if(!Rn(o))return sh(o);var t=so(o),e=[];for(var i in o)i=="constructor"&&(t||!lh.call(o,i))||e.push(i);return e}function Li(o){return ns(o)?sa(o,!0):ah(o)}var xi=Dn(Object,"create");function ch(){this.__data__=xi?xi(null):{},this.size=0}function uh(o){var t=this.has(o)&&delete this.__data__[o];return this.size-=t?1:0,t}var hh="__lodash_hash_undefined__",dh=Object.prototype,fh=dh.hasOwnProperty;function ph(o){var t=this.__data__;if(xi){var e=t[o];return e===hh?void 0:e}return fh.call(t,o)?t[o]:void 0}var gh=Object.prototype,mh=gh.hasOwnProperty;function bh(o){var t=this.__data__;return xi?t[o]!==void 0:mh.call(t,o)}var vh="__lodash_hash_undefined__";function yh(o,t){var e=this.__data__;return this.size+=this.has(o)?0:1,e[o]=xi&&t===void 0?vh:t,this}function Bn(o){var t=-1,e=o==null?0:o.length;for(this.clear();++t<e;){var i=o[t];this.set(i[0],i[1])}}Bn.prototype.clear=ch;Bn.prototype.delete=uh;Bn.prototype.get=ph;Bn.prototype.has=bh;Bn.prototype.set=yh;function wh(){this.__data__=[],this.size=0}function is(o,t){for(var e=o.length;e--;)if(_i(o[e][0],t))return e;return-1}var xh=Array.prototype,Th=xh.splice;function Nh(o){var t=this.__data__,e=is(t,o);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():Th.call(t,e,1),--this.size,!0}function Ah(o){var t=this.__data__,e=is(t,o);return e<0?void 0:t[e][1]}function Eh(o){return is(this.__data__,o)>-1}function Ch(o,t){var e=this.__data__,i=is(e,o);return i<0?(++this.size,e.push([o,t])):e[i][1]=t,this}function Tn(o){var t=-1,e=o==null?0:o.length;for(this.clear();++t<e;){var i=o[t];this.set(i[0],i[1])}}Tn.prototype.clear=wh;Tn.prototype.delete=Nh;Tn.prototype.get=Ah;Tn.prototype.has=Eh;Tn.prototype.set=Ch;var Ti=Dn(pn,"Map");function _h(){this.size=0,this.__data__={hash:new Bn,map:new(Ti||Tn),string:new Bn}}function kh(o){var t=typeof o;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?o!=="__proto__":o===null}function ss(o,t){var e=o.__data__;return kh(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Lh(o){var t=ss(this,o).delete(o);return this.size-=t?1:0,t}function Sh(o){return ss(this,o).get(o)}function qh(o){return ss(this,o).has(o)}function Oh(o,t){var e=ss(this,o),i=e.size;return e.set(o,t),this.size+=e.size==i?0:1,this}function zn(o){var t=-1,e=o==null?0:o.length;for(this.clear();++t<e;){var i=o[t];this.set(i[0],i[1])}}zn.prototype.clear=_h;zn.prototype.delete=Lh;zn.prototype.get=Sh;zn.prototype.has=qh;zn.prototype.set=Oh;function la(o,t){for(var e=-1,i=t.length,c=o.length;++e<i;)o[c+e]=t[e];return o}var co=oa(Object.getPrototypeOf,Object),Rh="[object Object]",Mh=Function.prototype,Ih=Object.prototype,aa=Mh.toString,jh=Ih.hasOwnProperty,Bh=aa.call(Object);function Ph(o){if(!yn(o)||ci(o)!=Rh)return!1;var t=co(o);if(t===null)return!0;var e=jh.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&aa.call(e)==Bh}function Dh(){this.__data__=new Tn,this.size=0}function zh(o){var t=this.__data__,e=t.delete(o);return this.size=t.size,e}function $h(o){return this.__data__.get(o)}function Uh(o){return this.__data__.has(o)}var Hh=200;function Fh(o,t){var e=this.__data__;if(e instanceof Tn){var i=e.__data__;if(!Ti||i.length<Hh-1)return i.push([o,t]),this.size=++e.size,this;e=this.__data__=new zn(i)}return e.set(o,t),this.size=e.size,this}function un(o){var t=this.__data__=new Tn(o);this.size=t.size}un.prototype.clear=Dh;un.prototype.delete=zh;un.prototype.get=$h;un.prototype.has=Uh;un.prototype.set=Fh;function Vh(o,t){return o&&ki(t,ao(t),o)}function Wh(o,t){return o&&ki(t,Li(t),o)}var ca=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qo=ca&&typeof module=="object"&&module&&!module.nodeType&&module,Gh=Qo&&Qo.exports===ca,Jo=Gh?pn.Buffer:void 0,tl=Jo?Jo.allocUnsafe:void 0;function ua(o,t){if(t)return o.slice();var e=o.length,i=tl?tl(e):new o.constructor(e);return o.copy(i),i}function Kh(o,t){for(var e=-1,i=o==null?0:o.length,c=0,u=[];++e<i;){var f=o[e];t(f,e,o)&&(u[c++]=f)}return u}function ha(){return[]}var Zh=Object.prototype,Yh=Zh.propertyIsEnumerable,el=Object.getOwnPropertySymbols,uo=el?function(o){return o==null?[]:(o=Object(o),Kh(el(o),function(t){return Yh.call(o,t)}))}:ha;function Xh(o,t){return ki(o,uo(o),t)}var Qh=Object.getOwnPropertySymbols,da=Qh?function(o){for(var t=[];o;)la(t,uo(o)),o=co(o);return t}:ha;function Jh(o,t){return ki(o,da(o),t)}function fa(o,t,e){var i=t(o);return jn(o)?i:la(i,e(o))}function Ms(o){return fa(o,ao,uo)}function td(o){return fa(o,Li,da)}var Is=Dn(pn,"DataView"),js=Dn(pn,"Promise"),Bs=Dn(pn,"Set"),rl="[object Map]",ed="[object Object]",nl="[object Promise]",il="[object Set]",sl="[object WeakMap]",ol="[object DataView]",rd=Pn(Is),nd=Pn(Ti),id=Pn(js),sd=Pn(Bs),od=Pn(Os),Jr=ci;(Is&&Jr(new Is(new ArrayBuffer(1)))!=ol||Ti&&Jr(new Ti)!=rl||js&&Jr(js.resolve())!=nl||Bs&&Jr(new Bs)!=il||Os&&Jr(new Os)!=sl)&&(Jr=function(o){var t=ci(o),e=t==ed?o.constructor:void 0,i=e?Pn(e):"";if(i)switch(i){case rd:return ol;case nd:return rl;case id:return nl;case sd:return il;case od:return sl}return t});var ld=Object.prototype,ad=ld.hasOwnProperty;function cd(o){var t=o.length,e=new o.constructor(t);return t&&typeof o[0]=="string"&&ad.call(o,"index")&&(e.index=o.index,e.input=o.input),e}var Ji=pn.Uint8Array;function ho(o){var t=new o.constructor(o.byteLength);return new Ji(t).set(new Ji(o)),t}function ud(o,t){var e=t?ho(o.buffer):o.buffer;return new o.constructor(e,o.byteOffset,o.byteLength)}var hd=/\w*$/;function dd(o){var t=new o.constructor(o.source,hd.exec(o));return t.lastIndex=o.lastIndex,t}var ll=qn?qn.prototype:void 0,al=ll?ll.valueOf:void 0;function fd(o){return al?Object(al.call(o)):{}}function pa(o,t){var e=t?ho(o.buffer):o.buffer;return new o.constructor(e,o.byteOffset,o.length)}var pd="[object Boolean]",gd="[object Date]",md="[object Map]",bd="[object Number]",vd="[object RegExp]",yd="[object Set]",wd="[object String]",xd="[object Symbol]",Td="[object ArrayBuffer]",Nd="[object DataView]",Ad="[object Float32Array]",Ed="[object Float64Array]",Cd="[object Int8Array]",_d="[object Int16Array]",kd="[object Int32Array]",Ld="[object Uint8Array]",Sd="[object Uint8ClampedArray]",qd="[object Uint16Array]",Od="[object Uint32Array]";function Rd(o,t,e){var i=o.constructor;switch(t){case Td:return ho(o);case pd:case gd:return new i(+o);case Nd:return ud(o,e);case Ad:case Ed:case Cd:case _d:case kd:case Ld:case Sd:case qd:case Od:return pa(o,e);case md:return new i;case bd:case wd:return new i(o);case vd:return dd(o);case yd:return new i;case xd:return fd(o)}}function ga(o){return typeof o.constructor=="function"&&!so(o)?tu(co(o)):{}}var Md="[object Map]";function Id(o){return yn(o)&&Jr(o)==Md}var cl=ii&&ii.isMap,jd=cl?oo(cl):Id,Bd="[object Set]";function Pd(o){return yn(o)&&Jr(o)==Bd}var ul=ii&&ii.isSet,Dd=ul?oo(ul):Pd,zd=1,$d=2,Ud=4,ma="[object Arguments]",Hd="[object Array]",Fd="[object Boolean]",Vd="[object Date]",Wd="[object Error]",ba="[object Function]",Gd="[object GeneratorFunction]",Kd="[object Map]",Zd="[object Number]",va="[object Object]",Yd="[object RegExp]",Xd="[object Set]",Qd="[object String]",Jd="[object Symbol]",tf="[object WeakMap]",ef="[object ArrayBuffer]",rf="[object DataView]",nf="[object Float32Array]",sf="[object Float64Array]",of="[object Int8Array]",lf="[object Int16Array]",af="[object Int32Array]",cf="[object Uint8Array]",uf="[object Uint8ClampedArray]",hf="[object Uint16Array]",df="[object Uint32Array]",Fe={};Fe[ma]=Fe[Hd]=Fe[ef]=Fe[rf]=Fe[Fd]=Fe[Vd]=Fe[nf]=Fe[sf]=Fe[of]=Fe[lf]=Fe[af]=Fe[Kd]=Fe[Zd]=Fe[va]=Fe[Yd]=Fe[Xd]=Fe[Qd]=Fe[Jd]=Fe[cf]=Fe[uf]=Fe[hf]=Fe[df]=!0;Fe[Wd]=Fe[ba]=Fe[tf]=!1;function Ki(o,t,e,i,c,u){var f,m=t&zd,g=t&$d,y=t&Ud;if(f!==void 0)return f;if(!Rn(o))return o;var L=jn(o);if(L){if(f=cd(o),!m)return Ql(o,f)}else{var M=Jr(o),N=M==ba||M==Gd;if(wi(o))return ua(o,m);if(M==va||M==ma||N&&!c){if(f=g||N?{}:ga(o),!m)return g?Jh(o,Wh(f,o)):Xh(o,Vh(f,o))}else{if(!Fe[M])return c?o:{};f=Rd(o,M,m)}}u||(u=new un);var R=u.get(o);if(R)return R;u.set(o,f),Dd(o)?o.forEach(function(B){f.add(Ki(B,t,e,B,o,u))}):jd(o)&&o.forEach(function(B,$){f.set($,Ki(B,t,e,$,o,u))});var _=y?g?td:Ms:g?Li:ao,k=L?void 0:_(o);return cu(k||o,function(B,$){k&&($=B,B=o[$]),ta(f,$,Ki(B,t,e,$,o,u))}),f}var ff=1,pf=4;function ei(o){return Ki(o,ff|pf)}var gf="__lodash_hash_undefined__";function mf(o){return this.__data__.set(o,gf),this}function bf(o){return this.__data__.has(o)}function ts(o){var t=-1,e=o==null?0:o.length;for(this.__data__=new zn;++t<e;)this.add(o[t])}ts.prototype.add=ts.prototype.push=mf;ts.prototype.has=bf;function vf(o,t){for(var e=-1,i=o==null?0:o.length;++e<i;)if(t(o[e],e,o))return!0;return!1}function yf(o,t){return o.has(t)}var wf=1,xf=2;function ya(o,t,e,i,c,u){var f=e&wf,m=o.length,g=t.length;if(m!=g&&!(f&&g>m))return!1;var y=u.get(o),L=u.get(t);if(y&&L)return y==t&&L==o;var M=-1,N=!0,R=e&xf?new ts:void 0;for(u.set(o,t),u.set(t,o);++M<m;){var _=o[M],k=t[M];if(i)var B=f?i(k,_,M,t,o,u):i(_,k,M,o,t,u);if(B!==void 0){if(B)continue;N=!1;break}if(R){if(!vf(t,function($,D){if(!yf(R,D)&&(_===$||c(_,$,e,i,u)))return R.push(D)})){N=!1;break}}else if(!(_===k||c(_,k,e,i,u))){N=!1;break}}return u.delete(o),u.delete(t),N}function Tf(o){var t=-1,e=Array(o.size);return o.forEach(function(i,c){e[++t]=[c,i]}),e}function Nf(o){var t=-1,e=Array(o.size);return o.forEach(function(i){e[++t]=i}),e}var Af=1,Ef=2,Cf="[object Boolean]",_f="[object Date]",kf="[object Error]",Lf="[object Map]",Sf="[object Number]",qf="[object RegExp]",Of="[object Set]",Rf="[object String]",Mf="[object Symbol]",If="[object ArrayBuffer]",jf="[object DataView]",hl=qn?qn.prototype:void 0,ys=hl?hl.valueOf:void 0;function Bf(o,t,e,i,c,u,f){switch(e){case jf:if(o.byteLength!=t.byteLength||o.byteOffset!=t.byteOffset)return!1;o=o.buffer,t=t.buffer;case If:return!(o.byteLength!=t.byteLength||!u(new Ji(o),new Ji(t)));case Cf:case _f:case Sf:return _i(+o,+t);case kf:return o.name==t.name&&o.message==t.message;case qf:case Rf:return o==t+"";case Lf:var m=Tf;case Of:var g=i&Af;if(m||(m=Nf),o.size!=t.size&&!g)return!1;var y=f.get(o);if(y)return y==t;i|=Ef,f.set(o,t);var L=ya(m(o),m(t),i,c,u,f);return f.delete(o),L;case Mf:if(ys)return ys.call(o)==ys.call(t)}return!1}var Pf=1,Df=Object.prototype,zf=Df.hasOwnProperty;function $f(o,t,e,i,c,u){var f=e&Pf,m=Ms(o),g=m.length,y=Ms(t),L=y.length;if(g!=L&&!f)return!1;for(var M=g;M--;){var N=m[M];if(!(f?N in t:zf.call(t,N)))return!1}var R=u.get(o),_=u.get(t);if(R&&_)return R==t&&_==o;var k=!0;u.set(o,t),u.set(t,o);for(var B=f;++M<g;){N=m[M];var $=o[N],D=t[N];if(i)var et=f?i(D,$,N,t,o,u):i($,D,N,o,t,u);if(!(et===void 0?$===D||c($,D,e,i,u):et)){k=!1;break}B||(B=N=="constructor")}if(k&&!B){var U=o.constructor,F=t.constructor;U!=F&&"constructor"in o&&"constructor"in t&&!(typeof U=="function"&&U instanceof U&&typeof F=="function"&&F instanceof F)&&(k=!1)}return u.delete(o),u.delete(t),k}var Uf=1,dl="[object Arguments]",fl="[object Array]",Pi="[object Object]",Hf=Object.prototype,pl=Hf.hasOwnProperty;function Ff(o,t,e,i,c,u){var f=jn(o),m=jn(t),g=f?fl:Jr(o),y=m?fl:Jr(t);g=g==dl?Pi:g,y=y==dl?Pi:y;var L=g==Pi,M=y==Pi,N=g==y;if(N&&wi(o)){if(!wi(t))return!1;f=!0,L=!1}if(N&&!L)return u||(u=new un),f||lo(o)?ya(o,t,e,i,c,u):Bf(o,t,g,e,i,c,u);if(!(e&Uf)){var R=L&&pl.call(o,"__wrapped__"),_=M&&pl.call(t,"__wrapped__");if(R||_){var k=R?o.value():o,B=_?t.value():t;return u||(u=new un),c(k,B,e,i,u)}}return N?(u||(u=new un),$f(o,t,e,i,c,u)):!1}function wa(o,t,e,i,c){return o===t?!0:o==null||t==null||!yn(o)&&!yn(t)?o!==o&&t!==t:Ff(o,t,e,i,wa,c)}function Vf(o){return function(t,e,i){for(var c=-1,u=Object(t),f=i(t),m=f.length;m--;){var g=f[++c];if(e(u[g],g,u)===!1)break}return t}}var Wf=Vf();function Ps(o,t,e){(e!==void 0&&!_i(o[t],e)||e===void 0&&!(t in o))&&io(o,t,e)}function Gf(o){return yn(o)&&ns(o)}function Ds(o,t){if(!(t==="constructor"&&typeof o[t]=="function")&&t!="__proto__")return o[t]}function Kf(o){return ki(o,Li(o))}function Zf(o,t,e,i,c,u,f){var m=Ds(o,e),g=Ds(t,e),y=f.get(g);if(y){Ps(o,e,y);return}var L=u?u(m,g,e+"",o,t,f):void 0,M=L===void 0;if(M){var N=jn(g),R=!N&&wi(g),_=!N&&!R&&lo(g);L=g,N||R||_?jn(m)?L=m:Gf(m)?L=Ql(m):R?(M=!1,L=ua(g,!0)):_?(M=!1,L=pa(g,!0)):L=[]:Ph(g)||Rs(g)?(L=m,Rs(m)?L=Kf(m):(!Rn(m)||no(m))&&(L=ga(g))):M=!1}M&&(f.set(g,L),c(L,g,i,u,f),f.delete(g)),Ps(o,e,L)}function xa(o,t,e,i,c){o!==t&&Wf(t,function(u,f){if(c||(c=new un),Rn(u))Zf(o,t,f,e,xa,i,c);else{var m=i?i(Ds(o,f),u,f+"",o,t,c):void 0;m===void 0&&(m=u),Ps(o,f,m)}},Li)}function fo(o,t){return wa(o,t)}var Sn=vu(function(o,t,e){xa(o,t,e)}),Bt=(o=>(o[o.TYPE=3]="TYPE",o[o.LEVEL=12]="LEVEL",o[o.ATTRIBUTE=13]="ATTRIBUTE",o[o.BLOT=14]="BLOT",o[o.INLINE=7]="INLINE",o[o.BLOCK=11]="BLOCK",o[o.BLOCK_BLOT=10]="BLOCK_BLOT",o[o.INLINE_BLOT=6]="INLINE_BLOT",o[o.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",o[o.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",o[o.ANY=15]="ANY",o))(Bt||{});class dn{constructor(t,e,i={}){this.attrName=t,this.keyName=e;const c=Bt.TYPE&Bt.ATTRIBUTE;this.scope=i.scope!=null?i.scope&Bt.LEVEL|c:Bt.ATTRIBUTE,i.whitelist!=null&&(this.whitelist=i.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class ri extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const Ta=class zs{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let i=null;try{i=t.parentNode}catch{return null}return this.find(i,e)}return null}create(t,e,i){const c=this.query(e);if(c==null)throw new ri(`Unable to create ${e} blot`);const u=c,f=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:u.create(i),m=new u(t,f,i);return zs.blots.set(m.domNode,m),m}find(t,e=!1){return zs.find(t,e)}query(t,e=Bt.ANY){let i;return typeof t=="string"?i=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?i=this.types.text:typeof t=="number"?t&Bt.LEVEL&Bt.BLOCK?i=this.types.block:t&Bt.LEVEL&Bt.INLINE&&(i=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(c=>(i=this.classes[c],!!i)),i=i||this.tags[t.tagName]),i==null?null:"scope"in i&&e&Bt.LEVEL&i.scope&&e&Bt.TYPE&i.scope?i:null}register(...t){return t.map(e=>{const i="blotName"in e,c="attrName"in e;if(!i&&!c)throw new ri("Invalid definition");if(i&&e.blotName==="abstract")throw new ri("Cannot register abstract class");const u=i?e.blotName:c?e.attrName:void 0;return this.types[u]=e,c?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):i&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(f=>f.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(f=>{(this.tags[f]==null||e.className==null)&&(this.tags[f]=e)}))),e})}};Ta.blots=new WeakMap;let si=Ta;function gl(o,t){return(o.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}class Yf extends dn{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){gl(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const e=(gl(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const nn=Yf;function ws(o){const t=o.split("-"),e=t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("");return t[0]+e}class Xf extends dn{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[ws(this.keyName)]=e,!0):!1}remove(t){t.style[ws(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[ws(this.keyName)];return this.canAdd(t,e)?e:""}}const Mn=Xf;class Qf{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=si.find(this.domNode);if(t==null)return;const e=dn.keys(this.domNode),i=nn.keys(this.domNode),c=Mn.keys(this.domNode);e.concat(i).concat(c).forEach(u=>{const f=t.scroll.query(u,Bt.ATTRIBUTE);f instanceof dn&&(this.attributes[f.attrName]=f)})}copy(t){Object.keys(this.attributes).forEach(e=>{const i=this.attributes[e].value(this.domNode);t.format(e,i)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const os=Qf,Na=class{constructor(t,e){this.scroll=t,this.domNode=e,si.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new ri("Blot definition missing tagName");let e,i;return Array.isArray(this.tagName)?(typeof t=="string"?(i=t.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):typeof t=="number"&&(i=t),typeof i=="number"?e=document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?e=document.createElement(i):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),si.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,i,c){const u=this.isolate(t,e);if(this.scroll.query(i,Bt.BLOT)!=null&&c)u.wrap(i,c);else if(this.scroll.query(i,Bt.ATTRIBUTE)!=null){const f=this.scroll.create(this.statics.scope);u.wrap(f),f.format(i,c)}}insertAt(t,e,i){const c=i==null?this.scroll.create("text",e):this.scroll.create(e,i),u=this.split(t);this.parent.insertBefore(c,u||void 0)}isolate(t,e){const i=this.split(t);if(i==null)throw new Error("Attempt to isolate at end");return i.split(e),i}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const i=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){const i=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(i,this.next||void 0),typeof i.appendChild!="function")throw new ri(`Cannot wrap ${t}`);return i.appendChild(this),i}};Na.blotName="abstract";let Aa=Na;const Ea=class extends Aa{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Ea.scope=Bt.INLINE_BLOT;let Jf=Ea;const Cr=Jf;class tp{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let i=e();for(;i&&t>0;)t-=1,i=e();return i}contains(t){const e=this.iterator();let i=e();for(;i;){if(i===t)return!0;i=e()}return!1}indexOf(t){const e=this.iterator();let i=e(),c=0;for(;i;){if(i===t)return c;c+=1,i=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,i=this.head;for(;i!=null;){if(i===t)return e;e+=i.length(),i=i.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){const i=this.iterator();let c=i();for(;c;){const u=c.length();if(t<u||e&&t===u&&(c.next==null||c.next.length()!==0))return[c,t];t-=u,c=i()}return[null,0]}forEach(t){const e=this.iterator();let i=e();for(;i;)t(i),i=e()}forEachAt(t,e,i){if(e<=0)return;const[c,u]=this.find(t);let f=t-u;const m=this.iterator(c);let g=m();for(;g&&f<t+e;){const y=g.length();t>f?i(g,t-f,Math.min(e,f+y-t)):i(g,0,Math.min(y,t+e-f)),f+=y,g=m()}}map(t){return this.reduce((e,i)=>(e.push(t(i)),e),[])}reduce(t,e){const i=this.iterator();let c=i();for(;c;)e=t(e,c),c=i();return e}}function ml(o,t){const e=t.find(o);if(e)return e;try{return t.create(o)}catch{const i=t.create(Bt.INLINE);return Array.from(o.childNodes).forEach(c=>{i.domNode.appendChild(c)}),o.parentNode&&o.parentNode.replaceChild(i.domNode,o),i.attach(),i}}const Ca=class En extends Aa{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,En.uiClass&&this.uiNode.classList.add(En.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new tp,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=ml(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof ri)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(i,c,u)=>{i.deleteAt(c,u)})}descendant(t,e=0){const[i,c]=this.children.find(e);return t.blotName==null&&t(i)||t.blotName!=null&&i instanceof t?[i,c]:i instanceof En?i.descendant(t,c):[null,-1]}descendants(t,e=0,i=Number.MAX_VALUE){let c=[],u=i;return this.children.forEachAt(e,i,(f,m,g)=>{(t.blotName==null&&t(f)||t.blotName!=null&&f instanceof t)&&c.push(f),f instanceof En&&(c=c.concat(f.descendants(t,m,u))),u-=g}),c}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(i=>e instanceof i)||(e.statics.scope===Bt.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof En?e.unwrap():e.remove())})}formatAt(t,e,i,c){this.children.forEachAt(t,e,(u,f,m)=>{u.formatAt(f,m,i,c)})}insertAt(t,e,i){const[c,u]=this.children.find(t);if(c)c.insertAt(u,e,i);else{const f=i==null?this.scroll.create("text",e):this.scroll.create(e,i);this.appendChild(f)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let i=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(i=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(t.domNode,i),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(i=>{t.insertBefore(i,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[i,c]=this.children.find(t,e),u=[[this,t]];return i instanceof En?u.concat(i.path(c,e)):(i!=null&&u.push([i,c]),u)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const i=typeof t=="string"?this.scroll.create(t,e):t;return i instanceof En&&this.moveChildren(i),super.replaceWith(i)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(t,this.length(),(c,u,f)=>{const m=c.split(u,e);m!=null&&i.appendChild(m)}),i}splitAfter(t){const e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const i=[],c=[];t.forEach(u=>{u.target===this.domNode&&u.type==="childList"&&(i.push(...u.addedNodes),c.push(...u.removedNodes))}),c.forEach(u=>{if(u.parentNode!=null&&u.tagName!=="IFRAME"&&document.body.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const f=this.scroll.find(u);f!=null&&(f.domNode.parentNode==null||f.domNode.parentNode===this.domNode)&&f.detach()}),i.filter(u=>u.parentNode===this.domNode&&u!==this.uiNode).sort((u,f)=>u===f?0:u.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(u=>{let f=null;u.nextSibling!=null&&(f=this.scroll.find(u.nextSibling));const m=ml(u,this.scroll);(m.next!==f||m.next==null)&&(m.parent!=null&&m.parent.removeChild(this),this.insertBefore(m,f||void 0))}),this.enforceAllowedChildren()}};Ca.uiClass="";let ep=Ca;const en=ep;function rp(o,t){if(Object.keys(o).length!==Object.keys(t).length)return!1;for(const e in o)if(o[e]!==t[e])return!1;return!0}const Kn=class Zn extends en{static create(t){return super.create(t)}static formats(t,e){const i=e.query(Zn.blotName);if(!(i!=null&&t.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new os(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(i=>{i instanceof Zn||(i=i.wrap(Zn.blotName,!0)),this.attributes.copy(i)}),this.unwrap();else{const i=this.scroll.query(t,Bt.INLINE);if(i==null)return;i instanceof dn?this.attributes.attribute(i,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,c){this.formats()[i]!=null||this.scroll.query(i,Bt.ATTRIBUTE)?this.isolate(t,e).format(i,c):super.formatAt(t,e,i,c)}optimize(t){super.optimize(t);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const i=this.next;i instanceof Zn&&i.prev===this&&rp(e,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(t,e){const i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}wrap(t,e){const i=super.wrap(t,e);return i instanceof Zn&&this.attributes.move(i),i}};Kn.allowedChildren=[Kn,Cr],Kn.blotName="inline",Kn.scope=Bt.INLINE_BLOT,Kn.tagName="SPAN";let np=Kn;const po=np,Yn=class $s extends en{static create(t){return super.create(t)}static formats(t,e){const i=e.query($s.blotName);if(!(i!=null&&t.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new os(this.domNode)}format(t,e){const i=this.scroll.query(t,Bt.BLOCK);i!=null&&(i instanceof dn?this.attributes.attribute(i,e):t===this.statics.blotName&&!e?this.replaceWith($s.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,c){this.scroll.query(i,Bt.BLOCK)!=null?this.format(i,c):super.formatAt(t,e,i,c)}insertAt(t,e,i){if(i==null||this.scroll.query(e,Bt.INLINE)!=null)super.insertAt(t,e,i);else{const c=this.split(t);if(c!=null){const u=this.scroll.create(e,i);c.parent.insertBefore(u,c)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){const i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}};Yn.blotName="block",Yn.scope=Bt.BLOCK_BLOT,Yn.tagName="P",Yn.allowedChildren=[po,Yn,Cr];let ip=Yn;const Ni=ip,Us=class extends en{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,i,c){super.formatAt(t,e,i,c),this.enforceAllowedChildren()}insertAt(t,e,i){super.insertAt(t,e,i),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Us.blotName="container",Us.scope=Bt.BLOCK_BLOT;let sp=Us;const ls=sp;class op extends Cr{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,i,c){t===0&&e===this.length()?this.format(i,c):super.formatAt(t,e,i,c)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const jr=op,lp={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},ap=100,Xn=class extends en{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(i=>{this.update(i)}),this.observer.observe(this.domNode,lp),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const i=this.registry.find(t,e);return i?i.scroll===this?i:e?this.find(i.scroll.domNode.parentNode,!0):null:null}query(t,e=Bt.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(i=>{i.remove()}):super.deleteAt(t,e)}formatAt(t,e,i,c){this.update(),super.formatAt(t,e,i,c)}insertAt(t,e,i){this.update(),super.insertAt(t,e,i)}optimize(t=[],e={}){super.optimize(e);const i=e.mutationsMap||new WeakMap;let c=Array.from(this.observer.takeRecords());for(;c.length>0;)t.push(c.pop());const u=(g,y=!0)=>{g==null||g===this||g.domNode.parentNode!=null&&(i.has(g.domNode)||i.set(g.domNode,[]),y&&u(g.parent))},f=g=>{i.has(g.domNode)&&(g instanceof en&&g.children.forEach(f),i.delete(g.domNode),g.optimize(e))};let m=t;for(let g=0;m.length>0;g+=1){if(g>=ap)throw new Error("[Parchment] Maximum optimize iterations reached");for(m.forEach(y=>{const L=this.find(y.target,!0);L!=null&&(L.domNode===y.target&&(y.type==="childList"?(u(this.find(y.previousSibling,!1)),Array.from(y.addedNodes).forEach(M=>{const N=this.find(M,!1);u(N,!1),N instanceof en&&N.children.forEach(R=>{u(R,!1)})})):y.type==="attributes"&&u(L.prev)),u(L))}),this.children.forEach(f),m=Array.from(this.observer.takeRecords()),c=m.slice();c.length>0;)t.push(c.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const i=new WeakMap;t.map(c=>{const u=this.find(c.target,!0);return u==null?null:i.has(u.domNode)?(i.get(u.domNode).push(c),null):(i.set(u.domNode,[c]),u)}).forEach(c=>{c!=null&&c!==this&&i.has(c.domNode)&&c.update(i.get(c.domNode)||[],e)}),e.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),e),this.optimize(t,e)}};Xn.blotName="scroll",Xn.defaultChild=Ni,Xn.allowedChildren=[Ni,ls],Xn.scope=Bt.BLOCK_BLOT,Xn.tagName="DIV";let cp=Xn;const go=cp,Hs=class _a extends Cr{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,i){i==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,i)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof _a&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const i=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(t,e){t.some(i=>i.type==="characterData"&&i.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Hs.blotName="text",Hs.scope=Bt.INLINE_BLOT;let up=Hs;const es=up,ka=Object.freeze(Object.defineProperty({__proto__:null,Attributor:dn,AttributorStore:os,BlockBlot:Ni,ClassAttributor:nn,ContainerBlot:ls,EmbedBlot:jr,InlineBlot:po,LeafBlot:Cr,ParentBlot:en,Registry:si,Scope:Bt,ScrollBlot:go,StyleAttributor:Mn,TextBlot:es},Symbol.toStringTag,{value:"Module"}));var Di={exports:{}},xs,bl;function hp(){if(bl)return xs;bl=1;var o=-1,t=1,e=0;function i(C,E,q,Z,j){if(C===E)return C?[[e,C]]:[];if(q!=null){var H=yt(C,E,q);if(H)return H}var X=m(C,E),J=C.substring(0,X);C=C.substring(X),E=E.substring(X),X=y(C,E);var ot=C.substring(C.length-X);C=C.substring(0,C.length-X),E=E.substring(0,E.length-X);var st=c(C,E);return J&&st.unshift([e,J]),ot&&st.push([e,ot]),D(st,j),Z&&M(st),st}function c(C,E){var q;if(!C)return[[t,E]];if(!E)return[[o,C]];var Z=C.length>E.length?C:E,j=C.length>E.length?E:C,H=Z.indexOf(j);if(H!==-1)return q=[[t,Z.substring(0,H)],[e,j],[t,Z.substring(H+j.length)]],C.length>E.length&&(q[0][0]=q[2][0]=o),q;if(j.length===1)return[[o,C],[t,E]];var X=L(C,E);if(X){var J=X[0],ot=X[1],st=X[2],dt=X[3],Q=X[4],ut=i(J,st),rt=i(ot,dt);return ut.concat([[e,Q]],rt)}return u(C,E)}function u(C,E){for(var q=C.length,Z=E.length,j=Math.ceil((q+Z)/2),H=j,X=2*j,J=new Array(X),ot=new Array(X),st=0;st<X;st++)J[st]=-1,ot[st]=-1;J[H+1]=0,ot[H+1]=0;for(var dt=q-Z,Q=dt%2!==0,ut=0,rt=0,ft=0,Ot=0,pt=0;pt<j;pt++){for(var at=-pt+ut;at<=pt-rt;at+=2){var Rt=H+at,Ut;at===-pt||at!==pt&&J[Rt-1]<J[Rt+1]?Ut=J[Rt+1]:Ut=J[Rt-1]+1;for(var Pt=Ut-at;Ut<q&&Pt<Z&&C.charAt(Ut)===E.charAt(Pt);)Ut++,Pt++;if(J[Rt]=Ut,Ut>q)rt+=2;else if(Pt>Z)ut+=2;else if(Q){var Ft=H+dt-at;if(Ft>=0&&Ft<X&&ot[Ft]!==-1){var Ht=q-ot[Ft];if(Ut>=Ht)return f(C,E,Ut,Pt)}}}for(var xt=-pt+ft;xt<=pt-Ot;xt+=2){var Ft=H+xt,Ht;xt===-pt||xt!==pt&&ot[Ft-1]<ot[Ft+1]?Ht=ot[Ft+1]:Ht=ot[Ft-1]+1;for(var vt=Ht-xt;Ht<q&&vt<Z&&C.charAt(q-Ht-1)===E.charAt(Z-vt-1);)Ht++,vt++;if(ot[Ft]=Ht,Ht>q)Ot+=2;else if(vt>Z)ft+=2;else if(!Q){var Rt=H+dt-xt;if(Rt>=0&&Rt<X&&J[Rt]!==-1){var Ut=J[Rt],Pt=H+Ut-Rt;if(Ht=q-Ht,Ut>=Ht)return f(C,E,Ut,Pt)}}}}return[[o,C],[t,E]]}function f(C,E,q,Z){var j=C.substring(0,q),H=E.substring(0,Z),X=C.substring(q),J=E.substring(Z),ot=i(j,H),st=i(X,J);return ot.concat(st)}function m(C,E){if(!C||!E||C.charAt(0)!==E.charAt(0))return 0;for(var q=0,Z=Math.min(C.length,E.length),j=Z,H=0;q<j;)C.substring(H,j)==E.substring(H,j)?(q=j,H=q):Z=j,j=Math.floor((Z-q)/2+q);return et(C.charCodeAt(j-1))&&j--,j}function g(C,E){var q=C.length,Z=E.length;if(q==0||Z==0)return 0;q>Z?C=C.substring(q-Z):q<Z&&(E=E.substring(0,q));var j=Math.min(q,Z);if(C==E)return j;for(var H=0,X=1;;){var J=C.substring(j-X),ot=E.indexOf(J);if(ot==-1)return H;X+=ot,(ot==0||C.substring(j-X)==E.substring(0,X))&&(H=X,X++)}}function y(C,E){if(!C||!E||C.slice(-1)!==E.slice(-1))return 0;for(var q=0,Z=Math.min(C.length,E.length),j=Z,H=0;q<j;)C.substring(C.length-j,C.length-H)==E.substring(E.length-j,E.length-H)?(q=j,H=q):Z=j,j=Math.floor((Z-q)/2+q);return U(C.charCodeAt(C.length-j))&&j--,j}function L(C,E){var q=C.length>E.length?C:E,Z=C.length>E.length?E:C;if(q.length<4||Z.length*2<q.length)return null;function j(rt,ft,Ot){for(var pt=rt.substring(Ot,Ot+Math.floor(rt.length/4)),at=-1,Rt="",Ut,Pt,Ft,Ht;(at=ft.indexOf(pt,at+1))!==-1;){var xt=m(rt.substring(Ot),ft.substring(at)),vt=y(rt.substring(0,Ot),ft.substring(0,at));Rt.length<vt+xt&&(Rt=ft.substring(at-vt,at)+ft.substring(at,at+xt),Ut=rt.substring(0,Ot-vt),Pt=rt.substring(Ot+xt),Ft=ft.substring(0,at-vt),Ht=ft.substring(at+xt))}return Rt.length*2>=rt.length?[Ut,Pt,Ft,Ht,Rt]:null}var H=j(q,Z,Math.ceil(q.length/4)),X=j(q,Z,Math.ceil(q.length/2)),J;if(!H&&!X)return null;X?H?J=H[4].length>X[4].length?H:X:J=X:J=H;var ot,st,dt,Q;C.length>E.length?(ot=J[0],st=J[1],dt=J[2],Q=J[3]):(dt=J[0],Q=J[1],ot=J[2],st=J[3]);var ut=J[4];return[ot,st,dt,Q,ut]}function M(C){for(var E=!1,q=[],Z=0,j=null,H=0,X=0,J=0,ot=0,st=0;H<C.length;)C[H][0]==e?(q[Z++]=H,X=ot,J=st,ot=0,st=0,j=C[H][1]):(C[H][0]==t?ot+=C[H][1].length:st+=C[H][1].length,j&&j.length<=Math.max(X,J)&&j.length<=Math.max(ot,st)&&(C.splice(q[Z-1],0,[o,j]),C[q[Z-1]+1][0]=t,Z--,Z--,H=Z>0?q[Z-1]:-1,X=0,J=0,ot=0,st=0,j=null,E=!0)),H++;for(E&&D(C),$(C),H=1;H<C.length;){if(C[H-1][0]==o&&C[H][0]==t){var dt=C[H-1][1],Q=C[H][1],ut=g(dt,Q),rt=g(Q,dt);ut>=rt?(ut>=dt.length/2||ut>=Q.length/2)&&(C.splice(H,0,[e,Q.substring(0,ut)]),C[H-1][1]=dt.substring(0,dt.length-ut),C[H+1][1]=Q.substring(ut),H++):(rt>=dt.length/2||rt>=Q.length/2)&&(C.splice(H,0,[e,dt.substring(0,rt)]),C[H-1][0]=t,C[H-1][1]=Q.substring(0,Q.length-rt),C[H+1][0]=o,C[H+1][1]=dt.substring(rt),H++),H++}H++}}var N=/[^a-zA-Z0-9]/,R=/\s/,_=/[\r\n]/,k=/\n\r?\n$/,B=/^\r?\n\r?\n/;function $(C){function E(rt,ft){if(!rt||!ft)return 6;var Ot=rt.charAt(rt.length-1),pt=ft.charAt(0),at=Ot.match(N),Rt=pt.match(N),Ut=at&&Ot.match(R),Pt=Rt&&pt.match(R),Ft=Ut&&Ot.match(_),Ht=Pt&&pt.match(_),xt=Ft&&rt.match(k),vt=Ht&&ft.match(B);return xt||vt?5:Ft||Ht?4:at&&!Ut&&Pt?3:Ut||Pt?2:at||Rt?1:0}for(var q=1;q<C.length-1;){if(C[q-1][0]==e&&C[q+1][0]==e){var Z=C[q-1][1],j=C[q][1],H=C[q+1][1],X=y(Z,j);if(X){var J=j.substring(j.length-X);Z=Z.substring(0,Z.length-X),j=J+j.substring(0,j.length-X),H=J+H}for(var ot=Z,st=j,dt=H,Q=E(Z,j)+E(j,H);j.charAt(0)===H.charAt(0);){Z+=j.charAt(0),j=j.substring(1)+H.charAt(0),H=H.substring(1);var ut=E(Z,j)+E(j,H);ut>=Q&&(Q=ut,ot=Z,st=j,dt=H)}C[q-1][1]!=ot&&(ot?C[q-1][1]=ot:(C.splice(q-1,1),q--),C[q][1]=st,dt?C[q+1][1]=dt:(C.splice(q+1,1),q--))}q++}}function D(C,E){C.push([e,""]);for(var q=0,Z=0,j=0,H="",X="",J;q<C.length;){if(q<C.length-1&&!C[q][1]){C.splice(q,1);continue}switch(C[q][0]){case t:j++,X+=C[q][1],q++;break;case o:Z++,H+=C[q][1],q++;break;case e:var ot=q-j-Z-1;if(E){if(ot>=0&&K(C[ot][1])){var st=C[ot][1].slice(-1);if(C[ot][1]=C[ot][1].slice(0,-1),H=st+H,X=st+X,!C[ot][1]){C.splice(ot,1),q--;var dt=ot-1;C[dt]&&C[dt][0]===t&&(j++,X=C[dt][1]+X,dt--),C[dt]&&C[dt][0]===o&&(Z++,H=C[dt][1]+H,dt--),ot=dt}}if(F(C[q][1])){var st=C[q][1].charAt(0);C[q][1]=C[q][1].slice(1),H+=st,X+=st}}if(q<C.length-1&&!C[q][1]){C.splice(q,1);break}if(H.length>0||X.length>0){H.length>0&&X.length>0&&(J=m(X,H),J!==0&&(ot>=0?C[ot][1]+=X.substring(0,J):(C.splice(0,0,[e,X.substring(0,J)]),q++),X=X.substring(J),H=H.substring(J)),J=y(X,H),J!==0&&(C[q][1]=X.substring(X.length-J)+C[q][1],X=X.substring(0,X.length-J),H=H.substring(0,H.length-J)));var Q=j+Z;H.length===0&&X.length===0?(C.splice(q-Q,Q),q=q-Q):H.length===0?(C.splice(q-Q,Q,[t,X]),q=q-Q+1):X.length===0?(C.splice(q-Q,Q,[o,H]),q=q-Q+1):(C.splice(q-Q,Q,[o,H],[t,X]),q=q-Q+2)}q!==0&&C[q-1][0]===e?(C[q-1][1]+=C[q][1],C.splice(q,1)):q++,j=0,Z=0,H="",X="";break}}C[C.length-1][1]===""&&C.pop();var ut=!1;for(q=1;q<C.length-1;)C[q-1][0]===e&&C[q+1][0]===e&&(C[q][1].substring(C[q][1].length-C[q-1][1].length)===C[q-1][1]?(C[q][1]=C[q-1][1]+C[q][1].substring(0,C[q][1].length-C[q-1][1].length),C[q+1][1]=C[q-1][1]+C[q+1][1],C.splice(q-1,1),ut=!0):C[q][1].substring(0,C[q+1][1].length)==C[q+1][1]&&(C[q-1][1]+=C[q+1][1],C[q][1]=C[q][1].substring(C[q+1][1].length)+C[q+1][1],C.splice(q+1,1),ut=!0)),q++;ut&&D(C,E)}function et(C){return C>=55296&&C<=56319}function U(C){return C>=56320&&C<=57343}function F(C){return U(C.charCodeAt(0))}function K(C){return et(C.charCodeAt(C.length-1))}function lt(C){for(var E=[],q=0;q<C.length;q++)C[q][1].length>0&&E.push(C[q]);return E}function Nt(C,E,q,Z){return K(C)||F(Z)?null:lt([[e,C],[o,E],[t,q],[e,Z]])}function yt(C,E,q){var Z=typeof q=="number"?{index:q,length:0}:q.oldRange,j=typeof q=="number"?null:q.newRange,H=C.length,X=E.length;if(Z.length===0&&(j===null||j.length===0)){var J=Z.index,ot=C.slice(0,J),st=C.slice(J),dt=j?j.index:null;t:{var Q=J+X-H;if(dt!==null&&dt!==Q||Q<0||Q>X)break t;var ut=E.slice(0,Q),rt=E.slice(Q);if(rt!==st)break t;var ft=Math.min(J,Q),Ot=ot.slice(0,ft),pt=ut.slice(0,ft);if(Ot!==pt)break t;var at=ot.slice(ft),Rt=ut.slice(ft);return Nt(Ot,at,Rt,st)}t:{if(dt!==null&&dt!==J)break t;var Ut=J,ut=E.slice(0,Ut),rt=E.slice(Ut);if(ut!==ot)break t;var Pt=Math.min(H-Ut,X-Ut),Ft=st.slice(st.length-Pt),Ht=rt.slice(rt.length-Pt);if(Ft!==Ht)break t;var at=st.slice(0,st.length-Pt),Rt=rt.slice(0,rt.length-Pt);return Nt(ot,at,Rt,Ft)}}if(Z.length>0&&j&&j.length===0)t:{var Ot=C.slice(0,Z.index),Ft=C.slice(Z.index+Z.length),ft=Ot.length,Pt=Ft.length;if(X<ft+Pt)break t;var pt=E.slice(0,ft),Ht=E.slice(X-Pt);if(Ot!==pt||Ft!==Ht)break t;var at=C.slice(ft,H-Pt),Rt=E.slice(ft,X-Pt);return Nt(Ot,at,Rt,Ft)}return null}function zt(C,E,q,Z){return i(C,E,q,Z,!0)}return zt.INSERT=t,zt.DELETE=o,zt.EQUAL=e,xs=zt,xs}var fi={exports:{}};fi.exports;var vl;function La(){return vl||(vl=1,function(o,t){var e=200,i="__lodash_hash_undefined__",c=9007199254740991,u="[object Arguments]",f="[object Array]",m="[object Boolean]",g="[object Date]",y="[object Error]",L="[object Function]",M="[object GeneratorFunction]",N="[object Map]",R="[object Number]",_="[object Object]",k="[object Promise]",B="[object RegExp]",$="[object Set]",D="[object String]",et="[object Symbol]",U="[object WeakMap]",F="[object ArrayBuffer]",K="[object DataView]",lt="[object Float32Array]",Nt="[object Float64Array]",yt="[object Int8Array]",zt="[object Int16Array]",C="[object Int32Array]",E="[object Uint8Array]",q="[object Uint8ClampedArray]",Z="[object Uint16Array]",j="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,X=/\w*$/,J=/^\[object .+?Constructor\]$/,ot=/^(?:0|[1-9]\d*)$/,st={};st[u]=st[f]=st[F]=st[K]=st[m]=st[g]=st[lt]=st[Nt]=st[yt]=st[zt]=st[C]=st[N]=st[R]=st[_]=st[B]=st[$]=st[D]=st[et]=st[E]=st[q]=st[Z]=st[j]=!0,st[y]=st[L]=st[U]=!1;var dt=typeof _n=="object"&&_n&&_n.Object===Object&&_n,Q=typeof self=="object"&&self&&self.Object===Object&&self,ut=dt||Q||Function("return this")(),rt=t&&!t.nodeType&&t,ft=rt&&!0&&o&&!o.nodeType&&o,Ot=ft&&ft.exports===rt;function pt(d,v){return d.set(v[0],v[1]),d}function at(d,v){return d.add(v),d}function Rt(d,v){for(var O=-1,Y=d?d.length:0;++O<Y&&v(d[O],O,d)!==!1;);return d}function Ut(d,v){for(var O=-1,Y=v.length,Kt=d.length;++O<Y;)d[Kt+O]=v[O];return d}function Pt(d,v,O,Y){for(var Kt=-1,jt=d?d.length:0;++Kt<jt;)O=v(O,d[Kt],Kt,d);return O}function Ft(d,v){for(var O=-1,Y=Array(d);++O<d;)Y[O]=v(O);return Y}function Ht(d,v){return d==null?void 0:d[v]}function xt(d){var v=!1;if(d!=null&&typeof d.toString!="function")try{v=!!(d+"")}catch{}return v}function vt(d){var v=-1,O=Array(d.size);return d.forEach(function(Y,Kt){O[++v]=[Kt,Y]}),O}function Lt(d,v){return function(O){return d(v(O))}}function Jt(d){var v=-1,O=Array(d.size);return d.forEach(function(Y){O[++v]=Y}),O}var Et=Array.prototype,Yt=Function.prototype,Wt=Object.prototype,Mt=ut["__core-js_shared__"],Xt=function(){var d=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Ee=Yt.toString,re=Wt.hasOwnProperty,le=Wt.toString,Ne=RegExp("^"+Ee.call(re).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=Ot?ut.Buffer:void 0,_e=ut.Symbol,qe=ut.Uint8Array,me=Lt(Object.getPrototypeOf,Object),Me=Object.create,Ae=Wt.propertyIsEnumerable,$e=Et.splice,Oe=Object.getOwnPropertySymbols,Re=ge?ge.isBuffer:void 0,ae=Lt(Object.keys,Object),ye=se(ut,"DataView"),be=se(ut,"Map"),ve=se(ut,"Promise"),kt=se(ut,"Set"),ir=se(ut,"WeakMap"),Ve=se(Object,"create"),sr=ze(ye),lr=ze(be),Nr=ze(ve),kr=ze(kt),ar=ze(ir),Xe=_e?_e.prototype:void 0,Pe=Xe?Xe.valueOf:void 0;function Ie(d){var v=-1,O=d?d.length:0;for(this.clear();++v<O;){var Y=d[v];this.set(Y[0],Y[1])}}function Qe(){this.__data__=Ve?Ve(null):{}}function De(d){return this.has(d)&&delete this.__data__[d]}function Ke(d){var v=this.__data__;if(Ve){var O=v[d];return O===i?void 0:O}return re.call(v,d)?v[d]:void 0}function er(d){var v=this.__data__;return Ve?v[d]!==void 0:re.call(v,d)}function mr(d,v){var O=this.__data__;return O[d]=Ve&&v===void 0?i:v,this}Ie.prototype.clear=Qe,Ie.prototype.delete=De,Ie.prototype.get=Ke,Ie.prototype.has=er,Ie.prototype.set=mr;function P(d){var v=-1,O=d?d.length:0;for(this.clear();++v<O;){var Y=d[v];this.set(Y[0],Y[1])}}function V(){this.__data__=[]}function nt(d){var v=this.__data__,O=I(v,d);if(O<0)return!1;var Y=v.length-1;return O==Y?v.pop():$e.call(v,O,1),!0}function gt(d){var v=this.__data__,O=I(v,d);return O<0?void 0:v[O][1]}function Dt(d){return I(this.__data__,d)>-1}function he(d,v){var O=this.__data__,Y=I(O,d);return Y<0?O.push([d,v]):O[Y][1]=v,this}P.prototype.clear=V,P.prototype.delete=nt,P.prototype.get=gt,P.prototype.has=Dt,P.prototype.set=he;function $t(d){var v=-1,O=d?d.length:0;for(this.clear();++v<O;){var Y=d[v];this.set(Y[0],Y[1])}}function ke(){this.__data__={hash:new Ie,map:new(be||P),string:new Ie}}function Te(d){return Rr(this,d).delete(d)}function je(d){return Rr(this,d).get(d)}function te(d){return Rr(this,d).has(d)}function Ue(d,v){return Rr(this,d).set(d,v),this}$t.prototype.clear=ke,$t.prototype.delete=Te,$t.prototype.get=je,$t.prototype.has=te,$t.prototype.set=Ue;function fe(d){this.__data__=new P(d)}function cr(){this.__data__=new P}function de(d){return this.__data__.delete(d)}function We(d){return this.__data__.get(d)}function Le(d){return this.__data__.has(d)}function br(d,v){var O=this.__data__;if(O instanceof P){var Y=O.__data__;if(!be||Y.length<e-1)return Y.push([d,v]),this;O=this.__data__=new $t(Y)}return O.set(d,v),this}fe.prototype.clear=cr,fe.prototype.delete=de,fe.prototype.get=We,fe.prototype.has=Le,fe.prototype.set=br;function z(d,v){var O=Pr(d)||Br(d)?Ft(d.length,String):[],Y=O.length,Kt=!!Y;for(var jt in d)re.call(d,jt)&&!(Kt&&(jt=="length"||Sr(jt,Y)))&&O.push(jt);return O}function x(d,v,O){var Y=d[v];(!(re.call(d,v)&&Kr(Y,O))||O===void 0&&!(v in d))&&(d[v]=O)}function I(d,v){for(var O=d.length;O--;)if(Kr(d[O][0],v))return O;return-1}function W(d,v){return d&&Qt(v,on(v),d)}function ht(d,v,O,Y,Kt,jt,we){var xe;if(Y&&(xe=jt?Y(d,Kt,jt,we):Y(d)),xe!==void 0)return xe;if(!zr(d))return d;var Je=Pr(d);if(Je){if(xe=Lr(d),!v)return Ze(d,xe)}else{var Ce=Ar(d),ur=Ce==L||Ce==M;if(wr(d))return Tt(d,v);if(Ce==_||Ce==u||ur&&!jt){if(xt(d))return jt?d:{};if(xe=vr(ur?{}:d),!v)return Ye(d,W(xe,d))}else{if(!st[Ce])return jt?d:{};xe=gr(d,Ce,ht,v)}}we||(we=new fe);var hr=we.get(d);if(hr)return hr;if(we.set(d,xe),!Je)var tr=O?pr(d):on(d);return Rt(tr||d,function(dr,rr){tr&&(rr=dr,dr=d[rr]),x(xe,rr,ht(dr,v,O,Y,rr,d,we))}),xe}function At(d){return zr(d)?Me(d):{}}function Ct(d,v,O){var Y=v(d);return Pr(d)?Y:Ut(Y,O(d))}function It(d){return le.call(d)}function ne(d){if(!zr(d)||yr(d))return!1;var v=Dr(d)||xt(d)?Ne:J;return v.test(ze(d))}function pe(d){if(!qr(d))return ae(d);var v=[];for(var O in Object(d))re.call(d,O)&&O!="constructor"&&v.push(O);return v}function Tt(d,v){if(v)return d.slice();var O=new d.constructor(d.length);return d.copy(O),O}function ie(d){var v=new d.constructor(d.byteLength);return new qe(v).set(new qe(d)),v}function ee(d,v){var O=v?ie(d.buffer):d.buffer;return new d.constructor(O,d.byteOffset,d.byteLength)}function mt(d,v,O){var Y=v?O(vt(d),!0):vt(d);return Pt(Y,pt,new d.constructor)}function Vt(d){var v=new d.constructor(d.source,X.exec(d));return v.lastIndex=d.lastIndex,v}function ce(d,v,O){var Y=v?O(Jt(d),!0):Jt(d);return Pt(Y,at,new d.constructor)}function Se(d){return Pe?Object(Pe.call(d)):{}}function fr(d,v){var O=v?ie(d.buffer):d.buffer;return new d.constructor(O,d.byteOffset,d.length)}function Ze(d,v){var O=-1,Y=d.length;for(v||(v=Array(Y));++O<Y;)v[O]=d[O];return v}function Qt(d,v,O,Y){O||(O={});for(var Kt=-1,jt=v.length;++Kt<jt;){var we=v[Kt],xe=void 0;x(O,we,xe===void 0?d[we]:xe)}return O}function Ye(d,v){return Qt(d,ue(d),v)}function pr(d){return Ct(d,on,ue)}function Rr(d,v){var O=d.__data__;return He(v)?O[typeof v=="string"?"string":"hash"]:O.map}function se(d,v){var O=Ht(d,v);return ne(O)?O:void 0}var ue=Oe?Lt(Oe,Object):ln,Ar=It;(ye&&Ar(new ye(new ArrayBuffer(1)))!=K||be&&Ar(new be)!=N||ve&&Ar(ve.resolve())!=k||kt&&Ar(new kt)!=$||ir&&Ar(new ir)!=U)&&(Ar=function(d){var v=le.call(d),O=v==_?d.constructor:void 0,Y=O?ze(O):void 0;if(Y)switch(Y){case sr:return K;case lr:return N;case Nr:return k;case kr:return $;case ar:return U}return v});function Lr(d){var v=d.length,O=d.constructor(v);return v&&typeof d[0]=="string"&&re.call(d,"index")&&(O.index=d.index,O.input=d.input),O}function vr(d){return typeof d.constructor=="function"&&!qr(d)?At(me(d)):{}}function gr(d,v,O,Y){var Kt=d.constructor;switch(v){case F:return ie(d);case m:case g:return new Kt(+d);case K:return ee(d,Y);case lt:case Nt:case yt:case zt:case C:case E:case q:case Z:case j:return fr(d,Y);case N:return mt(d,Y,O);case R:case D:return new Kt(d);case B:return Vt(d);case $:return ce(d,Y,O);case et:return Se(d)}}function Sr(d,v){return v=v??c,!!v&&(typeof d=="number"||ot.test(d))&&d>-1&&d%1==0&&d<v}function He(d){var v=typeof d;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?d!=="__proto__":d===null}function yr(d){return!!Xt&&Xt in d}function qr(d){var v=d&&d.constructor,O=typeof v=="function"&&v.prototype||Wt;return d===O}function ze(d){if(d!=null){try{return Ee.call(d)}catch{}try{return d+""}catch{}}return""}function gn(d){return ht(d,!0,!0)}function Kr(d,v){return d===v||d!==d&&v!==v}function Br(d){return Mr(d)&&re.call(d,"callee")&&(!Ae.call(d,"callee")||le.call(d)==u)}var Pr=Array.isArray;function Er(d){return d!=null&&Fn(d.length)&&!Dr(d)}function Mr(d){return Vn(d)&&Er(d)}var wr=Re||mn;function Dr(d){var v=zr(d)?le.call(d):"";return v==L||v==M}function Fn(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=c}function zr(d){var v=typeof d;return!!d&&(v=="object"||v=="function")}function Vn(d){return!!d&&typeof d=="object"}function on(d){return Er(d)?z(d):pe(d)}function ln(){return[]}function mn(){return!1}o.exports=gn}(fi,fi.exports)),fi.exports}var pi={exports:{}};pi.exports;var yl;function Sa(){return yl||(yl=1,function(o,t){var e=200,i="__lodash_hash_undefined__",c=1,u=2,f=9007199254740991,m="[object Arguments]",g="[object Array]",y="[object AsyncFunction]",L="[object Boolean]",M="[object Date]",N="[object Error]",R="[object Function]",_="[object GeneratorFunction]",k="[object Map]",B="[object Number]",$="[object Null]",D="[object Object]",et="[object Promise]",U="[object Proxy]",F="[object RegExp]",K="[object Set]",lt="[object String]",Nt="[object Symbol]",yt="[object Undefined]",zt="[object WeakMap]",C="[object ArrayBuffer]",E="[object DataView]",q="[object Float32Array]",Z="[object Float64Array]",j="[object Int8Array]",H="[object Int16Array]",X="[object Int32Array]",J="[object Uint8Array]",ot="[object Uint8ClampedArray]",st="[object Uint16Array]",dt="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,ut=/^\[object .+?Constructor\]$/,rt=/^(?:0|[1-9]\d*)$/,ft={};ft[q]=ft[Z]=ft[j]=ft[H]=ft[X]=ft[J]=ft[ot]=ft[st]=ft[dt]=!0,ft[m]=ft[g]=ft[C]=ft[L]=ft[E]=ft[M]=ft[N]=ft[R]=ft[k]=ft[B]=ft[D]=ft[F]=ft[K]=ft[lt]=ft[zt]=!1;var Ot=typeof _n=="object"&&_n&&_n.Object===Object&&_n,pt=typeof self=="object"&&self&&self.Object===Object&&self,at=Ot||pt||Function("return this")(),Rt=t&&!t.nodeType&&t,Ut=Rt&&!0&&o&&!o.nodeType&&o,Pt=Ut&&Ut.exports===Rt,Ft=Pt&&Ot.process,Ht=function(){try{return Ft&&Ft.binding&&Ft.binding("util")}catch{}}(),xt=Ht&&Ht.isTypedArray;function vt(d,v){for(var O=-1,Y=d==null?0:d.length,Kt=0,jt=[];++O<Y;){var we=d[O];v(we,O,d)&&(jt[Kt++]=we)}return jt}function Lt(d,v){for(var O=-1,Y=v.length,Kt=d.length;++O<Y;)d[Kt+O]=v[O];return d}function Jt(d,v){for(var O=-1,Y=d==null?0:d.length;++O<Y;)if(v(d[O],O,d))return!0;return!1}function Et(d,v){for(var O=-1,Y=Array(d);++O<d;)Y[O]=v(O);return Y}function Yt(d){return function(v){return d(v)}}function Wt(d,v){return d.has(v)}function Mt(d,v){return d==null?void 0:d[v]}function Xt(d){var v=-1,O=Array(d.size);return d.forEach(function(Y,Kt){O[++v]=[Kt,Y]}),O}function Ee(d,v){return function(O){return d(v(O))}}function re(d){var v=-1,O=Array(d.size);return d.forEach(function(Y){O[++v]=Y}),O}var le=Array.prototype,Ne=Function.prototype,ge=Object.prototype,_e=at["__core-js_shared__"],qe=Ne.toString,me=ge.hasOwnProperty,Me=function(){var d=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Ae=ge.toString,$e=RegExp("^"+qe.call(me).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=Pt?at.Buffer:void 0,Re=at.Symbol,ae=at.Uint8Array,ye=ge.propertyIsEnumerable,be=le.splice,ve=Re?Re.toStringTag:void 0,kt=Object.getOwnPropertySymbols,ir=Oe?Oe.isBuffer:void 0,Ve=Ee(Object.keys,Object),sr=ue(at,"DataView"),lr=ue(at,"Map"),Nr=ue(at,"Promise"),kr=ue(at,"Set"),ar=ue(at,"WeakMap"),Xe=ue(Object,"create"),Pe=ze(sr),Ie=ze(lr),Qe=ze(Nr),De=ze(kr),Ke=ze(ar),er=Re?Re.prototype:void 0,mr=er?er.valueOf:void 0;function P(d){var v=-1,O=d==null?0:d.length;for(this.clear();++v<O;){var Y=d[v];this.set(Y[0],Y[1])}}function V(){this.__data__=Xe?Xe(null):{},this.size=0}function nt(d){var v=this.has(d)&&delete this.__data__[d];return this.size-=v?1:0,v}function gt(d){var v=this.__data__;if(Xe){var O=v[d];return O===i?void 0:O}return me.call(v,d)?v[d]:void 0}function Dt(d){var v=this.__data__;return Xe?v[d]!==void 0:me.call(v,d)}function he(d,v){var O=this.__data__;return this.size+=this.has(d)?0:1,O[d]=Xe&&v===void 0?i:v,this}P.prototype.clear=V,P.prototype.delete=nt,P.prototype.get=gt,P.prototype.has=Dt,P.prototype.set=he;function $t(d){var v=-1,O=d==null?0:d.length;for(this.clear();++v<O;){var Y=d[v];this.set(Y[0],Y[1])}}function ke(){this.__data__=[],this.size=0}function Te(d){var v=this.__data__,O=Tt(v,d);if(O<0)return!1;var Y=v.length-1;return O==Y?v.pop():be.call(v,O,1),--this.size,!0}function je(d){var v=this.__data__,O=Tt(v,d);return O<0?void 0:v[O][1]}function te(d){return Tt(this.__data__,d)>-1}function Ue(d,v){var O=this.__data__,Y=Tt(O,d);return Y<0?(++this.size,O.push([d,v])):O[Y][1]=v,this}$t.prototype.clear=ke,$t.prototype.delete=Te,$t.prototype.get=je,$t.prototype.has=te,$t.prototype.set=Ue;function fe(d){var v=-1,O=d==null?0:d.length;for(this.clear();++v<O;){var Y=d[v];this.set(Y[0],Y[1])}}function cr(){this.size=0,this.__data__={hash:new P,map:new(lr||$t),string:new P}}function de(d){var v=se(this,d).delete(d);return this.size-=v?1:0,v}function We(d){return se(this,d).get(d)}function Le(d){return se(this,d).has(d)}function br(d,v){var O=se(this,d),Y=O.size;return O.set(d,v),this.size+=O.size==Y?0:1,this}fe.prototype.clear=cr,fe.prototype.delete=de,fe.prototype.get=We,fe.prototype.has=Le,fe.prototype.set=br;function z(d){var v=-1,O=d==null?0:d.length;for(this.__data__=new fe;++v<O;)this.add(d[v])}function x(d){return this.__data__.set(d,i),this}function I(d){return this.__data__.has(d)}z.prototype.add=z.prototype.push=x,z.prototype.has=I;function W(d){var v=this.__data__=new $t(d);this.size=v.size}function ht(){this.__data__=new $t,this.size=0}function At(d){var v=this.__data__,O=v.delete(d);return this.size=v.size,O}function Ct(d){return this.__data__.get(d)}function It(d){return this.__data__.has(d)}function ne(d,v){var O=this.__data__;if(O instanceof $t){var Y=O.__data__;if(!lr||Y.length<e-1)return Y.push([d,v]),this.size=++O.size,this;O=this.__data__=new fe(Y)}return O.set(d,v),this.size=O.size,this}W.prototype.clear=ht,W.prototype.delete=At,W.prototype.get=Ct,W.prototype.has=It,W.prototype.set=ne;function pe(d,v){var O=Br(d),Y=!O&&Kr(d),Kt=!O&&!Y&&Er(d),jt=!O&&!Y&&!Kt&&Vn(d),we=O||Y||Kt||jt,xe=we?Et(d.length,String):[],Je=xe.length;for(var Ce in d)me.call(d,Ce)&&!(we&&(Ce=="length"||Kt&&(Ce=="offset"||Ce=="parent")||jt&&(Ce=="buffer"||Ce=="byteLength"||Ce=="byteOffset")||gr(Ce,Je)))&&xe.push(Ce);return xe}function Tt(d,v){for(var O=d.length;O--;)if(gn(d[O][0],v))return O;return-1}function ie(d,v,O){var Y=v(d);return Br(d)?Y:Lt(Y,O(d))}function ee(d){return d==null?d===void 0?yt:$:ve&&ve in Object(d)?Ar(d):qr(d)}function mt(d){return zr(d)&&ee(d)==m}function Vt(d,v,O,Y,Kt){return d===v?!0:d==null||v==null||!zr(d)&&!zr(v)?d!==d&&v!==v:ce(d,v,O,Y,Vt,Kt)}function ce(d,v,O,Y,Kt,jt){var we=Br(d),xe=Br(v),Je=we?g:vr(d),Ce=xe?g:vr(v);Je=Je==m?D:Je,Ce=Ce==m?D:Ce;var ur=Je==D,hr=Ce==D,tr=Je==Ce;if(tr&&Er(d)){if(!Er(v))return!1;we=!0,ur=!1}if(tr&&!ur)return jt||(jt=new W),we||Vn(d)?Qt(d,v,O,Y,Kt,jt):Ye(d,v,Je,O,Y,Kt,jt);if(!(O&c)){var dr=ur&&me.call(d,"__wrapped__"),rr=hr&&me.call(v,"__wrapped__");if(dr||rr){var Zr=dr?d.value():d,Yr=rr?v.value():v;return jt||(jt=new W),Kt(Zr,Yr,O,Y,jt)}}return tr?(jt||(jt=new W),pr(d,v,O,Y,Kt,jt)):!1}function Se(d){if(!Fn(d)||He(d))return!1;var v=wr(d)?$e:ut;return v.test(ze(d))}function fr(d){return zr(d)&&Dr(d.length)&&!!ft[ee(d)]}function Ze(d){if(!yr(d))return Ve(d);var v=[];for(var O in Object(d))me.call(d,O)&&O!="constructor"&&v.push(O);return v}function Qt(d,v,O,Y,Kt,jt){var we=O&c,xe=d.length,Je=v.length;if(xe!=Je&&!(we&&Je>xe))return!1;var Ce=jt.get(d);if(Ce&&jt.get(v))return Ce==v;var ur=-1,hr=!0,tr=O&u?new z:void 0;for(jt.set(d,v),jt.set(v,d);++ur<xe;){var dr=d[ur],rr=v[ur];if(Y)var Zr=we?Y(rr,dr,ur,v,d,jt):Y(dr,rr,ur,d,v,jt);if(Zr!==void 0){if(Zr)continue;hr=!1;break}if(tr){if(!Jt(v,function(Yr,an){if(!Wt(tr,an)&&(dr===Yr||Kt(dr,Yr,O,Y,jt)))return tr.push(an)})){hr=!1;break}}else if(!(dr===rr||Kt(dr,rr,O,Y,jt))){hr=!1;break}}return jt.delete(d),jt.delete(v),hr}function Ye(d,v,O,Y,Kt,jt,we){switch(O){case E:if(d.byteLength!=v.byteLength||d.byteOffset!=v.byteOffset)return!1;d=d.buffer,v=v.buffer;case C:return!(d.byteLength!=v.byteLength||!jt(new ae(d),new ae(v)));case L:case M:case B:return gn(+d,+v);case N:return d.name==v.name&&d.message==v.message;case F:case lt:return d==v+"";case k:var xe=Xt;case K:var Je=Y&c;if(xe||(xe=re),d.size!=v.size&&!Je)return!1;var Ce=we.get(d);if(Ce)return Ce==v;Y|=u,we.set(d,v);var ur=Qt(xe(d),xe(v),Y,Kt,jt,we);return we.delete(d),ur;case Nt:if(mr)return mr.call(d)==mr.call(v)}return!1}function pr(d,v,O,Y,Kt,jt){var we=O&c,xe=Rr(d),Je=xe.length,Ce=Rr(v),ur=Ce.length;if(Je!=ur&&!we)return!1;for(var hr=Je;hr--;){var tr=xe[hr];if(!(we?tr in v:me.call(v,tr)))return!1}var dr=jt.get(d);if(dr&&jt.get(v))return dr==v;var rr=!0;jt.set(d,v),jt.set(v,d);for(var Zr=we;++hr<Je;){tr=xe[hr];var Yr=d[tr],an=v[tr];if(Y)var Wn=we?Y(an,Yr,tr,v,d,jt):Y(Yr,an,tr,d,v,jt);if(!(Wn===void 0?Yr===an||Kt(Yr,an,O,Y,jt):Wn)){rr=!1;break}Zr||(Zr=tr=="constructor")}if(rr&&!Zr){var An=d.constructor,or=v.constructor;An!=or&&"constructor"in d&&"constructor"in v&&!(typeof An=="function"&&An instanceof An&&typeof or=="function"&&or instanceof or)&&(rr=!1)}return jt.delete(d),jt.delete(v),rr}function Rr(d){return ie(d,on,Lr)}function se(d,v){var O=d.__data__;return Sr(v)?O[typeof v=="string"?"string":"hash"]:O.map}function ue(d,v){var O=Mt(d,v);return Se(O)?O:void 0}function Ar(d){var v=me.call(d,ve),O=d[ve];try{d[ve]=void 0;var Y=!0}catch{}var Kt=Ae.call(d);return Y&&(v?d[ve]=O:delete d[ve]),Kt}var Lr=kt?function(d){return d==null?[]:(d=Object(d),vt(kt(d),function(v){return ye.call(d,v)}))}:ln,vr=ee;(sr&&vr(new sr(new ArrayBuffer(1)))!=E||lr&&vr(new lr)!=k||Nr&&vr(Nr.resolve())!=et||kr&&vr(new kr)!=K||ar&&vr(new ar)!=zt)&&(vr=function(d){var v=ee(d),O=v==D?d.constructor:void 0,Y=O?ze(O):"";if(Y)switch(Y){case Pe:return E;case Ie:return k;case Qe:return et;case De:return K;case Ke:return zt}return v});function gr(d,v){return v=v??f,!!v&&(typeof d=="number"||rt.test(d))&&d>-1&&d%1==0&&d<v}function Sr(d){var v=typeof d;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?d!=="__proto__":d===null}function He(d){return!!Me&&Me in d}function yr(d){var v=d&&d.constructor,O=typeof v=="function"&&v.prototype||ge;return d===O}function qr(d){return Ae.call(d)}function ze(d){if(d!=null){try{return qe.call(d)}catch{}try{return d+""}catch{}}return""}function gn(d,v){return d===v||d!==d&&v!==v}var Kr=mt(function(){return arguments}())?mt:function(d){return zr(d)&&me.call(d,"callee")&&!ye.call(d,"callee")},Br=Array.isArray;function Pr(d){return d!=null&&Dr(d.length)&&!wr(d)}var Er=ir||mn;function Mr(d,v){return Vt(d,v)}function wr(d){if(!Fn(d))return!1;var v=ee(d);return v==R||v==_||v==y||v==U}function Dr(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=f}function Fn(d){var v=typeof d;return d!=null&&(v=="object"||v=="function")}function zr(d){return d!=null&&typeof d=="object"}var Vn=xt?Yt(xt):fr;function on(d){return Pr(d)?pe(d):Ze(d)}function ln(){return[]}function mn(){return!1}o.exports=Mr}(pi,pi.exports)),pi.exports}var zi={},wl;function dp(){if(wl)return zi;wl=1,Object.defineProperty(zi,"__esModule",{value:!0});const o=La(),t=Sa();var e;return function(i){function c(g={},y={},L=!1){typeof g!="object"&&(g={}),typeof y!="object"&&(y={});let M=o(y);L||(M=Object.keys(M).reduce((N,R)=>(M[R]!=null&&(N[R]=M[R]),N),{}));for(const N in g)g[N]!==void 0&&y[N]===void 0&&(M[N]=g[N]);return Object.keys(M).length>0?M:void 0}i.compose=c;function u(g={},y={}){typeof g!="object"&&(g={}),typeof y!="object"&&(y={});const L=Object.keys(g).concat(Object.keys(y)).reduce((M,N)=>(t(g[N],y[N])||(M[N]=y[N]===void 0?null:y[N]),M),{});return Object.keys(L).length>0?L:void 0}i.diff=u;function f(g={},y={}){g=g||{};const L=Object.keys(y).reduce((M,N)=>(y[N]!==g[N]&&g[N]!==void 0&&(M[N]=y[N]),M),{});return Object.keys(g).reduce((M,N)=>(g[N]!==y[N]&&y[N]===void 0&&(M[N]=null),M),L)}i.invert=f;function m(g,y,L=!1){if(typeof g!="object")return y;if(typeof y!="object")return;if(!L)return y;const M=Object.keys(y).reduce((N,R)=>(g[R]===void 0&&(N[R]=y[R]),N),{});return Object.keys(M).length>0?M:void 0}i.transform=m}(e||(e={})),zi.default=e,zi}var $i={},xl;function qa(){if(xl)return $i;xl=1,Object.defineProperty($i,"__esModule",{value:!0});var o;return function(t){function e(i){return typeof i.delete=="number"?i.delete:typeof i.retain=="number"?i.retain:typeof i.retain=="object"&&i.retain!==null?1:typeof i.insert=="string"?i.insert.length:1}t.length=e}(o||(o={})),$i.default=o,$i}var Ui={},Tl;function fp(){if(Tl)return Ui;Tl=1,Object.defineProperty(Ui,"__esModule",{value:!0});const o=qa();class t{constructor(i){this.ops=i,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(i){i||(i=1/0);const c=this.ops[this.index];if(c){const u=this.offset,f=o.default.length(c);if(i>=f-u?(i=f-u,this.index+=1,this.offset=0):this.offset+=i,typeof c.delete=="number")return{delete:i};{const m={};return c.attributes&&(m.attributes=c.attributes),typeof c.retain=="number"?m.retain=i:typeof c.retain=="object"&&c.retain!==null?m.retain=c.retain:typeof c.insert=="string"?m.insert=c.insert.substr(u,i):m.insert=c.insert,m}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?o.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const i=this.ops[this.index];return i?typeof i.delete=="number"?"delete":typeof i.retain=="number"||typeof i.retain=="object"&&i.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const i=this.offset,c=this.index,u=this.next(),f=this.ops.slice(this.index);return this.offset=i,this.index=c,[u].concat(f)}}else return[]}}return Ui.default=t,Ui}var Nl;function pp(){return Nl||(Nl=1,function(o,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const e=hp(),i=La(),c=Sa(),u=dp();t.AttributeMap=u.default;const f=qa();t.Op=f.default;const m=fp();t.OpIterator=m.default;const g="\0",y=(M,N)=>{if(typeof M!="object"||M===null)throw new Error(`cannot retain a ${typeof M}`);if(typeof N!="object"||N===null)throw new Error(`cannot retain a ${typeof N}`);const R=Object.keys(M)[0];if(!R||R!==Object.keys(N)[0])throw new Error(`embed types not matched: ${R} != ${Object.keys(N)[0]}`);return[R,M[R],N[R]]};class L{constructor(N){Array.isArray(N)?this.ops=N:N!=null&&Array.isArray(N.ops)?this.ops=N.ops:this.ops=[]}static registerEmbed(N,R){this.handlers[N]=R}static unregisterEmbed(N){delete this.handlers[N]}static getHandler(N){const R=this.handlers[N];if(!R)throw new Error(`no handlers for embed type "${N}"`);return R}insert(N,R){const _={};return typeof N=="string"&&N.length===0?this:(_.insert=N,R!=null&&typeof R=="object"&&Object.keys(R).length>0&&(_.attributes=R),this.push(_))}delete(N){return N<=0?this:this.push({delete:N})}retain(N,R){if(typeof N=="number"&&N<=0)return this;const _={retain:N};return R!=null&&typeof R=="object"&&Object.keys(R).length>0&&(_.attributes=R),this.push(_)}push(N){let R=this.ops.length,_=this.ops[R-1];if(N=i(N),typeof _=="object"){if(typeof N.delete=="number"&&typeof _.delete=="number")return this.ops[R-1]={delete:_.delete+N.delete},this;if(typeof _.delete=="number"&&N.insert!=null&&(R-=1,_=this.ops[R-1],typeof _!="object"))return this.ops.unshift(N),this;if(c(N.attributes,_.attributes)){if(typeof N.insert=="string"&&typeof _.insert=="string")return this.ops[R-1]={insert:_.insert+N.insert},typeof N.attributes=="object"&&(this.ops[R-1].attributes=N.attributes),this;if(typeof N.retain=="number"&&typeof _.retain=="number")return this.ops[R-1]={retain:_.retain+N.retain},typeof N.attributes=="object"&&(this.ops[R-1].attributes=N.attributes),this}}return R===this.ops.length?this.ops.push(N):this.ops.splice(R,0,N),this}chop(){const N=this.ops[this.ops.length-1];return N&&typeof N.retain=="number"&&!N.attributes&&this.ops.pop(),this}filter(N){return this.ops.filter(N)}forEach(N){this.ops.forEach(N)}map(N){return this.ops.map(N)}partition(N){const R=[],_=[];return this.forEach(k=>{(N(k)?R:_).push(k)}),[R,_]}reduce(N,R){return this.ops.reduce(N,R)}changeLength(){return this.reduce((N,R)=>R.insert?N+f.default.length(R):R.delete?N-R.delete:N,0)}length(){return this.reduce((N,R)=>N+f.default.length(R),0)}slice(N=0,R=1/0){const _=[],k=new m.default(this.ops);let B=0;for(;B<R&&k.hasNext();){let $;B<N?$=k.next(N-B):($=k.next(R-B),_.push($)),B+=f.default.length($)}return new L(_)}compose(N){const R=new m.default(this.ops),_=new m.default(N.ops),k=[],B=_.peek();if(B!=null&&typeof B.retain=="number"&&B.attributes==null){let D=B.retain;for(;R.peekType()==="insert"&&R.peekLength()<=D;)D-=R.peekLength(),k.push(R.next());B.retain-D>0&&_.next(B.retain-D)}const $=new L(k);for(;R.hasNext()||_.hasNext();)if(_.peekType()==="insert")$.push(_.next());else if(R.peekType()==="delete")$.push(R.next());else{const D=Math.min(R.peekLength(),_.peekLength()),et=R.next(D),U=_.next(D);if(U.retain){const F={};if(typeof et.retain=="number")F.retain=typeof U.retain=="number"?D:U.retain;else if(typeof U.retain=="number")et.retain==null?F.insert=et.insert:F.retain=et.retain;else{const lt=et.retain==null?"insert":"retain",[Nt,yt,zt]=y(et[lt],U.retain),C=L.getHandler(Nt);F[lt]={[Nt]:C.compose(yt,zt,lt==="retain")}}const K=u.default.compose(et.attributes,U.attributes,typeof et.retain=="number");if(K&&(F.attributes=K),$.push(F),!_.hasNext()&&c($.ops[$.ops.length-1],F)){const lt=new L(R.rest());return $.concat(lt).chop()}}else typeof U.delete=="number"&&(typeof et.retain=="number"||typeof et.retain=="object"&&et.retain!==null)&&$.push(U)}return $.chop()}concat(N){const R=new L(this.ops.slice());return N.ops.length>0&&(R.push(N.ops[0]),R.ops=R.ops.concat(N.ops.slice(1))),R}diff(N,R){if(this.ops===N.ops)return new L;const _=[this,N].map(et=>et.map(U=>{if(U.insert!=null)return typeof U.insert=="string"?U.insert:g;const F=et===N?"on":"with";throw new Error("diff() called "+F+" non-document")}).join("")),k=new L,B=e(_[0],_[1],R,!0),$=new m.default(this.ops),D=new m.default(N.ops);return B.forEach(et=>{let U=et[1].length;for(;U>0;){let F=0;switch(et[0]){case e.INSERT:F=Math.min(D.peekLength(),U),k.push(D.next(F));break;case e.DELETE:F=Math.min(U,$.peekLength()),$.next(F),k.delete(F);break;case e.EQUAL:F=Math.min($.peekLength(),D.peekLength(),U);const K=$.next(F),lt=D.next(F);c(K.insert,lt.insert)?k.retain(F,u.default.diff(K.attributes,lt.attributes)):k.push(lt).delete(F);break}U-=F}}),k.chop()}eachLine(N,R=`
`){const _=new m.default(this.ops);let k=new L,B=0;for(;_.hasNext();){if(_.peekType()!=="insert")return;const $=_.peek(),D=f.default.length($)-_.peekLength(),et=typeof $.insert=="string"?$.insert.indexOf(R,D)-D:-1;if(et<0)k.push(_.next());else if(et>0)k.push(_.next(et));else{if(N(k,_.next(1).attributes||{},B)===!1)return;B+=1,k=new L}}k.length()>0&&N(k,{},B)}invert(N){const R=new L;return this.reduce((_,k)=>{if(k.insert)R.delete(f.default.length(k));else{if(typeof k.retain=="number"&&k.attributes==null)return R.retain(k.retain),_+k.retain;if(k.delete||typeof k.retain=="number"){const B=k.delete||k.retain;return N.slice(_,_+B).forEach(D=>{k.delete?R.push(D):k.retain&&k.attributes&&R.retain(f.default.length(D),u.default.invert(k.attributes,D.attributes))}),_+B}else if(typeof k.retain=="object"&&k.retain!==null){const B=N.slice(_,_+1),$=new m.default(B.ops).next(),[D,et,U]=y(k.retain,$.insert),F=L.getHandler(D);return R.retain({[D]:F.invert(et,U)},u.default.invert(k.attributes,$.attributes)),_+1}}return _},0),R.chop()}transform(N,R=!1){if(R=!!R,typeof N=="number")return this.transformPosition(N,R);const _=N,k=new m.default(this.ops),B=new m.default(_.ops),$=new L;for(;k.hasNext()||B.hasNext();)if(k.peekType()==="insert"&&(R||B.peekType()!=="insert"))$.retain(f.default.length(k.next()));else if(B.peekType()==="insert")$.push(B.next());else{const D=Math.min(k.peekLength(),B.peekLength()),et=k.next(D),U=B.next(D);if(et.delete)continue;if(U.delete)$.push(U);else{const F=et.retain,K=U.retain;let lt=typeof K=="object"&&K!==null?K:D;if(typeof F=="object"&&F!==null&&typeof K=="object"&&K!==null){const Nt=Object.keys(F)[0];if(Nt===Object.keys(K)[0]){const yt=L.getHandler(Nt);yt&&(lt={[Nt]:yt.transform(F[Nt],K[Nt],R)})}}$.retain(lt,u.default.transform(et.attributes,U.attributes,R))}}return $.chop()}transformPosition(N,R=!1){R=!!R;const _=new m.default(this.ops);let k=0;for(;_.hasNext()&&k<=N;){const B=_.peekLength(),$=_.peekType();if(_.next(),$==="delete"){N-=Math.min(B,N-k);continue}else $==="insert"&&(k<N||!R)&&(N+=B);k+=B}return N}}L.Op=f.default,L.OpIterator=m.default,L.AttributeMap=u.default,L.handlers={},t.default=L,o.exports=L,o.exports.default=L}(Di,Di.exports)),Di.exports}var Or=pp();const qt=rs(Or);class sn extends jr{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}sn.blotName="break";sn.tagName="BR";let rn=class extends es{};const gp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function as(o){return o.replace(/[&<>"']/g,t=>gp[t])}const cn=class cn extends po{static compare(t,e){const i=cn.order.indexOf(t),c=cn.order.indexOf(e);return i>=0||c>=0?i-c:t===e?0:t<e?-1:1}formatAt(t,e,i,c){if(cn.compare(this.statics.blotName,i)<0&&this.scroll.query(i,Bt.BLOT)){const u=this.isolate(t,e);c&&u.wrap(i,c)}else super.formatAt(t,e,i,c)}optimize(t){if(super.optimize(t),this.parent instanceof cn&&cn.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}};wt(cn,"allowedChildren",[cn,sn,jr,rn]),wt(cn,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let fn=cn;const Al=1;class Tr extends Ni{constructor(){super(...arguments);wt(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=Oa(this)),this.cache.delta}deleteAt(e,i){super.deleteAt(e,i),this.cache={}}formatAt(e,i,c,u){i<=0||(this.scroll.query(c,Bt.BLOCK)?e+i===this.length()&&this.format(c,u):super.formatAt(e,Math.min(i,this.length()-e-1),c,u),this.cache={})}insertAt(e,i,c){if(c!=null){super.insertAt(e,i,c),this.cache={};return}if(i.length===0)return;const u=i.split(`
`),f=u.shift();f.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),f):this.children.tail.insertAt(this.children.tail.length(),f),this.cache={});let m=this;u.reduce((g,y)=>(m=m.split(g,!0),m.insertAt(0,y),y.length),e+f.length)}insertBefore(e,i){const{head:c}=this.children;super.insertBefore(e,i),c instanceof sn&&c.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Al),this.cache.length}moveChildren(e,i){super.moveChildren(e,i),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i&&(e===0||e>=this.length()-Al)){const u=this.clone();return e===0?(this.parent.insertBefore(u,this),this):(this.parent.insertBefore(u,this.next),u)}const c=super.split(e,i);return this.cache={},c}}Tr.blotName="block";Tr.tagName="P";Tr.defaultChild=sn;Tr.allowedChildren=[sn,fn,jr,rn];class Wr extends jr{attach(){super.attach(),this.attributes=new os(this.domNode)}delta(){return new qt().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const i=this.scroll.query(t,Bt.BLOCK_ATTRIBUTE);i!=null&&this.attributes.attribute(i,e)}formatAt(t,e,i,c){this.format(i,c)}insertAt(t,e,i){if(i!=null){super.insertAt(t,e,i);return}const c=e.split(`
`),u=c.pop(),f=c.map(g=>{const y=this.scroll.create(Tr.blotName);return y.insertAt(0,g),y}),m=this.split(t);f.forEach(g=>{this.parent.insertBefore(g,m)}),u&&this.parent.insertBefore(this.scroll.create("text",u),m)}}Wr.scope=Bt.BLOCK_BLOT;function Oa(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return o.descendants(Cr).reduce((e,i)=>i.length()===0?e:e.insert(i.value(),Fr(i,{},t)),new qt).insert(`
`,Fr(o))}function Fr(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return o==null||("formats"in o&&typeof o.formats=="function"&&(t={...t,...o.formats()},e&&delete t["code-token"]),o.parent==null||o.parent.statics.blotName==="scroll"||o.parent.statics.scope!==o.statics.scope)?t:Fr(o.parent,t,e)}const Hr=class Hr extends jr{static value(){}constructor(t,e,i){super(t,e),this.selection=i,this.textNode=document.createTextNode(Hr.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let i=this,c=0;for(;i!=null&&i.statics.scope!==Bt.BLOCK_BLOT;)c+=i.offset(i.parent),i=i.parent;i!=null&&(this.savedLength=Hr.CONTENTS.length,i.optimize(),i.formatAt(c,Hr.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof rn?this.prev:null,i=e?e.length():0,c=this.next instanceof rn?this.next:null,u=c?c.text:"",{textNode:f}=this,m=f.data.split(Hr.CONTENTS).join("");f.data=Hr.CONTENTS;let g;if(e)g=e,(m||c)&&(e.insertAt(e.length(),m+u),c&&c.remove());else if(c)g=c,c.insertAt(0,m);else{const y=document.createTextNode(m);g=this.scroll.create(y),this.parent.insertBefore(g,this)}if(this.remove(),t){const y=(N,R)=>e&&N===e.domNode?R:N===f?i+R-1:c&&N===c.domNode?i+m.length+R:null,L=y(t.start.node,t.start.offset),M=y(t.end.node,t.end.offset);if(L!==null&&M!==null)return{startNode:g.domNode,startOffset:L,endNode:g.domNode,endOffset:M}}return null}update(t,e){if(t.some(i=>i.type==="characterData"&&i.target===this.textNode)){const i=this.restore();i&&(e.range=i)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=Hr.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}};wt(Hr,"blotName","cursor"),wt(Hr,"className","ql-cursor"),wt(Hr,"tagName","span"),wt(Hr,"CONTENTS","\uFEFF");let oi=Hr;var Ts={exports:{}},El;function mp(){return El||(El=1,function(o){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function c(g,y,L){this.fn=g,this.context=y,this.once=L||!1}function u(g,y,L,M,N){if(typeof L!="function")throw new TypeError("The listener must be a function");var R=new c(L,M||g,N),_=e?e+y:y;return g._events[_]?g._events[_].fn?g._events[_]=[g._events[_],R]:g._events[_].push(R):(g._events[_]=R,g._eventsCount++),g}function f(g,y){--g._eventsCount===0?g._events=new i:delete g._events[y]}function m(){this._events=new i,this._eventsCount=0}m.prototype.eventNames=function(){var y=[],L,M;if(this._eventsCount===0)return y;for(M in L=this._events)t.call(L,M)&&y.push(e?M.slice(1):M);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(L)):y},m.prototype.listeners=function(y){var L=e?e+y:y,M=this._events[L];if(!M)return[];if(M.fn)return[M.fn];for(var N=0,R=M.length,_=new Array(R);N<R;N++)_[N]=M[N].fn;return _},m.prototype.listenerCount=function(y){var L=e?e+y:y,M=this._events[L];return M?M.fn?1:M.length:0},m.prototype.emit=function(y,L,M,N,R,_){var k=e?e+y:y;if(!this._events[k])return!1;var B=this._events[k],$=arguments.length,D,et;if(B.fn){switch(B.once&&this.removeListener(y,B.fn,void 0,!0),$){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,L),!0;case 3:return B.fn.call(B.context,L,M),!0;case 4:return B.fn.call(B.context,L,M,N),!0;case 5:return B.fn.call(B.context,L,M,N,R),!0;case 6:return B.fn.call(B.context,L,M,N,R,_),!0}for(et=1,D=new Array($-1);et<$;et++)D[et-1]=arguments[et];B.fn.apply(B.context,D)}else{var U=B.length,F;for(et=0;et<U;et++)switch(B[et].once&&this.removeListener(y,B[et].fn,void 0,!0),$){case 1:B[et].fn.call(B[et].context);break;case 2:B[et].fn.call(B[et].context,L);break;case 3:B[et].fn.call(B[et].context,L,M);break;case 4:B[et].fn.call(B[et].context,L,M,N);break;default:if(!D)for(F=1,D=new Array($-1);F<$;F++)D[F-1]=arguments[F];B[et].fn.apply(B[et].context,D)}}return!0},m.prototype.on=function(y,L,M){return u(this,y,L,M,!1)},m.prototype.once=function(y,L,M){return u(this,y,L,M,!0)},m.prototype.removeListener=function(y,L,M,N){var R=e?e+y:y;if(!this._events[R])return this;if(!L)return f(this,R),this;var _=this._events[R];if(_.fn)_.fn===L&&(!N||_.once)&&(!M||_.context===M)&&f(this,R);else{for(var k=0,B=[],$=_.length;k<$;k++)(_[k].fn!==L||N&&!_[k].once||M&&_[k].context!==M)&&B.push(_[k]);B.length?this._events[R]=B.length===1?B[0]:B:f(this,R)}return this},m.prototype.removeAllListeners=function(y){var L;return y?(L=e?e+y:y,this._events[L]&&f(this,L)):(this._events=new i,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=e,m.EventEmitter=m,o.exports=m}(Ts)),Ts.exports}var bp=mp();const vp=rs(bp),Fs=new WeakMap,Vs=["error","warn","log","info"];let Ws="warn";function Ra(o){if(Ws&&Vs.indexOf(o)<=Vs.indexOf(Ws)){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];console[o](...e)}}function Nn(o){return Vs.reduce((t,e)=>(t[e]=Ra.bind(console,e,o),t),{})}Nn.level=o=>{Ws=o};Ra.level=Nn.level;const Ns=Nn("quill:events"),yp=["selectionchange","mousedown","mouseup","click"];yp.forEach(o=>{document.addEventListener(o,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach(c=>{const u=Fs.get(c);u&&u.emitter&&u.emitter.handleDOM(...e)})})});class _t extends vp{constructor(){super(),this.domListeners={},this.on("error",Ns.error)}emit(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Ns.log.call(Ns,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),c=1;c<e;c++)i[c-1]=arguments[c];(this.domListeners[t.type]||[]).forEach(u=>{let{node:f,handler:m}=u;(t.target===f||f.contains(t.target))&&m(t,...i)})}listenDOM(t,e,i){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:i})}}wt(_t,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),wt(_t,"sources",{API:"api",SILENT:"silent",USER:"user"});const As=Nn("quill:selection");class On{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}}class wp{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new On(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,_t.sources.USER),1)}),this.emitter.on(_t.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const i=this.getNativeRange();i!=null&&i.start.node!==this.cursor.textNode&&this.emitter.once(_t.events.SCROLL_UPDATE,(c,u)=>{try{this.root.contains(i.start.node)&&this.root.contains(i.end.node)&&this.setNativeRange(i.start.node,i.start.offset,i.end.node,i.end.offset);const f=u.some(m=>m.type==="characterData"||m.type==="childList"||m.type==="attributes"&&m.target===this.root);this.update(f?_t.sources.SILENT:c)}catch{}})}),this.emitter.on(_t.events.SCROLL_OPTIMIZE,(i,c)=>{if(c.range){const{startNode:u,startOffset:f,endNode:m,endOffset:g}=c.range;this.setNativeRange(u,f,m,g),this.update(_t.sources.SILENT)}}),this.update(_t.sources.SILENT)}handleComposition(){this.emitter.on(_t.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(_t.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(_t.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const i=this.getNativeRange();if(!(i==null||!i.native.collapsed||this.scroll.query(t,Bt.BLOCK))){if(i.start.node!==this.cursor.textNode){const c=this.scroll.find(i.start.node,!1);if(c==null)return;if(c instanceof Cr){const u=c.split(i.start.offset);c.parent.insertBefore(this.cursor,u)}else c.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.scroll.length();t=Math.min(t,i-1),e=Math.min(t+e,i-1)-t;let c,[u,f]=this.scroll.leaf(t);if(u==null)return null;if(e>0&&f===u.length()){const[L]=this.scroll.leaf(t+1);if(L){const[M]=this.scroll.line(t),[N]=this.scroll.line(t+1);M===N&&(u=L,f=0)}}[c,f]=u.position(f,!0);const m=document.createRange();if(e>0)return m.setStart(c,f),[u,f]=this.scroll.leaf(t+e),u==null?null:([c,f]=u.position(f,!0),m.setEnd(c,f),m.getBoundingClientRect());let g="left",y;if(c instanceof Text){if(!c.data.length)return null;f<c.data.length?(m.setStart(c,f),m.setEnd(c,f+1)):(m.setStart(c,f-1),m.setEnd(c,f),g="right"),y=m.getBoundingClientRect()}else{if(!(u.domNode instanceof Element))return null;y=u.domNode.getBoundingClientRect(),f>0&&(g="right")}return{bottom:y.top+y.height,height:y.height,left:y[g],right:y[g],top:y.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(e==null)return null;const i=this.normalizeNative(e);return As.info("getNativeRange",i),i}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Es(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const i=e.map(f=>{const[m,g]=f,y=this.scroll.find(m,!0),L=y.offset(this.scroll);return g===0?L:y instanceof Cr?L+y.index(m,g):L+y.length()}),c=Math.min(Math.max(...i),this.scroll.length()-1),u=Math.min(c,...i);return new On(u,c-u)}normalizeNative(t){if(!Es(this.root,t.startContainer)||!t.collapsed&&!Es(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(i=>{let{node:c,offset:u}=i;for(;!(c instanceof Text)&&c.childNodes.length>0;)if(c.childNodes.length>u)c=c.childNodes[u],u=0;else if(c.childNodes.length===u)c=c.lastChild,c instanceof Text?u=c.data.length:c.childNodes.length>0?u=c.childNodes.length:u=c.childNodes.length+1;else break;i.node=c,i.offset=u}),e}rangeToNative(t){const e=this.scroll.length(),i=(c,u)=>{c=Math.min(e-1,c);const[f,m]=this.scroll.leaf(c);return f?f.position(m,u):[null,-1]};return[...i(t.index,!1),...i(t.index+t.length,!0)]}setNativeRange(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(As.info("setNativeRange",t,e,i,c),t!=null&&(this.root.parentNode==null||t.parentNode==null||i.parentNode==null))return;const f=document.getSelection();if(f!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:m}=this.getNativeRange()||{};if(m==null||u||t!==m.startContainer||e!==m.startOffset||i!==m.endContainer||c!==m.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),i instanceof Element&&i.tagName==="BR"&&(c=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);const g=document.createRange();g.setStart(t,e),g.setEnd(i,c),f.removeAllRanges(),f.addRange(g)}}else f.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_t.sources.API;if(typeof e=="string"&&(i=e,e=!1),As.info("setRange",t),t!=null){const c=this.rangeToNative(t);this.setNativeRange(...c,e)}else this.setNativeRange(null);this.update(i)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_t.sources.USER;const e=this.lastRange,[i,c]=this.getRange();if(this.lastRange=i,this.lastNative=c,this.lastRange!=null&&(this.savedRange=this.lastRange),!fo(e,this.lastRange)){if(!this.composing&&c!=null&&c.native.collapsed&&c.start.node!==this.cursor.textNode){const f=this.cursor.restore();f&&this.setNativeRange(f.startNode,f.startOffset,f.endNode,f.endOffset)}const u=[_t.events.SELECTION_CHANGE,ei(this.lastRange),ei(e),t];this.emitter.emit(_t.events.EDITOR_CHANGE,...u),t!==_t.sources.SILENT&&this.emitter.emit(...u)}}}function Es(o,t){try{t.parentNode}catch{return!1}return o.contains(t)}const xp=/^[ -~]*$/;class Tp{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const i=Cl(t),c=new qt;return Ap(i.ops.slice()).reduce((f,m)=>{const g=Or.Op.length(m);let y=m.attributes||{},L=!1,M=!1;if(m.insert!=null){if(c.retain(g),typeof m.insert=="string"){const _=m.insert;M=!_.endsWith(`
`)&&(e<=f||!!this.scroll.descendant(Wr,f)[0]),this.scroll.insertAt(f,_);const[k,B]=this.scroll.line(f);let $=Sn({},Fr(k));if(k instanceof Tr){const[D]=k.descendant(Cr,B);D&&($=Sn($,Fr(D)))}y=Or.AttributeMap.diff($,y)||{}}else if(typeof m.insert=="object"){const _=Object.keys(m.insert)[0];if(_==null)return f;const k=this.scroll.query(_,Bt.INLINE)!=null;if(k)(e<=f||this.scroll.descendant(Wr,f)[0])&&(M=!0);else if(f>0){const[B,$]=this.scroll.descendant(Cr,f-1);B instanceof rn?B.value()[$]!==`
`&&(L=!0):B instanceof jr&&B.statics.scope===Bt.INLINE_BLOT&&(L=!0)}if(this.scroll.insertAt(f,_,m.insert[_]),k){const[B]=this.scroll.descendant(Cr,f);if(B){const $=Sn({},Fr(B));y=Or.AttributeMap.diff($,y)||{}}}}e+=g}else if(c.push(m),m.retain!==null&&typeof m.retain=="object"){const _=Object.keys(m.retain)[0];if(_==null)return f;this.scroll.updateEmbedAt(f,_,m.retain[_])}Object.keys(y).forEach(_=>{this.scroll.formatAt(f,g,_,y[_])});const N=L?1:0,R=M?1:0;return e+=N+R,c.retain(N),c.delete(R),f+g+N+R},0),c.reduce((f,m)=>typeof m.delete=="number"?(this.scroll.deleteAt(f,m.delete),f):f+Or.Op.length(m),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new qt().retain(t).delete(e))}formatLine(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach(u=>{this.scroll.lines(t,Math.max(e,1)).forEach(f=>{f.format(u,i[u])})}),this.scroll.optimize();const c=new qt().retain(t).retain(e,ei(i));return this.update(c)}formatText(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(i).forEach(u=>{this.scroll.formatAt(t,e,u,i[u])});const c=new qt().retain(t).retain(e,ei(i));return this.update(c)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new qt)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],c=[];e===0?this.scroll.path(t).forEach(m=>{const[g]=m;g instanceof Tr?i.push(g):g instanceof Cr&&c.push(g)}):(i=this.scroll.lines(t,e),c=this.scroll.descendants(Cr,t,e));const[u,f]=[i,c].map(m=>{const g=m.shift();if(g==null)return{};let y=Fr(g);for(;Object.keys(y).length>0;){const L=m.shift();if(L==null)return y;y=Np(Fr(L),y)}return y});return{...u,...f}}getHTML(t,e){const[i,c]=this.scroll.line(t);if(i){const u=i.length();return i.length()>=c+e&&!(c===0&&e===u)?Ai(i,c,e,!0):Ai(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(i=>typeof i.insert=="string").map(i=>i.insert).join("")}insertContents(t,e){const i=Cl(e),c=new qt().retain(t).concat(i);return this.scroll.insertContents(t,i),this.update(c)}insertEmbed(t,e,i){return this.scroll.insertAt(t,e,i),this.update(new qt().retain(t).insert({[e]:i}))}insertText(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(i).forEach(c=>{this.scroll.formatAt(t,e.length,c,i[c])}),this.update(new qt().retain(t).insert(e,ei(i)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==Tr.blotName)return!1;const e=t;return e.children.length>1?!1:e.children.head instanceof sn}removeFormat(t,e){const i=this.getText(t,e),[c,u]=this.scroll.line(t+e);let f=0,m=new qt;c!=null&&(f=c.length()-u,m=c.delta().slice(u,u+f-1).insert(`
`));const y=this.getContents(t,e+f).diff(new qt().insert(i).concat(m)),L=new qt().retain(t).concat(y);return this.applyDelta(L)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const c=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(xp)&&this.scroll.find(e[0].target)){const u=this.scroll.find(e[0].target),f=Fr(u),m=u.offset(this.scroll),g=e[0].oldValue.replace(oi.CONTENTS,""),y=new qt().insert(g),L=new qt().insert(u.value()),M=i&&{oldRange:_l(i.oldRange,-m),newRange:_l(i.newRange,-m)};t=new qt().retain(m).concat(y.diff(L,M)).reduce((R,_)=>_.insert?R.insert(_.insert,f):R.push(_),new qt),this.delta=c.compose(t)}else this.delta=this.getDelta(),(!t||!fo(c.compose(t),this.delta))&&(t=c.diff(this.delta,i));return t}}function Qn(o,t,e){if(o.length===0){const[R]=Cs(e.pop());return t<=0?`</li></${R}>`:`</li></${R}>${Qn([],t-1,e)}`}const[{child:i,offset:c,length:u,indent:f,type:m},...g]=o,[y,L]=Cs(m);if(f>t)return e.push(m),f===t+1?`<${y}><li${L}>${Ai(i,c,u)}${Qn(g,f,e)}`:`<${y}><li>${Qn(o,t+1,e)}`;const M=e[e.length-1];if(f===t&&m===M)return`</li><li${L}>${Ai(i,c,u)}${Qn(g,f,e)}`;const[N]=Cs(e.pop());return`</li></${N}>${Qn(o,t-1,e)}`}function Ai(o,t,e){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in o&&typeof o.html=="function")return o.html(t,e);if(o instanceof rn)return as(o.value().slice(t,t+e)).replaceAll(" ","&nbsp;");if(o instanceof en){if(o.statics.blotName==="list-container"){const y=[];return o.children.forEachAt(t,e,(L,M,N)=>{const R="formats"in L&&typeof L.formats=="function"?L.formats():{};y.push({child:L,offset:M,length:N,indent:R.indent||0,type:R.list})}),Qn(y,-1,[])}const c=[];if(o.children.forEachAt(t,e,(y,L,M)=>{c.push(Ai(y,L,M))}),i||o.statics.blotName==="list")return c.join("");const{outerHTML:u,innerHTML:f}=o.domNode,[m,g]=u.split(`>${f}<`);return m==="<table"?`<table style="border: 1px solid #000;">${c.join("")}<${g}`:`${m}>${c.join("")}<${g}`}return o.domNode instanceof Element?o.domNode.outerHTML:""}function Np(o,t){return Object.keys(t).reduce((e,i)=>{if(o[i]==null)return e;const c=t[i];return c===o[i]?e[i]=c:Array.isArray(c)?c.indexOf(o[i])<0?e[i]=c.concat([o[i]]):e[i]=c:e[i]=[c,o[i]],e},{})}function Cs(o){const t=o==="ordered"?"ol":"ul";switch(o){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function Cl(o){return o.reduce((t,e)=>{if(typeof e.insert=="string"){const i=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(i,e.attributes)}return t.push(e)},new qt)}function _l(o,t){let{index:e,length:i}=o;return new On(e+t,i)}function Ap(o){const t=[];return o.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((c,u)=>{u&&t.push({insert:`
`,attributes:e.attributes}),c&&t.push({insert:c,attributes:e.attributes})}):t.push(e)}),t}class Gr{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}}wt(Gr,"DEFAULTS",{});const Hi="\uFEFF";class mo extends jr{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(i=>{this.contentNode.appendChild(i)}),this.leftGuard=document.createTextNode(Hi),this.rightGuard=document.createTextNode(Hi),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,i;const c=t.data.split(Hi).join("");if(t===this.leftGuard)if(this.prev instanceof rn){const u=this.prev.length();this.prev.insertAt(u,c),e={startNode:this.prev.domNode,startOffset:u+c.length}}else i=document.createTextNode(c),this.parent.insertBefore(this.scroll.create(i),this),e={startNode:i,startOffset:c.length};else t===this.rightGuard&&(this.next instanceof rn?(this.next.insertAt(0,c),e={startNode:this.next.domNode,startOffset:c.length}):(i=document.createTextNode(c),this.parent.insertBefore(this.scroll.create(i),this.next),e={startNode:i,startOffset:c.length}));return t.data=Hi,e}update(t,e){t.forEach(i=>{if(i.type==="characterData"&&(i.target===this.leftGuard||i.target===this.rightGuard)){const c=this.restore(i.target);c&&(e.range=c)}})}}class Ep{constructor(t,e){wt(this,"isComposing",!1);this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof mo)&&(this.emitter.emit(_t.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(_t.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(_t.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(_t.events.COMPOSITION_END,t),this.isComposing=!1}}const vi=class vi{constructor(t,e){wt(this,"modules",{});this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}};wt(vi,"DEFAULTS",{modules:{}}),wt(vi,"themes",{default:vi});let li=vi;const Cp=o=>o.parentElement||o.getRootNode().host||null,_p=o=>{const t=o.getBoundingClientRect(),e="offsetWidth"in o&&Math.abs(t.width)/o.offsetWidth||1,i="offsetHeight"in o&&Math.abs(t.height)/o.offsetHeight||1;return{top:t.top,right:t.left+o.clientWidth*e,bottom:t.top+o.clientHeight*i,left:t.left}},Fi=o=>{const t=parseInt(o,10);return Number.isNaN(t)?0:t},kl=(o,t,e,i,c,u)=>o<e&&t>i?0:o<e?-(e-o+c):t>i?t-o>i-e?o+c-e:t-i+u:0,kp=(o,t)=>{var u,f,m;const e=o.ownerDocument;let i=t,c=o;for(;c;){const g=c===e.body,y=g?{top:0,right:((u=window.visualViewport)==null?void 0:u.width)??e.documentElement.clientWidth,bottom:((f=window.visualViewport)==null?void 0:f.height)??e.documentElement.clientHeight,left:0}:_p(c),L=getComputedStyle(c),M=kl(i.left,i.right,y.left,y.right,Fi(L.scrollPaddingLeft),Fi(L.scrollPaddingRight)),N=kl(i.top,i.bottom,y.top,y.bottom,Fi(L.scrollPaddingTop),Fi(L.scrollPaddingBottom));if(M||N)if(g)(m=e.defaultView)==null||m.scrollBy(M,N);else{const{scrollLeft:R,scrollTop:_}=c;N&&(c.scrollTop+=N),M&&(c.scrollLeft+=M);const k=c.scrollLeft-R,B=c.scrollTop-_;i={left:i.left-k,top:i.top-B,right:i.right-k,bottom:i.bottom-B}}c=g||L.position==="fixed"?null:Cp(c)}},Lp=100,Sp=["block","break","cursor","inline","scroll","text"],qp=(o,t,e)=>{const i=new si;return Sp.forEach(c=>{const u=t.query(c);u&&i.register(u)}),o.forEach(c=>{let u=t.query(c);u||e.error(`Cannot register "${c}" specified in "formats" config. Are you sure it was registered?`);let f=0;for(;u;)if(i.register(u),u="blotName"in u?u.requiredContainer??null:null,f+=1,f>Lp){e.error(`Cycle detected in registering blot requiredContainer: "${c}"`);break}}),i},ni=Nn("quill"),Vi=new si;en.uiClass="ql-ui";const Qr=class Qr{static debug(t){t===!0&&(t="log"),Nn.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Fs.get(t)||Vi.find(t,e)}static import(t){return this.imports[t]==null&&ni.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),i="attrName"in t?t.attrName:t.blotName;typeof i=="string"?this.register(`formats/${i}`,t,e):Object.keys(t).forEach(c=>{this.register(c,t[c],e)})}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],i=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!i&&ni.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&Vi.register(e),typeof e.register=="function"&&e.register(Vi)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Op(t,e),this.container=this.options.container,this.container==null){ni.error("Invalid Quill container",t);return}this.options.debug&&Qr.debug(this.options.debug);const i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Fs.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new _t;const c=go.blotName,u=this.options.registry.query(c);if(!u||!("blotName"in u))throw new Error(`Cannot initialize Quill without "${c}" blot`);if(this.scroll=new u(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Tp(this.scroll),this.selection=new wp(this.scroll,this.emitter),this.composition=new Ep(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(_t.events.EDITOR_CHANGE,f=>{f===_t.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(_t.events.SCROLL_UPDATE,(f,m)=>{const g=this.selection.lastRange,[y]=this.selection.getRange(),L=g&&y?{oldRange:g,newRange:y}:void 0;Xr.call(this,()=>this.editor.update(null,m,L),f)}),this.emitter.on(_t.events.SCROLL_EMBED_UPDATE,(f,m)=>{const g=this.selection.lastRange,[y]=this.selection.getRange(),L=g&&y?{oldRange:g,newRange:y}:void 0;Xr.call(this,()=>{const M=new qt().retain(f.offset(this)).retain({[f.statics.blotName]:m});return this.editor.update(M,[],L)},Qr.sources.USER)}),i){const f=this.clipboard.convert({html:`${i}<p><br></p>`,text:`
`});this.setContents(f)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const i=t;t=document.createElement("div"),t.classList.add(i)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,i){return[t,e,,i]=vn(t,e,i),Xr.call(this,()=>this.editor.deleteText(t,e),i,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_t.sources.API;return Xr.call(this,()=>{const c=this.getSelection(!0);let u=new qt;if(c==null)return u;if(this.scroll.query(t,Bt.BLOCK))u=this.editor.formatLine(c.index,c.length,{[t]:e});else{if(c.length===0)return this.selection.format(t,e),u;u=this.editor.formatText(c.index,c.length,{[t]:e})}return this.setSelection(c,_t.sources.SILENT),u},i)}formatLine(t,e,i,c,u){let f;return[t,e,f,u]=vn(t,e,i,c,u),Xr.call(this,()=>this.editor.formatLine(t,e,f),u,t,0)}formatText(t,e,i,c,u){let f;return[t,e,f,u]=vn(t,e,i,c,u),Xr.call(this,()=>this.editor.formatText(t,e,f),u,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=null;if(typeof t=="number"?i=this.selection.getBounds(t,e):i=this.selection.getBounds(t.index,t.length),!i)return null;const c=this.container.getBoundingClientRect();return{bottom:i.bottom-c.top,height:i.height,left:i.left-c.left,right:i.right-c.left,top:i.top-c.top,width:i.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=vn(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=vn(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=vn(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,i){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Qr.sources.API;return Xr.call(this,()=>this.editor.insertEmbed(t,e,i),c,t)}insertText(t,e,i,c,u){let f;return[t,,f,u]=vn(t,0,i,c,u),Xr.call(this,()=>this.editor.insertText(t,e,f),u,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,i){return[t,e,,i]=vn(t,e,i),Xr.call(this,()=>this.editor.removeFormat(t,e),i,t)}scrollRectIntoView(t){kp(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_t.sources.API;return Xr.call(this,()=>{t=new qt(t);const i=this.getLength(),c=this.editor.deleteText(0,i),u=this.editor.insertContents(0,t),f=this.editor.deleteText(this.getLength()-1,1);return c.compose(u).compose(f)},e)}setSelection(t,e,i){t==null?this.selection.setRange(null,e||Qr.sources.API):([t,e,,i]=vn(t,e,i),this.selection.setRange(new On(Math.max(0,t),e),i),i!==_t.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_t.sources.API;const i=new qt().insert(t);return this.setContents(i,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_t.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_t.sources.API;return Xr.call(this,()=>(t=new qt(t),this.editor.applyDelta(t)),e,!0)}};wt(Qr,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Vi,theme:"default"}),wt(Qr,"events",_t.events),wt(Qr,"sources",_t.sources),wt(Qr,"version","2.0.3"),wt(Qr,"imports",{delta:qt,parchment:ka,"core/module":Gr,"core/theme":li});let tt=Qr;function Ll(o){return typeof o=="string"?document.querySelector(o):o}function _s(o){return Object.entries(o??{}).reduce((t,e)=>{let[i,c]=e;return{...t,[i]:c===!0?{}:c}},{})}function Sl(o){return Object.fromEntries(Object.entries(o).filter(t=>t[1]!==void 0))}function Op(o,t){const e=Ll(o);if(!e)throw new Error("Invalid Quill container");const c=!t.theme||t.theme===tt.DEFAULTS.theme?li:tt.import(`themes/${t.theme}`);if(!c)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:u,...f}=tt.DEFAULTS,{modules:m,...g}=c.DEFAULTS;let y=_s(t.modules);y!=null&&y.toolbar&&y.toolbar.constructor!==Object&&(y={...y,toolbar:{container:y.toolbar}});const L=Sn({},_s(u),_s(m),y),M={...f,...Sl(g),...Sl(t)};let N=t.registry;return N?t.formats&&ni.warn('Ignoring "formats" option because "registry" is specified'):N=t.formats?qp(t.formats,M.registry,ni):M.registry,{...M,registry:N,container:e,theme:c,modules:Object.entries(L).reduce((R,_)=>{let[k,B]=_;if(!B)return R;const $=tt.import(`modules/${k}`);return $==null?(ni.error(`Cannot load ${k} module. Are you sure you registered it?`),R):{...R,[k]:Sn({},$.DEFAULTS||{},B)}},{}),bounds:Ll(M.bounds)}}function Xr(o,t,e,i){if(!this.isEnabled()&&t===_t.sources.USER&&!this.allowReadOnlyEdits)return new qt;let c=e==null?null:this.getSelection();const u=this.editor.delta,f=o();if(c!=null&&(e===!0&&(e=c.index),i==null?c=ql(c,f,t):i!==0&&(c=ql(c,e,i,t)),this.setSelection(c,_t.sources.SILENT)),f.length()>0){const m=[_t.events.TEXT_CHANGE,f,u,t];this.emitter.emit(_t.events.EDITOR_CHANGE,...m),t!==_t.sources.SILENT&&this.emitter.emit(...m)}return f}function vn(o,t,e,i,c){let u={};return typeof o.index=="number"&&typeof o.length=="number"?typeof t!="number"?(c=i,i=e,e=t,t=o.length,o=o.index):(t=o.length,o=o.index):typeof t!="number"&&(c=i,i=e,e=t,t=0),typeof e=="object"?(u=e,c=i):typeof e=="string"&&(i!=null?u[e]=i:c=e),c=c||_t.sources.API,[o,t,u,c]}function ql(o,t,e,i){const c=typeof e=="number"?e:0;if(o==null)return null;let u,f;return t&&typeof t.transformPosition=="function"?[u,f]=[o.index,o.index+o.length].map(m=>t.transformPosition(m,i!==_t.sources.USER)):[u,f]=[o.index,o.index+o.length].map(m=>m<t||m===t&&i===_t.sources.USER?m:c>=0?m+c:Math.max(t,m+c)),new On(u,f-u)}class $n extends ls{}function Ol(o){return o instanceof Tr||o instanceof Wr}function Rl(o){return typeof o.updateContent=="function"}class Jn extends go{constructor(t,e,i){let{emitter:c}=i;super(t,e),this.emitter=c,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",u=>this.handleDragStart(u))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(_t.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(_t.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(_t.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[i,c]=this.line(t),[u]=this.line(t+e);if(super.deleteAt(t,e),u!=null&&i!==u&&c>0){if(i instanceof Wr||u instanceof Wr){this.optimize();return}const f=u.children.head instanceof sn?null:u.children.head;i.moveChildren(u,f),i.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,i,c){super.formatAt(t,e,i,c),this.optimize()}insertAt(t,e,i){if(t>=this.length())if(i==null||this.scroll.query(e,Bt.BLOCK)==null){const c=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(c),i==null&&e.endsWith(`
`)?c.insertAt(0,e.slice(0,-1),i):c.insertAt(0,e,i)}else{const c=this.scroll.create(e,i);this.appendChild(c)}else super.insertAt(t,e,i);this.optimize()}insertBefore(t,e){if(t.statics.scope===Bt.INLINE_BLOT){const i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(t),super.insertBefore(i,e)}else super.insertBefore(t,e)}insertContents(t,e){const i=this.deltaToRenderBlocks(e.concat(new qt().insert(`
`))),c=i.pop();if(c==null)return;this.batchStart();const u=i.shift();if(u){const g=u.type==="block"&&(u.delta.length()===0||!this.descendant(Wr,t)[0]&&t<this.length()),y=u.type==="block"?u.delta:new qt().insert({[u.key]:u.value});ks(this,t,y);const L=u.type==="block"?1:0,M=t+y.length()+L;g&&this.insertAt(M-1,`
`);const N=Fr(this.line(t)[0]),R=Or.AttributeMap.diff(N,u.attributes)||{};Object.keys(R).forEach(_=>{this.formatAt(M-1,1,_,R[_])}),t=M}let[f,m]=this.children.find(t);if(i.length&&(f&&(f=f.split(m),m=0),i.forEach(g=>{if(g.type==="block"){const y=this.createBlock(g.attributes,f||void 0);ks(y,0,g.delta)}else{const y=this.create(g.key,g.value);this.insertBefore(y,f||void 0),Object.keys(g.attributes).forEach(L=>{y.format(L,g.attributes[L])})}})),c.type==="block"&&c.delta.length()){const g=f?f.offset(f.scroll)+m:this.length();ks(this,g,c.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[i,c]=e;return i instanceof Cr?[i,c]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(Ol,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const i=(c,u,f)=>{let m=[],g=f;return c.children.forEachAt(u,f,(y,L,M)=>{Ol(y)?m.push(y):y instanceof ls&&(m=m.concat(i(y,L,g))),g-=M}),m};return i(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(_t.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=_t.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(i=>{let{target:c}=i;const u=this.find(c,!0);return u&&!Rl(u)}),t.length>0&&this.emitter.emit(_t.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(_t.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,i){const[c]=this.descendant(u=>u instanceof Wr,t);c&&c.statics.blotName===e&&Rl(c)&&c.updateContent(i)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let i=new qt;return t.forEach(c=>{const u=c==null?void 0:c.insert;if(u)if(typeof u=="string"){const f=u.split(`
`);f.slice(0,-1).forEach(g=>{i.insert(g,c.attributes),e.push({type:"block",delta:i,attributes:c.attributes??{}}),i=new qt});const m=f[f.length-1];m&&i.insert(m,c.attributes)}else{const f=Object.keys(u)[0];if(!f)return;this.query(f,Bt.INLINE)?i.push(c):(i.length()&&e.push({type:"block",delta:i,attributes:{}}),i=new qt,e.push({type:"blockEmbed",key:f,value:u[f],attributes:c.attributes??{}}))}}),i.length()&&e.push({type:"block",delta:i,attributes:{}}),e}createBlock(t,e){let i;const c={};Object.entries(t).forEach(m=>{let[g,y]=m;this.query(g,Bt.BLOCK&Bt.BLOT)!=null?i=g:c[g]=y});const u=this.create(i||this.statics.defaultChild.blotName,i?t[i]:void 0);this.insertBefore(u,e||void 0);const f=u.length();return Object.entries(c).forEach(m=>{let[g,y]=m;u.formatAt(0,f,g,y)}),u}}wt(Jn,"blotName","scroll"),wt(Jn,"className","ql-editor"),wt(Jn,"tagName","DIV"),wt(Jn,"defaultChild",Tr),wt(Jn,"allowedChildren",[Tr,Wr,$n]);function ks(o,t,e){e.reduce((i,c)=>{const u=Or.Op.length(c);let f=c.attributes||{};if(c.insert!=null){if(typeof c.insert=="string"){const m=c.insert;o.insertAt(i,m);const[g]=o.descendant(Cr,i),y=Fr(g);f=Or.AttributeMap.diff(y,f)||{}}else if(typeof c.insert=="object"){const m=Object.keys(c.insert)[0];if(m==null)return i;if(o.insertAt(i,m,c.insert[m]),o.scroll.query(m,Bt.INLINE)!=null){const[y]=o.descendant(Cr,i),L=Fr(y);f=Or.AttributeMap.diff(L,f)||{}}}}return Object.keys(f).forEach(m=>{o.formatAt(i,u,m,f[m])}),i+u},t)}const bo={scope:Bt.BLOCK,whitelist:["right","center","justify"]},Rp=new dn("align","align",bo),Ma=new nn("align","ql-align",bo),Ia=new Mn("align","text-align",bo);class ja extends Mn{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(c=>`00${parseInt(c,10).toString(16)}`.slice(-2)).join("")}`):e}}const Mp=new nn("color","ql-color",{scope:Bt.INLINE}),vo=new ja("color","color",{scope:Bt.INLINE}),Ip=new nn("background","ql-bg",{scope:Bt.INLINE}),yo=new ja("background","background-color",{scope:Bt.INLINE});class Un extends $n{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(i=>i.length()<=1?"":i.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${as(this.code(t,e))}
</pre>`}}class _r extends Tr{static register(){tt.register(Un)}}wt(_r,"TAB","  ");class wo extends fn{}wo.blotName="code";wo.tagName="CODE";_r.blotName="code-block";_r.className="ql-code-block";_r.tagName="DIV";Un.blotName="code-block-container";Un.className="ql-code-block-container";Un.tagName="DIV";Un.allowedChildren=[_r];_r.allowedChildren=[rn,sn,oi];_r.requiredContainer=Un;const xo={scope:Bt.BLOCK,whitelist:["rtl"]},Ba=new dn("direction","dir",xo),Pa=new nn("direction","ql-direction",xo),Da=new Mn("direction","direction",xo),za={scope:Bt.INLINE,whitelist:["serif","monospace"]},$a=new nn("font","ql-font",za);class jp extends Mn{value(t){return super.value(t).replace(/["']/g,"")}}const Ua=new jp("font","font-family",za),Ha=new nn("size","ql-size",{scope:Bt.INLINE,whitelist:["small","large","huge"]}),Fa=new Mn("size","font-size",{scope:Bt.INLINE,whitelist:["10px","18px","32px"]}),Bp=Nn("quill:keyboard"),Pp=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class cs extends Gr{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(i=>!!e[i]!==t[i]&&e[i]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(i=>{this.options.bindings[i]&&this.addBinding(this.options.bindings[i])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=zp(t);if(c==null){Bp.warn("Attempted to add invalid keyboard binding",c);return}typeof e=="function"&&(e={handler:e}),typeof i=="function"&&(i={handler:i}),(Array.isArray(c.key)?c.key:[c.key]).forEach(f=>{const m={...c,key:f,...e,...i};this.bindings[m.key]=this.bindings[m.key]||[],this.bindings[m.key].push(m)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const c=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter($=>cs.match(t,$));if(c.length===0)return;const u=tt.find(t.target,!0);if(u&&u.scroll!==this.quill.scroll)return;const f=this.quill.getSelection();if(f==null||!this.quill.hasFocus())return;const[m,g]=this.quill.getLine(f.index),[y,L]=this.quill.getLeaf(f.index),[M,N]=f.length===0?[y,L]:this.quill.getLeaf(f.index+f.length),R=y instanceof es?y.value().slice(0,L):"",_=M instanceof es?M.value().slice(N):"",k={collapsed:f.length===0,empty:f.length===0&&m.length()<=1,format:this.quill.getFormat(f),line:m,offset:g,prefix:R,suffix:_,event:t};c.some($=>{if($.collapsed!=null&&$.collapsed!==k.collapsed||$.empty!=null&&$.empty!==k.empty||$.offset!=null&&$.offset!==k.offset)return!1;if(Array.isArray($.format)){if($.format.every(D=>k.format[D]==null))return!1}else if(typeof $.format=="object"&&!Object.keys($.format).every(D=>$.format[D]===!0?k.format[D]!=null:$.format[D]===!1?k.format[D]==null:fo($.format[D],k.format[D])))return!1;return $.prefix!=null&&!$.prefix.test(k.prefix)||$.suffix!=null&&!$.suffix.test(k.suffix)?!1:$.handler.call(this,f,k,$)!==!0})&&t.preventDefault()})}handleBackspace(t,e){const i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let c={};const[u]=this.quill.getLine(t.index);let f=new qt().retain(t.index-i).delete(i);if(e.offset===0){const[m]=this.quill.getLine(t.index-1);if(m&&!(m.statics.blotName==="block"&&m.length()<=1)){const y=u.formats(),L=this.quill.getFormat(t.index-1,1);if(c=Or.AttributeMap.diff(y,L)||{},Object.keys(c).length>0){const M=new qt().retain(t.index+u.length()-2).retain(1,c);f=f.compose(M)}}}this.quill.updateContents(f,tt.sources.USER),this.quill.focus()}handleDelete(t,e){const i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-i)return;let c={};const[u]=this.quill.getLine(t.index);let f=new qt().retain(t.index).delete(i);if(e.offset>=u.length()-1){const[m]=this.quill.getLine(t.index+1);if(m){const g=u.formats(),y=this.quill.getFormat(t.index,1);c=Or.AttributeMap.diff(g,y)||{},Object.keys(c).length>0&&(f=f.retain(m.length()-1).retain(1,c))}}this.quill.updateContents(f,tt.sources.USER),this.quill.focus()}handleDeleteRange(t){To({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const i=Object.keys(e.format).reduce((u,f)=>(this.quill.scroll.query(f,Bt.BLOCK)&&!Array.isArray(e.format[f])&&(u[f]=e.format[f]),u),{}),c=new qt().retain(t.index).delete(t.length).insert(`
`,i);this.quill.updateContents(c,tt.sources.USER),this.quill.setSelection(t.index+1,tt.sources.SILENT),this.quill.focus()}}const Dp={bindings:{bold:Ls("bold"),italic:Ls("italic"),underline:Ls("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(o,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",tt.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(o,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",tt.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(o,t){t.format.indent!=null?this.quill.format("indent","-1",tt.sources.USER):t.format.list!=null&&this.quill.format("list",!1,tt.sources.USER)}},"indent code-block":Ml(!0),"outdent code-block":Ml(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(o){this.quill.deleteText(o.index-1,1,tt.sources.USER)}},tab:{key:"Tab",handler(o,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=new qt().retain(o.index).delete(o.length).insert("	");return this.quill.updateContents(e,tt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(o.index+1,tt.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,tt.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(o,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(o.index,o.length,e,tt.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(o){const[t,e]=this.quill.getLine(o.index),i={...t.formats(),list:"checked"},c=new qt().retain(o.index).insert(`
`,i).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(c,tt.sources.USER),this.quill.setSelection(o.index+1,tt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(o,t){const[e,i]=this.quill.getLine(o.index),c=new qt().retain(o.index).insert(`
`,t.format).retain(e.length()-i-1).retain(1,{header:null});this.quill.updateContents(c,tt.sources.USER),this.quill.setSelection(o.index+1,tt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(o){const t=this.quill.getModule("table");if(t){const[e,i,c,u]=t.getTable(o),f=$p(e,i,c,u);if(f==null)return;let m=e.offset();if(f<0){const g=new qt().retain(m).insert(`
`);this.quill.updateContents(g,tt.sources.USER),this.quill.setSelection(o.index+1,o.length,tt.sources.SILENT)}else if(f>0){m+=e.length();const g=new qt().retain(m).insert(`
`);this.quill.updateContents(g,tt.sources.USER),this.quill.setSelection(m,tt.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(o,t){const{event:e,line:i}=t,c=i.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(c-1,tt.sources.USER):this.quill.setSelection(c+i.length(),tt.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(o,t){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=t.prefix,[i,c]=this.quill.getLine(o.index);if(c>e)return!0;let u;switch(t.prefix.trim()){case"[]":case"[ ]":u="unchecked";break;case"[x]":u="checked";break;case"-":case"*":u="bullet";break;default:u="ordered"}this.quill.insertText(o.index," ",tt.sources.USER),this.quill.history.cutoff();const f=new qt().retain(o.index-c).delete(e+1).retain(i.length()-2-c).retain(1,{list:u});return this.quill.updateContents(f,tt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(o.index-e,tt.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(o){const[t,e]=this.quill.getLine(o.index);let i=2,c=t;for(;c!=null&&c.length()<=1&&c.formats()["code-block"];)if(c=c.prev,i-=1,i<=0){const u=new qt().retain(o.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(u,tt.sources.USER),this.quill.setSelection(o.index-1,tt.sources.SILENT),!1}return!0}},"embed left":Wi("ArrowLeft",!1),"embed left shift":Wi("ArrowLeft",!0),"embed right":Wi("ArrowRight",!1),"embed right shift":Wi("ArrowRight",!0),"table down":Il(!1),"table up":Il(!0)}};cs.DEFAULTS=Dp;function Ml(o){return{key:"Tab",shiftKey:!o,format:{"code-block":!0},handler(t,e){let{event:i}=e;const c=this.quill.scroll.query("code-block"),{TAB:u}=c;if(t.length===0&&!i.shiftKey){this.quill.insertText(t.index,u,tt.sources.USER),this.quill.setSelection(t.index+u.length,tt.sources.SILENT);return}const f=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:m,length:g}=t;f.forEach((y,L)=>{o?(y.insertAt(0,u),L===0?m+=u.length:g+=u.length):y.domNode.textContent.startsWith(u)&&(y.deleteAt(0,u.length),L===0?m-=u.length:g-=u.length)}),this.quill.update(tt.sources.USER),this.quill.setSelection(m,g,tt.sources.SILENT)}}}function Wi(o,t){return{key:o,shiftKey:t,altKey:null,[o==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(i){let{index:c}=i;o==="ArrowRight"&&(c+=i.length+1);const[u]=this.quill.getLeaf(c);return u instanceof jr?(o==="ArrowLeft"?t?this.quill.setSelection(i.index-1,i.length+1,tt.sources.USER):this.quill.setSelection(i.index-1,tt.sources.USER):t?this.quill.setSelection(i.index,i.length+1,tt.sources.USER):this.quill.setSelection(i.index+i.length+1,tt.sources.USER),!1):!0}}}function Ls(o){return{key:o[0],shortKey:!0,handler(t,e){this.quill.format(o,!e.format[o],tt.sources.USER)}}}function Il(o){return{key:o?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const i=o?"prev":"next",c=e.line,u=c.parent[i];if(u!=null){if(u.statics.blotName==="table-row"){let f=u.children.head,m=c;for(;m.prev!=null;)m=m.prev,f=f.next;const g=f.offset(this.quill.scroll)+Math.min(e.offset,f.length()-1);this.quill.setSelection(g,0,tt.sources.USER)}}else{const f=c.table()[i];f!=null&&(o?this.quill.setSelection(f.offset(this.quill.scroll)+f.length()-1,0,tt.sources.USER):this.quill.setSelection(f.offset(this.quill.scroll),0,tt.sources.USER))}return!1}}}function zp(o){if(typeof o=="string"||typeof o=="number")o={key:o};else if(typeof o=="object")o=ei(o);else return null;return o.shortKey&&(o[Pp]=o.shortKey,delete o.shortKey),o}function To(o){let{quill:t,range:e}=o;const i=t.getLines(e);let c={};if(i.length>1){const u=i[0].formats(),f=i[i.length-1].formats();c=Or.AttributeMap.diff(f,u)||{}}t.deleteText(e,tt.sources.USER),Object.keys(c).length>0&&t.formatLine(e.index,1,c,tt.sources.USER),t.setSelection(e.index,tt.sources.SILENT)}function $p(o,t,e,i){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?i===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const Up=/font-weight:\s*normal/,Hp=["P","OL","UL"],jl=o=>o&&Hp.includes(o.tagName),Fp=o=>{Array.from(o.querySelectorAll("br")).filter(t=>jl(t.previousElementSibling)&&jl(t.nextElementSibling)).forEach(t=>{var e;(e=t.parentNode)==null||e.removeChild(t)})},Vp=o=>{Array.from(o.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return(e=t.getAttribute("style"))==null?void 0:e.match(Up)}).forEach(t=>{var i;const e=o.createDocumentFragment();e.append(...t.childNodes),(i=t.parentNode)==null||i.replaceChild(e,t)})};function Wp(o){o.querySelector('[id^="docs-internal-guid-"]')&&(Vp(o),Fp(o))}const Gp=/\bmso-list:[^;]*ignore/i,Kp=/\bmso-list:[^;]*\bl(\d+)/i,Zp=/\bmso-list:[^;]*\blevel(\d+)/i,Yp=(o,t)=>{const e=o.getAttribute("style"),i=e==null?void 0:e.match(Kp);if(!i)return null;const c=Number(i[1]),u=e==null?void 0:e.match(Zp),f=u?Number(u[1]):1,m=new RegExp(`@list l${c}:level${f}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),g=t.match(m),y=g&&g[1]==="bullet"?"bullet":"ordered";return{id:c,indent:f,type:y,element:o}},Xp=o=>{var f,m;const t=Array.from(o.querySelectorAll("[style*=mso-list]")),e=[],i=[];t.forEach(g=>{(g.getAttribute("style")||"").match(Gp)?e.push(g):i.push(g)}),e.forEach(g=>{var y;return(y=g.parentNode)==null?void 0:y.removeChild(g)});const c=o.documentElement.innerHTML,u=i.map(g=>Yp(g,c)).filter(g=>g);for(;u.length;){const g=[];let y=u.shift();for(;y;)g.push(y),y=u.length&&((f=u[0])==null?void 0:f.element)===y.element.nextElementSibling&&u[0].id===y.id?u.shift():null;const L=document.createElement("ul");g.forEach(R=>{const _=document.createElement("li");_.setAttribute("data-list",R.type),R.indent>1&&_.setAttribute("class",`ql-indent-${R.indent-1}`),_.innerHTML=R.element.innerHTML,L.appendChild(_)});const M=(m=g[0])==null?void 0:m.element,{parentNode:N}=M??{};M&&(N==null||N.replaceChild(L,M)),g.slice(1).forEach(R=>{let{element:_}=R;N==null||N.removeChild(_)})}};function Qp(o){o.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Xp(o)}const Jp=[Qp,Wp],tg=o=>{o.documentElement&&Jp.forEach(t=>{t(o)})},eg=Nn("quill:clipboard"),rg=[[Node.TEXT_NODE,pg],[Node.TEXT_NODE,Pl],["br",lg],[Node.ELEMENT_NODE,Pl],[Node.ELEMENT_NODE,og],[Node.ELEMENT_NODE,sg],[Node.ELEMENT_NODE,dg],["li",ug],["ol, ul",hg],["pre",ag],["tr",fg],["b",Ss("bold")],["i",Ss("italic")],["strike",Ss("strike")],["style",cg]],ng=[Rp,Ba].reduce((o,t)=>(o[t.keyName]=t,o),{}),Bl=[Ia,yo,vo,Da,Ua,Fa].reduce((o,t)=>(o[t.keyName]=t,o),{});class Va extends Gr{constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",i=>this.onCaptureCopy(i,!1)),this.quill.root.addEventListener("cut",i=>this.onCaptureCopy(i,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],rg.concat(this.options.matchers??[]).forEach(i=>{let[c,u]=i;this.addMatcher(c,u)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:i}=t,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(c[_r.blotName])return new qt().insert(i||"",{[_r.blotName]:c[_r.blotName]});if(!e)return new qt().insert(i||"",c);const u=this.convertHTML(e);return Si(u,`
`)&&(u.ops[u.ops.length-1].attributes==null||c.table)?u.compose(new qt().retain(u.length()-1).delete(1)):u}normalizeHTML(t){tg(t)}convertHTML(t){const e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);const i=e.body,c=new WeakMap,[u,f]=this.prepareMatching(i,c);return No(this.quill.scroll,i,u,f,c)}dangerouslyPasteHTML(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tt.sources.API;if(typeof t=="string"){const c=this.convert({html:t,text:""});this.quill.setContents(c,e),this.quill.setSelection(0,tt.sources.SILENT)}else{const c=this.convert({html:e,text:""});this.quill.updateContents(new qt().retain(t).concat(c),i),this.quill.setSelection(t+c.length(),tt.sources.SILENT)}}onCaptureCopy(t){var f,m;let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[i]=this.quill.selection.getRange();if(i==null)return;const{html:c,text:u}=this.onCopy(i,e);(f=t.clipboardData)==null||f.setData("text/plain",u),(m=t.clipboardData)==null||m.setData("text/html",c),e&&To({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){var f,m,g,y,L;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const i=(f=t.clipboardData)==null?void 0:f.getData("text/html");let c=(m=t.clipboardData)==null?void 0:m.getData("text/plain");if(!i&&!c){const M=(g=t.clipboardData)==null?void 0:g.getData("text/uri-list");M&&(c=this.normalizeURIList(M))}const u=Array.from(((y=t.clipboardData)==null?void 0:y.files)||[]);if(!i&&u.length>0){this.quill.uploader.upload(e,u);return}if(i&&u.length>0){const M=new DOMParser().parseFromString(i,"text/html");if(M.body.childElementCount===1&&((L=M.body.firstElementChild)==null?void 0:L.tagName)==="IMG"){this.quill.uploader.upload(e,u);return}}this.onPaste(e,{html:i,text:c})}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:i,html:c}=e;const u=this.quill.getFormat(t.index),f=this.convert({text:i,html:c},u);eg.log("onPaste",f,{text:i,html:c});const m=new qt().retain(t.index).delete(t.length).concat(f);this.quill.updateContents(m,tt.sources.USER),this.quill.setSelection(m.length()-t.length,tt.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const i=[],c=[];return this.matchers.forEach(u=>{const[f,m]=u;switch(f){case Node.TEXT_NODE:c.push(m);break;case Node.ELEMENT_NODE:i.push(m);break;default:Array.from(t.querySelectorAll(f)).forEach(g=>{if(e.has(g)){const y=e.get(g);y==null||y.push(m)}else e.set(g,[m])});break}}),[i,c]}}wt(Va,"DEFAULTS",{matchers:[]});function Hn(o,t,e,i){return i.query(t)?o.reduce((c,u)=>{if(!u.insert)return c;if(u.attributes&&u.attributes[t])return c.push(u);const f=e?{[t]:e}:{};return c.insert(u.insert,{...f,...u.attributes})},new qt):o}function Si(o,t){let e="";for(let i=o.ops.length-1;i>=0&&e.length<t.length;--i){const c=o.ops[i];if(typeof c.insert!="string")break;e=c.insert+e}return e.slice(-1*t.length)===t}function kn(o,t){if(!(o instanceof Element))return!1;const e=t.query(o);return e&&e.prototype instanceof jr?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(o.tagName.toLowerCase())}function ig(o,t){return o.previousElementSibling&&o.nextElementSibling&&!kn(o.previousElementSibling,t)&&!kn(o.nextElementSibling,t)}const Gi=new WeakMap;function Wa(o){return o==null?!1:(Gi.has(o)||(o.tagName==="PRE"?Gi.set(o,!0):Gi.set(o,Wa(o.parentNode))),Gi.get(o))}function No(o,t,e,i,c){return t.nodeType===t.TEXT_NODE?i.reduce((u,f)=>f(t,u,o),new qt):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((u,f)=>{let m=No(o,f,e,i,c);return f.nodeType===t.ELEMENT_NODE&&(m=e.reduce((g,y)=>y(f,g,o),m),m=(c.get(f)||[]).reduce((g,y)=>y(f,g,o),m)),u.concat(m)},new qt):new qt}function Ss(o){return(t,e,i)=>Hn(e,o,!0,i)}function sg(o,t,e){const i=dn.keys(o),c=nn.keys(o),u=Mn.keys(o),f={};return i.concat(c).concat(u).forEach(m=>{let g=e.query(m,Bt.ATTRIBUTE);g!=null&&(f[g.attrName]=g.value(o),f[g.attrName])||(g=ng[m],g!=null&&(g.attrName===m||g.keyName===m)&&(f[g.attrName]=g.value(o)||void 0),g=Bl[m],g!=null&&(g.attrName===m||g.keyName===m)&&(g=Bl[m],f[g.attrName]=g.value(o)||void 0))}),Object.entries(f).reduce((m,g)=>{let[y,L]=g;return Hn(m,y,L,e)},t)}function og(o,t,e){const i=e.query(o);if(i==null)return t;if(i.prototype instanceof jr){const c={},u=i.value(o);if(u!=null)return c[i.blotName]=u,new qt().insert(c,i.formats(o,e))}else if(i.prototype instanceof Ni&&!Si(t,`
`)&&t.insert(`
`),"blotName"in i&&"formats"in i&&typeof i.formats=="function")return Hn(t,i.blotName,i.formats(o,e),e);return t}function lg(o,t){return Si(t,`
`)||t.insert(`
`),t}function ag(o,t,e){const i=e.query("code-block"),c=i&&"formats"in i&&typeof i.formats=="function"?i.formats(o,e):!0;return Hn(t,"code-block",c,e)}function cg(){return new qt}function ug(o,t,e){const i=e.query(o);if(i==null||i.blotName!=="list"||!Si(t,`
`))return t;let c=-1,u=o.parentNode;for(;u!=null;)["OL","UL"].includes(u.tagName)&&(c+=1),u=u.parentNode;return c<=0?t:t.reduce((f,m)=>m.insert?m.attributes&&typeof m.attributes.indent=="number"?f.push(m):f.insert(m.insert,{indent:c,...m.attributes||{}}):f,new qt)}function hg(o,t,e){const i=o;let c=i.tagName==="OL"?"ordered":"bullet";const u=i.getAttribute("data-checked");return u&&(c=u==="true"?"checked":"unchecked"),Hn(t,"list",c,e)}function Pl(o,t,e){if(!Si(t,`
`)){if(kn(o,e)&&(o.childNodes.length>0||o instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&o.nextSibling){let i=o.nextSibling;for(;i!=null;){if(kn(i,e))return t.insert(`
`);const c=e.query(i);if(c&&c.prototype instanceof Wr)return t.insert(`
`);i=i.firstChild}}}return t}function dg(o,t,e){var u;const i={},c=o.style||{};return c.fontStyle==="italic"&&(i.italic=!0),c.textDecoration==="underline"&&(i.underline=!0),c.textDecoration==="line-through"&&(i.strike=!0),((u=c.fontWeight)!=null&&u.startsWith("bold")||parseInt(c.fontWeight,10)>=700)&&(i.bold=!0),t=Object.entries(i).reduce((f,m)=>{let[g,y]=m;return Hn(f,g,y,e)},t),parseFloat(c.textIndent||0)>0?new qt().insert("	").concat(t):t}function fg(o,t,e){var c,u;const i=((c=o.parentElement)==null?void 0:c.tagName)==="TABLE"?o.parentElement:(u=o.parentElement)==null?void 0:u.parentElement;if(i!=null){const m=Array.from(i.querySelectorAll("tr")).indexOf(o)+1;return Hn(t,"table",m,e)}return t}function pg(o,t,e){var c;let i=o.data;if(((c=o.parentElement)==null?void 0:c.tagName)==="O:P")return t.insert(i.trim());if(!Wa(o)){if(i.trim().length===0&&i.includes(`
`)&&!ig(o,e))return t;i=i.replace(/[^\S\u00a0]/g," "),i=i.replace(/ {2,}/g," "),(o.previousSibling==null&&o.parentElement!=null&&kn(o.parentElement,e)||o.previousSibling instanceof Element&&kn(o.previousSibling,e))&&(i=i.replace(/^ /,"")),(o.nextSibling==null&&o.parentElement!=null&&kn(o.parentElement,e)||o.nextSibling instanceof Element&&kn(o.nextSibling,e))&&(i=i.replace(/ $/,"")),i=i.replaceAll(" "," ")}return t.insert(i)}class Ga extends Gr{constructor(e,i){super(e,i);wt(this,"lastRecorded",0);wt(this,"ignoreChange",!1);wt(this,"stack",{undo:[],redo:[]});wt(this,"currentRange",null);this.quill.on(tt.events.EDITOR_CHANGE,(c,u,f,m)=>{c===tt.events.SELECTION_CHANGE?u&&m!==tt.sources.SILENT&&(this.currentRange=u):c===tt.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||m===tt.sources.USER?this.record(u,f):this.transform(u)),this.currentRange=Gs(this.currentRange,u))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",c=>{c.inputType==="historyUndo"?(this.undo(),c.preventDefault()):c.inputType==="historyRedo"&&(this.redo(),c.preventDefault())})}change(e,i){if(this.stack[e].length===0)return;const c=this.stack[e].pop();if(!c)return;const u=this.quill.getContents(),f=c.delta.invert(u);this.stack[i].push({delta:f,range:Gs(c.range,f)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(c.delta,tt.sources.USER),this.ignoreChange=!1,this.restoreSelection(c)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,i){if(e.ops.length===0)return;this.stack.redo=[];let c=e.invert(i),u=this.currentRange;const f=Date.now();if(this.lastRecorded+this.options.delay>f&&this.stack.undo.length>0){const m=this.stack.undo.pop();m&&(c=c.compose(m.delta),u=m.range)}else this.lastRecorded=f;c.length()!==0&&(this.stack.undo.push({delta:c,range:u}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){Dl(this.stack.undo,e),Dl(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,tt.sources.USER);else{const i=mg(this.quill.scroll,e.delta);this.quill.setSelection(i,tt.sources.USER)}}}wt(Ga,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Dl(o,t){let e=t;for(let i=o.length-1;i>=0;i-=1){const c=o[i];o[i]={delta:e.transform(c.delta,!0),range:c.range&&Gs(c.range,e)},e=c.delta.transform(e),o[i].delta.length()===0&&o.splice(i,1)}}function gg(o,t){const e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(i=>o.query(i,Bt.BLOCK)!=null):!1}function mg(o,t){const e=t.reduce((c,u)=>c+(u.delete||0),0);let i=t.length()-e;return gg(o,t)&&(i-=1),i}function Gs(o,t){if(!o)return o;const e=t.transformPosition(o.index),i=t.transformPosition(o.index+o.length);return{index:e,length:i-e}}class Ka extends Gr{constructor(t,e){super(t,e),t.root.addEventListener("drop",i=>{var f;i.preventDefault();let c=null;if(document.caretRangeFromPoint)c=document.caretRangeFromPoint(i.clientX,i.clientY);else if(document.caretPositionFromPoint){const m=document.caretPositionFromPoint(i.clientX,i.clientY);c=document.createRange(),c.setStart(m.offsetNode,m.offset),c.setEnd(m.offsetNode,m.offset)}const u=c&&t.selection.normalizeNative(c);if(u){const m=t.selection.normalizedToRange(u);(f=i.dataTransfer)!=null&&f.files&&this.upload(m,i.dataTransfer.files)}})}upload(t,e){const i=[];Array.from(e).forEach(c=>{var u;c&&((u=this.options.mimetypes)!=null&&u.includes(c.type))&&i.push(c)}),i.length>0&&this.options.handler.call(this,t,i)}}Ka.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(o,t){if(!this.quill.scroll.query("image"))return;const e=t.map(i=>new Promise(c=>{const u=new FileReader;u.onload=()=>{c(u.result)},u.readAsDataURL(i)}));Promise.all(e).then(i=>{const c=i.reduce((u,f)=>u.insert({image:f}),new qt().retain(o.index).delete(o.length));this.quill.updateContents(c,_t.sources.USER),this.quill.setSelection(o.index+i.length,_t.sources.SILENT)})}};const bg=["insertText","insertReplacementText"];class vg extends Gr{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",i=>{this.handleBeforeInput(i)}),/Android/i.test(navigator.userAgent)||t.on(tt.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){To({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){const i=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new qt().retain(t.index).insert(e,i),tt.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,tt.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!bg.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const i=yg(t);if(i==null)return;const c=this.quill.selection.normalizeNative(e),u=c?this.quill.selection.normalizedToRange(c):null;u&&this.replaceText(u,i)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function yg(o){var t;return typeof o.data=="string"?o.data:(t=o.dataTransfer)!=null&&t.types.includes("text/plain")?o.dataTransfer.getData("text/plain"):null}const wg=/Mac/i.test(navigator.platform),xg=100,Tg=o=>!!(o.key==="ArrowLeft"||o.key==="ArrowRight"||o.key==="ArrowUp"||o.key==="ArrowDown"||o.key==="Home"||wg&&o.key==="a"&&o.ctrlKey===!0);class Ng extends Gr{constructor(e,i){super(e,i);wt(this,"isListening",!1);wt(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,i){let{line:c,event:u}=i;if(!(c instanceof en)||!c.uiNode)return!0;const f=getComputedStyle(c.domNode).direction==="rtl";return f&&u.key!=="ArrowRight"||!f&&u.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(u.shiftKey?1:0),tt.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&Tg(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+xg,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const i=e.getRangeAt(0);if(i.collapsed!==!0||i.startOffset!==0)return;const c=this.quill.scroll.find(i.startContainer);if(!(c instanceof en)||!c.uiNode)return;const u=document.createRange();u.setStartAfter(c.uiNode),u.setEndAfter(c.uiNode),e.removeAllRanges(),e.addRange(u)}}tt.register({"blots/block":Tr,"blots/block/embed":Wr,"blots/break":sn,"blots/container":$n,"blots/cursor":oi,"blots/embed":mo,"blots/inline":fn,"blots/scroll":Jn,"blots/text":rn,"modules/clipboard":Va,"modules/history":Ga,"modules/keyboard":cs,"modules/uploader":Ka,"modules/input":vg,"modules/uiNode":Ng});class Ag extends nn{add(t,e){let i=0;if(e==="+1"||e==="-1"){const c=this.value(t)||0;i=e==="+1"?c+1:c-1}else typeof e=="number"&&(i=e);return i===0?(this.remove(t),!0):super.add(t,i.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}const Eg=new Ag("indent","ql-indent",{scope:Bt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Ks extends Tr{}wt(Ks,"blotName","blockquote"),wt(Ks,"tagName","blockquote");class Zs extends Tr{static formats(t){return this.tagName.indexOf(t.tagName)+1}}wt(Zs,"blotName","header"),wt(Zs,"tagName",["H1","H2","H3","H4","H5","H6"]);class qi extends $n{}qi.blotName="list-container";qi.tagName="OL";class Oi extends Tr{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){tt.register(qi)}constructor(t,e){super(t,e);const i=e.ownerDocument.createElement("span"),c=u=>{if(!t.isEnabled())return;const f=this.statics.formats(e,t);f==="checked"?(this.format("list","unchecked"),u.preventDefault()):f==="unchecked"&&(this.format("list","checked"),u.preventDefault())};i.addEventListener("mousedown",c),i.addEventListener("touchstart",c),this.attachUI(i)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}Oi.blotName="list";Oi.tagName="LI";qi.allowedChildren=[Oi];Oi.requiredContainer=qi;class Ei extends fn{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}wt(Ei,"blotName","bold"),wt(Ei,"tagName",["STRONG","B"]);class Ys extends Ei{}wt(Ys,"blotName","italic"),wt(Ys,"tagName",["EM","I"]);class Ln extends fn{static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return Za(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}wt(Ln,"blotName","link"),wt(Ln,"tagName","A"),wt(Ln,"SANITIZED_URL","about:blank"),wt(Ln,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function Za(o,t){const e=document.createElement("a");e.href=o;const i=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(i)>-1}class Xs extends fn{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}wt(Xs,"blotName","script"),wt(Xs,"tagName",["SUB","SUP"]);class Qs extends Ei{}wt(Qs,"blotName","strike"),wt(Qs,"tagName",["S","STRIKE"]);class Js extends fn{}wt(Js,"blotName","underline"),wt(Js,"tagName","U");class Zi extends mo{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}wt(Zi,"blotName","formula"),wt(Zi,"className","ql-formula"),wt(Zi,"tagName","SPAN");const zl=["alt","height","width"];class to extends jr{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return zl.reduce((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return Za(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){zl.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}}wt(to,"blotName","image"),wt(to,"tagName","IMG");const $l=["height","width"];class Yi extends Wr{static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return $l.reduce((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e),{})}static sanitize(t){return Ln.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){$l.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}wt(Yi,"blotName","video"),wt(Yi,"className","ql-video"),wt(Yi,"tagName","IFRAME");const gi=new nn("code-token","hljs",{scope:Bt.INLINE});class wn extends fn{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(_r.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,i){super(t,e,i),gi.add(this.domNode,i)}format(t,e){t!==wn.blotName?super.format(t,e):e?gi.add(this.domNode,e):(gi.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),gi.value(this.domNode)||this.unwrap()}}wn.blotName="code-token";wn.className="ql-token";class Vr extends _r{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),wn.blotName,!1),super.replaceWith(t,e)}}class bi extends Un{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===Vr.blotName&&(this.forceNext=!0,this.children.forEach(i=>{i.format(t,e)}))}formatAt(t,e,i,c){i===Vr.blotName&&(this.forceNext=!0),super.formatAt(t,e,i,c)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const c=`${Array.from(this.domNode.childNodes).filter(f=>f!==this.uiNode).map(f=>f.textContent).join(`
`)}
`,u=Vr.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==c){if(c.trim().length>0||this.cachedText==null){const f=this.children.reduce((g,y)=>g.concat(Oa(y,!1)),new qt),m=t(c,u);f.diff(m).reduce((g,y)=>{let{retain:L,attributes:M}=y;return L?(M&&Object.keys(M).forEach(N=>{[Vr.blotName,wn.blotName].includes(N)&&this.formatAt(g,L,N,M[N])}),g+L):g},0)}this.cachedText=c,this.forceNext=!1}}html(t,e){const[i]=this.children.find(t);return`<pre data-language="${i?Vr.formats(i.domNode):"plain"}">
${as(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=Vr.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}bi.allowedChildren=[Vr];Vr.requiredContainer=bi;Vr.allowedChildren=[wn,oi,rn,sn];const Cg=(o,t,e)=>{if(typeof o.versionString=="string"){const i=o.versionString.split(".")[0];if(parseInt(i,10)>=11)return o.highlight(e,{language:t}).value}return o.highlight(t,e).value};class Ya extends Gr{static register(){tt.register(wn,!0),tt.register(Vr,!0),tt.register(bi,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((i,c)=>{let{key:u}=c;return i[u]=!0,i},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(tt.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof bi))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(i=>{let{key:c,label:u}=i;const f=e.ownerDocument.createElement("option");f.textContent=u,f.setAttribute("value",c),e.appendChild(f)}),e.addEventListener("change",()=>{t.format(Vr.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=Vr.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(tt.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(tt.sources.USER);const i=this.quill.getSelection();(t==null?this.quill.scroll.descendants(bi):[t]).forEach(u=>{u.highlight(this.highlightBlot,e)}),this.quill.update(tt.sources.SILENT),i!=null&&this.quill.setSelection(i,tt.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return as(t).split(`
`).reduce((c,u,f)=>(f!==0&&c.insert(`
`,{[_r.blotName]:e}),c.insert(u)),new qt);const i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(_r.className),i.innerHTML=Cg(this.options.hljs,e,t),No(this.quill.scroll,i,[(c,u)=>{const f=gi.value(c);return f?u.compose(new qt().retain(u.length(),{[wn.blotName]:f})):u}],[(c,u)=>c.data.split(`
`).reduce((f,m,g)=>(g!==0&&f.insert(`
`,{[_r.blotName]:e}),f.insert(m)),u)],new WeakMap)}}Ya.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const yi=class yi extends Tr{static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",Ao()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===yi.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};wt(yi,"blotName","table"),wt(yi,"tagName","TD");let tn=yi;class xn extends $n{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),e=this.children.tail.formats(),i=this.next.children.head.formats(),c=this.next.children.tail.formats();return t.table===e.table&&t.table===i.table&&t.table===c.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;const i=e.formats(),c=e.next.formats();if(i.table!==c.table){const u=this.splitAfter(e);u&&u.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}wt(xn,"blotName","table-row"),wt(xn,"tagName","TR");class hn extends $n{}wt(hn,"blotName","table-body"),wt(hn,"tagName","TBODY");class ai extends $n{balanceCells(){const t=this.descendants(xn),e=t.reduce((i,c)=>Math.max(c.children.length,i),0);t.forEach(i=>{new Array(e-i.children.length).fill(0).forEach(()=>{let c;i.children.head!=null&&(c=tn.formats(i.children.head.domNode));const u=this.scroll.create(tn.blotName,c);i.appendChild(u),u.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){const[e]=this.descendant(hn);e==null||e.children.head==null||e.children.forEach(i=>{const c=i.children.at(t);c!=null&&c.remove()})}insertColumn(t){const[e]=this.descendant(hn);e==null||e.children.head==null||e.children.forEach(i=>{const c=i.children.at(t),u=tn.formats(i.children.head.domNode),f=this.scroll.create(tn.blotName,u);i.insertBefore(f,c)})}insertRow(t){const[e]=this.descendant(hn);if(e==null||e.children.head==null)return;const i=Ao(),c=this.scroll.create(xn.blotName);e.children.head.children.forEach(()=>{const f=this.scroll.create(tn.blotName,i);c.appendChild(f)});const u=e.children.at(t);e.insertBefore(c,u)}rows(){const t=this.children.head;return t==null?[]:t.children.map(e=>e)}}wt(ai,"blotName","table-container"),wt(ai,"tagName","TABLE");ai.allowedChildren=[hn];hn.requiredContainer=ai;hn.allowedChildren=[xn];xn.requiredContainer=hn;xn.allowedChildren=[tn];tn.requiredContainer=xn;function Ao(){return`row-${Math.random().toString(36).slice(2,6)}`}class _g extends Gr{static register(){tt.register(tn),tt.register(xn),tt.register(hn),tt.register(ai)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(ai).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(tt.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(tt.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const e=t.offset();t.remove(),this.quill.update(tt.sources.USER),this.quill.setSelection(e,tt.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[e,i]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==tn.blotName)return[null,null,null,-1];const c=e.parent;return[c.parent.parent,c,e,i]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[i,c,u]=this.getTable(e);if(u==null)return;const f=u.cellOffset();i.insertColumn(f+t),this.quill.update(tt.sources.USER);let m=c.rowOffset();t===0&&(m+=1),this.quill.setSelection(e.index+m,e.length,tt.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[i,c,u]=this.getTable(e);if(u==null)return;const f=c.rowOffset();i.insertRow(f+t),this.quill.update(tt.sources.USER),t>0?this.quill.setSelection(e,tt.sources.SILENT):this.quill.setSelection(e.index+c.children.length,e.length,tt.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const i=this.quill.getSelection();if(i==null)return;const c=new Array(t).fill(0).reduce(u=>{const f=new Array(e).fill(`
`).join("");return u.insert(f,{table:Ao()})},new qt().retain(i.index));this.quill.updateContents(c,tt.sources.USER),this.quill.setSelection(i.index,tt.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(tt.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(tt.events.TEXT_CHANGE,(i,c,u)=>{u===tt.sources.USER&&this.balanceTables()}),!0):!1)})}}const Ul=Nn("quill:toolbar");class Eo extends Gr{constructor(t,e){var i,c;if(super(t,e),Array.isArray(this.options.container)){const u=document.createElement("div");u.setAttribute("role","toolbar"),kg(u,this.options.container),(c=(i=t.container)==null?void 0:i.parentNode)==null||c.insertBefore(u,t.container),this.container=u}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Ul.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(u=>{var m;const f=(m=this.options.handlers)==null?void 0:m[u];f&&this.addHandler(u,f)}),Array.from(this.container.querySelectorAll("button, select")).forEach(u=>{this.attach(u)}),this.quill.on(tt.events.EDITOR_CHANGE,()=>{const[u]=this.quill.selection.getRange();this.update(u)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(c=>c.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){Ul.warn("ignoring attaching to nonexistent format",e,t);return}const i=t.tagName==="SELECT"?"change":"click";t.addEventListener(i,c=>{let u;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const m=t.options[t.selectedIndex];m.hasAttribute("selected")?u=!1:u=m.value||!1}else t.classList.contains("ql-active")?u=!1:u=t.value||!t.hasAttribute("value"),c.preventDefault();this.quill.focus();const[f]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,u);else if(this.quill.scroll.query(e).prototype instanceof jr){if(u=prompt(`Enter ${e}`),!u)return;this.quill.updateContents(new qt().retain(f.index).delete(f.length).insert({[e]:u}),tt.sources.USER)}else this.quill.format(e,u,tt.sources.USER);this.update(f)}),this.controls.push([e,t])}update(t){const e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(i=>{const[c,u]=i;if(u.tagName==="SELECT"){let f=null;if(t==null)f=null;else if(e[c]==null)f=u.querySelector("option[selected]");else if(!Array.isArray(e[c])){let m=e[c];typeof m=="string"&&(m=m.replace(/"/g,'\\"')),f=u.querySelector(`option[value="${m}"]`)}f==null?(u.value="",u.selectedIndex=-1):f.selected=!0}else if(t==null)u.classList.remove("ql-active"),u.setAttribute("aria-pressed","false");else if(u.hasAttribute("value")){const f=e[c],m=f===u.getAttribute("value")||f!=null&&f.toString()===u.getAttribute("value")||f==null&&!u.getAttribute("value");u.classList.toggle("ql-active",m),u.setAttribute("aria-pressed",m.toString())}else{const f=e[c]!=null;u.classList.toggle("ql-active",f),u.setAttribute("aria-pressed",f.toString())}})}}Eo.DEFAULTS={};function Hl(o,t,e){const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${t}`),i.setAttribute("aria-pressed","false"),e!=null?(i.value=e,i.setAttribute("aria-label",`${t}: ${e}`)):i.setAttribute("aria-label",t),o.appendChild(i)}function kg(o,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const i=document.createElement("span");i.classList.add("ql-formats"),e.forEach(c=>{if(typeof c=="string")Hl(i,c);else{const u=Object.keys(c)[0],f=c[u];Array.isArray(f)?Lg(i,u,f):Hl(i,u,f)}}),o.appendChild(i)})}function Lg(o,t,e){const i=document.createElement("select");i.classList.add(`ql-${t}`),e.forEach(c=>{const u=document.createElement("option");c!==!1?u.setAttribute("value",String(c)):u.setAttribute("selected","selected"),i.appendChild(u)}),o.appendChild(i)}Eo.DEFAULTS={container:null,handlers:{clean(){const o=this.quill.getSelection();if(o!=null)if(o.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,Bt.INLINE)!=null&&this.quill.format(e,!1,tt.sources.USER)})}else this.quill.removeFormat(o.index,o.length,tt.sources.USER)},direction(o){const{align:t}=this.quill.getFormat();o==="rtl"&&t==null?this.quill.format("align","right",tt.sources.USER):!o&&t==="right"&&this.quill.format("align",!1,tt.sources.USER),this.quill.format("direction",o,tt.sources.USER)},indent(o){const t=this.quill.getSelection(),e=this.quill.getFormat(t),i=parseInt(e.indent||0,10);if(o==="+1"||o==="-1"){let c=o==="+1"?1:-1;e.direction==="rtl"&&(c*=-1),this.quill.format("indent",i+c,tt.sources.USER)}},link(o){o===!0&&(o=prompt("Enter link URL:")),this.quill.format("link",o,tt.sources.USER)},list(o){const t=this.quill.getSelection(),e=this.quill.getFormat(t);o==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,tt.sources.USER):this.quill.format("list","unchecked",tt.sources.USER):this.quill.format("list",o,tt.sources.USER)}}};const Sg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',qg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',Og='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',Rg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',Mg='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Ig='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',jg='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',Bg='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Fl='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Pg='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',Dg='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',zg='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',$g='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',Ug='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',Hg='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Fg='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Vg='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Wg='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Gg='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',Kg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Zg='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Yg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Xg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Qg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Jg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',t1='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',e1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',r1='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',n1='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',i1='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',s1='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',o1='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',l1='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Ci={align:{"":Sg,center:qg,right:Og,justify:Rg},background:Mg,blockquote:Ig,bold:jg,clean:Bg,code:Fl,"code-block":Fl,color:Pg,direction:{"":Dg,rtl:zg},formula:$g,header:{1:Ug,2:Hg,3:Fg,4:Vg,5:Wg,6:Gg},italic:Kg,image:Zg,indent:{"+1":Yg,"-1":Xg},link:Qg,list:{bullet:Jg,check:t1,ordered:e1},script:{sub:r1,super:n1},strike:i1,table:s1,underline:o1,video:l1},a1='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Vl=0;function Wl(o,t){o.setAttribute(t,`${o.getAttribute(t)!=="true"}`)}class us{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Wl(this.label,"aria-expanded"),Wl(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const i=t.getAttribute("value");return i&&e.setAttribute("data-value",i),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",c=>{switch(c.key){case"Enter":this.selectItem(e,!0),c.preventDefault();break;case"Escape":this.escape(),c.preventDefault();break}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=a1,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${Vl}`,Vl+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const i=this.buildItem(e);t.appendChild(i),e.selected===!0&&this.selectItem(i)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this.container.querySelector(".ql-selected");t!==i&&(i!=null&&i.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const i=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(i)}else this.selectItem(null);const e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class Xa extends us{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(i=>{i.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const i=this.label.querySelector(".ql-color-label"),c=t&&t.getAttribute("data-value")||"";i&&(i.tagName==="line"?i.style.stroke=c:i.style.fill=c)}}class Qa extends us{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(i=>{i.innerHTML=e[i.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const i=t||this.defaultItem;if(i!=null){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}}const c1=o=>{const{overflowY:t}=getComputedStyle(o,null);return t!=="visible"&&t!=="clip"};class Ja{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,c1(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");const c=this.boundsContainer.getBoundingClientRect(),u=this.root.getBoundingClientRect();let f=0;if(u.right>c.right&&(f=c.right-u.right,this.root.style.left=`${e+f}px`),u.left<c.left&&(f=c.left-u.left,this.root.style.left=`${e+f}px`),u.bottom>c.bottom){const m=u.bottom-u.top,g=t.bottom-t.top+m;this.root.style.top=`${i-g}px`,this.root.classList.add("ql-flip")}return f}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const u1=[!1,"center","right","justify"],h1=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],d1=[!1,"serif","monospace"],f1=["1","2","3",!1],p1=["small",!1,"large","huge"];class Ri extends li{constructor(t,e){super(t,e);const i=c=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",i);return}this.tooltip!=null&&!this.tooltip.root.contains(c.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(u=>{u.container.contains(c.target)||u.close()})};t.emitter.listenDOM("click",document.body,i)}addModule(t){const e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(i=>{(i.getAttribute("class")||"").split(/\s+/).forEach(u=>{if(u.startsWith("ql-")&&(u=u.slice(3),e[u]!=null))if(u==="direction")i.innerHTML=e[u][""]+e[u].rtl;else if(typeof e[u]=="string")i.innerHTML=e[u];else{const f=i.value||"";f!=null&&e[u][f]&&(i.innerHTML=e[u][f])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(c=>{if(c.classList.contains("ql-align")&&(c.querySelector("option")==null&&di(c,u1),typeof e.align=="object"))return new Qa(c,e.align);if(c.classList.contains("ql-background")||c.classList.contains("ql-color")){const u=c.classList.contains("ql-background")?"background":"color";return c.querySelector("option")==null&&di(c,h1,u==="background"?"#ffffff":"#000000"),new Xa(c,e[u])}return c.querySelector("option")==null&&(c.classList.contains("ql-font")?di(c,d1):c.classList.contains("ql-header")?di(c,f1):c.classList.contains("ql-size")&&di(c,p1)),new us(c)});const i=()=>{this.pickers.forEach(c=>{c.update()})};this.quill.on(_t.events.EDITOR_CHANGE,i)}}Ri.DEFAULTS=Sn({},li.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let o=this.container.querySelector("input.ql-image[type=file]");o==null&&(o=document.createElement("input"),o.setAttribute("type","file"),o.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),o.classList.add("ql-image"),o.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,o.files),o.value=""}),this.container.appendChild(o)),o.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class tc extends Ja{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const i=this.quill.getBounds(this.quill.selection.savedRange);i!=null&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,_t.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,_t.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=g1(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(e!=null){const i=e.index+e.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,_t.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(i+1," ",_t.sources.USER),this.quill.setSelection(i+2,_t.sources.USER)}break}}this.textbox.value="",this.hide()}}function g1(o){let t=o.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||o.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=o.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:o}function di(o,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(i=>{const c=document.createElement("option");i===e?c.setAttribute("selected","selected"):c.setAttribute("value",String(i)),o.appendChild(c)})}const m1=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class ec extends tc{constructor(t,e){super(t,e),this.quill.on(_t.events.EDITOR_CHANGE,(i,c,u,f)=>{if(i===_t.events.SELECTION_CHANGE)if(c!=null&&c.length>0&&f===_t.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const m=this.quill.getLines(c.index,c.length);if(m.length===1){const g=this.quill.getBounds(c);g!=null&&this.position(g)}else{const g=m[m.length-1],y=this.quill.getIndex(g),L=Math.min(g.length()-1,c.index+c.length-y),M=this.quill.getBounds(new On(y,L));M!=null&&this.position(M)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(_t.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){const e=super.position(t),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",e!==0&&(i.style.marginLeft=`${-1*e-i.offsetWidth/2}px`),e}}wt(ec,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class rc extends Ri{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=m1),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new ec(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Ci),this.buildPickers(t.container.querySelectorAll("select"),Ci))}}rc.DEFAULTS=Sn({},Ri.DEFAULTS,{modules:{toolbar:{handlers:{link(o){o?this.quill.theme.tooltip.edit():this.quill.format("link",!1,tt.sources.USER)}}}}});const b1=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class nc extends tc{constructor(){super(...arguments);wt(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const i=this.linkRange;this.restoreFocus(),this.quill.formatText(i,"link",!1,_t.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(_t.events.SELECTION_CHANGE,(e,i,c)=>{if(e!=null){if(e.length===0&&c===_t.sources.USER){const[u,f]=this.quill.scroll.descendant(Ln,e.index);if(u!=null){this.linkRange=new On(e.index-f,u.length());const m=Ln.formats(u.domNode);this.preview.textContent=m,this.preview.setAttribute("href",m),this.show();const g=this.quill.getBounds(this.linkRange);g!=null&&this.position(g);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}wt(nc,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class ic extends Ri{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=b1),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Ci),this.buildPickers(t.container.querySelectorAll("select"),Ci),this.tooltip=new nc(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,i)=>{t.handlers.link.call(t,!i.format.link)}))}}ic.DEFAULTS=Sn({},Ri.DEFAULTS,{modules:{toolbar:{handlers:{link(o){if(o){const t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:i}=this.quill.theme;i.edit("link",e)}else this.quill.format("link",!1,tt.sources.USER)}}}}});tt.register({"attributors/attribute/direction":Ba,"attributors/class/align":Ma,"attributors/class/background":Ip,"attributors/class/color":Mp,"attributors/class/direction":Pa,"attributors/class/font":$a,"attributors/class/size":Ha,"attributors/style/align":Ia,"attributors/style/background":yo,"attributors/style/color":vo,"attributors/style/direction":Da,"attributors/style/font":Ua,"attributors/style/size":Fa},!0);tt.register({"formats/align":Ma,"formats/direction":Pa,"formats/indent":Eg,"formats/background":yo,"formats/color":vo,"formats/font":$a,"formats/size":Ha,"formats/blockquote":Ks,"formats/code-block":_r,"formats/header":Zs,"formats/list":Oi,"formats/bold":Ei,"formats/code":wo,"formats/italic":Ys,"formats/link":Ln,"formats/script":Xs,"formats/strike":Qs,"formats/underline":Js,"formats/formula":Zi,"formats/image":to,"formats/video":Yi,"modules/syntax":Ya,"modules/table":_g,"modules/toolbar":Eo,"themes/bubble":rc,"themes/snow":ic,"ui/icons":Ci,"ui/picker":us,"ui/icon-picker":Qa,"ui/color-picker":Xa,"ui/tooltip":Ja},!0);const v1=Object.freeze(Object.defineProperty({__proto__:null,AttributeMap:Or.AttributeMap,Delta:qt,Module:Gr,Op:Or.Op,OpIterator:Or.OpIterator,Parchment:ka,Range:On,default:tt},Symbol.toStringTag,{value:"Module"}));var Xi={exports:{}},y1=Xi.exports,Gl;function w1(){return Gl||(Gl=1,function(o,t){(function(e,i){o.exports=i()})(y1,function(){function e(_){if(!(typeof window>"u")){var k=document.createElement("style");return k.setAttribute("media","screen"),k.innerHTML=_,document.head.appendChild(k),_}}/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var i=function(_,k){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var D in $)$.hasOwnProperty(D)&&(B[D]=$[D])},i(_,k)};function c(_,k){i(_,k);function B(){this.constructor=_}_.prototype=k===null?Object.create(k):(B.prototype=k.prototype,new B)}var u=function(){return u=Object.assign||function(k){for(var B,$=1,D=arguments.length;$<D;$++){B=arguments[$];for(var et in B)Object.prototype.hasOwnProperty.call(B,et)&&(k[et]=B[et])}return k},u.apply(this,arguments)};e(`#editor-resizer {
  position: absolute;
  border: 1px dashed #fff;
  background-color: rgba(0, 0, 0, 0.5);
}
#editor-resizer .handler {
  position: absolute;
  right: -5px;
  bottom: -5px;
  width: 10px;
  height: 10px;
  border: 1px solid #333;
  background-color: rgba(255, 255, 255, 0.8);
  cursor: nwse-resize;
  user-select: none;
}
#editor-resizer .toolbar {
  position: absolute;
  top: -5em;
  left: 50%;
  padding: 0.5em;
  border: 1px solid #fff;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
  transform: translateX(-50%);
  width: 20em;
}
#editor-resizer .toolbar .group {
  display: flex;
  border: 1px solid #aaa;
  border-radius: 6px;
  white-space: nowrap;
  text-align: center;
  line-height: 2;
  color: rgba(0, 0, 0, 0.65);
}
#editor-resizer .toolbar .group:not(:first-child) {
  margin-top: 0.5em;
}
#editor-resizer .toolbar .group .btn {
  flex: 1 0 0;
  text-align: center;
  width: 25%;
  padding: 0 0.5rem;
  display: inline-block;
  vertical-align: top;
  user-select: none;
  color: inherit;
}
#editor-resizer .toolbar .group .btn:not(:last-child) {
  border-right: 1px solid #bbb;
}
#editor-resizer .toolbar .group .btn:not(.btn-group):active {
  background-color: rgba(0, 0, 0, 0.1);
}
#editor-resizer .toolbar .group .input-wrapper {
  width: 25%;
  border: 1px solid #eee;
  position: relative;
  border-right: 1px solid #bbb;
  min-width: 4em;
}
#editor-resizer .toolbar .group .input-wrapper::after {
  content: " ";
  position: absolute;
  height: 1px;
  background-color: #333;
  left: 0.5em;
  right: 1em;
  bottom: 0.2em;
}
#editor-resizer .toolbar .group .input-wrapper input {
  color: inherit;
  text-align: center;
  width: 100%;
  border: none;
  outline: none;
  padding: 0 0.5em;
  padding-right: 1.5em;
}
#editor-resizer .toolbar .group .input-wrapper input:focus ~ .tooltip {
  display: block;
}
#editor-resizer .toolbar .group .input-wrapper .suffix {
  position: absolute;
  right: 0.5em;
}
#editor-resizer .toolbar .group .input-wrapper .tooltip {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  font-size: small;
  background-color: #fff;
  box-shadow: 0 0 3px #a7a7a7;
  padding: 0 0.6em;
  border-radius: 5px;
  zoom: 0.85;
}
`);var f=function(){function _(k){this.config=u(u({},m),k)}return _.prototype.findLabel=function(k){return this.config?Reflect.get(this.config,k):null},_}(),m={floatLeft:"left",floatRight:"right",center:"center",restore:"restore",altTip:"Press and hold alt to lock ratio!",inputTip:"Press enter key to apply change!"};function g(_){for(var k=[],B=1;B<arguments.length;B++)k[B-1]=arguments[B];return _.replace(/\{(\d+)\}/g,function($,D){return k.length>D?k[D]:""})}(function(_){c(k,_);function k(){var B=_!==null&&_.apply(this,arguments)||this;return B.originSize=null,B}return k})(HTMLElement);var y=`
<div class="handler" title="{0}"></div>
<div class="toolbar">
  <div class="group">
    <a class="btn" data-type="width" data-styles="width:100%">100%</a>
    <a class="btn" data-type="width" data-styles="width:50%">50%</a>
    <span class="input-wrapper"><input data-type="width" maxlength="3" /><span class="suffix">%</span><span class="tooltip">{5}</span></span>
    <a class="btn" data-type="width" data-styles="width:auto">{4}</a>
  </div>
  <div class="group">
    <a class="btn" data-type="align" data-styles="float:left">{1}</a>
    <a class="btn" data-type="align" data-styles="display:block;margin:auto;">{2}</a>
    <a class="btn" data-type="align" data-styles="float:right;">{3}</a>
    <a class="btn" data-type="align" data-styles="">{4}</a>
  </div>
</div>
`,L=function(){function _(k,B,$,D){this.resizer=null,this.startResizePosition=null,this.i18n=new f((D==null?void 0:D.locale)||m),this.options=D,this.resizeTarget=k,k.originSize||(k.originSize={width:k.clientWidth,height:k.clientHeight}),this.editor=$,this.container=B,this.initResizer(),this.positionResizerToTarget(k),this.resizing=this.resizing.bind(this),this.endResize=this.endResize.bind(this),this.startResize=this.startResize.bind(this),this.toolbarClick=this.toolbarClick.bind(this),this.toolbarInputChange=this.toolbarInputChange.bind(this),this.onScroll=this.onScroll.bind(this),this.bindEvents()}return _.prototype.initResizer=function(){var k=this.container.querySelector("#editor-resizer");k||(k=document.createElement("div"),k.setAttribute("id","editor-resizer"),k.innerHTML=g(y,this.i18n.findLabel("altTip"),this.i18n.findLabel("floatLeft"),this.i18n.findLabel("center"),this.i18n.findLabel("floatRight"),this.i18n.findLabel("restore"),this.i18n.findLabel("inputTip")),this.container.appendChild(k)),this.resizer=k},_.prototype.positionResizerToTarget=function(k){this.resizer!==null&&(this.resizer.style.setProperty("left",k.offsetLeft+"px"),this.resizer.style.setProperty("top",k.offsetTop-this.editor.scrollTop+"px"),this.resizer.style.setProperty("width",k.clientWidth+"px"),this.resizer.style.setProperty("height",k.clientHeight+"px"))},_.prototype.bindEvents=function(){this.resizer!==null&&(this.resizer.addEventListener("mousedown",this.startResize),this.resizer.addEventListener("click",this.toolbarClick),this.resizer.addEventListener("change",this.toolbarInputChange)),window.addEventListener("mouseup",this.endResize),window.addEventListener("mousemove",this.resizing),this.editor.addEventListener("scroll",this.onScroll)},_.prototype.onScroll=function(){this.positionResizerToTarget(this.resizeTarget)},_.prototype._setStylesForToolbar=function(k,B){var $,D="_styles_"+k,et=this.resizeTarget.style,U=this.resizeTarget[D];et.cssText=et.cssText.replaceAll(" ","").replace(U,"")+(";"+B),this.resizeTarget[D]=B,this.positionResizerToTarget(this.resizeTarget),($=this.options)===null||$===void 0||$.onChange(this.resizeTarget)},_.prototype.toolbarInputChange=function(k){var B,$=k.target,D=(B=$==null?void 0:$.dataset)===null||B===void 0?void 0:B.type,et=$.value;D&&Number(et)&&this._setStylesForToolbar(D,"width: "+Number(et)+"%;")},_.prototype.toolbarClick=function(k){var B,$,D=k.target,et=(B=D==null?void 0:D.dataset)===null||B===void 0?void 0:B.type;et&&D.classList.contains("btn")&&this._setStylesForToolbar(et,($=D==null?void 0:D.dataset)===null||$===void 0?void 0:$.styles)},_.prototype.startResize=function(k){var B=k.target;B.classList.contains("handler")&&k.which===1&&(this.startResizePosition={left:k.clientX,top:k.clientY,width:this.resizeTarget.clientWidth,height:this.resizeTarget.clientHeight})},_.prototype.endResize=function(){var k;this.startResizePosition=null,(k=this.options)===null||k===void 0||k.onChange(this.resizeTarget)},_.prototype.resizing=function(k){if(this.startResizePosition){var B=k.clientX-this.startResizePosition.left,$=k.clientY-this.startResizePosition.top,D=this.startResizePosition.width,et=this.startResizePosition.height;if(D+=B,et+=$,k.altKey){var U=this.resizeTarget.originSize,F=U.height/U.width;et=F*D}this.resizeTarget.style.setProperty("width",Math.max(D,30)+"px"),this.resizeTarget.style.setProperty("height",Math.max(et,30)+"px"),this.positionResizerToTarget(this.resizeTarget)}},_.prototype.destory=function(){this.container.removeChild(this.resizer),window.removeEventListener("mouseup",this.endResize),window.removeEventListener("mousemove",this.resizing),this.editor.removeEventListener("scroll",this.onScroll),this.resizer=null},_}(),M=function(){function _(k,B){this.element=k,this.cb=B,this.hasTracked=!1}return _}(),N=function(){function _(){}return _.track=function(k,B){this.iframes.push(new M(k,B)),this.interval||(this.interval=setInterval(function(){_.checkClick()},this.resolution))},_.checkClick=function(){if(document.activeElement){var k=document.activeElement;for(var B in this.iframes)k===this.iframes[B].element?this.iframes[B].hasTracked==!1&&(this.iframes[B].cb.apply(window,[]),this.iframes[B].hasTracked=!0):this.iframes[B].hasTracked=!1}},_.resolution=200,_.iframes=[],_.interval=null,_}();function R(_,k){var B=_.root,$,D;function et(){var U=_.getContents().constructor,F=new U().retain(1);_.updateContents(F)}B.addEventListener("click",function(U){var F=U.target;U.target&&["img","video"].includes(F.tagName.toLowerCase())&&($=F,D=new L(F,B.parentElement,B,u(u({},k),{onChange:et})))}),_.on("text-change",function(U,F){B.querySelectorAll("iframe").forEach(function(K){N.track(K,function(){$=K,D=new L(K,B.parentElement,B,u(u({},k),{onChange:et}))})})}),document.addEventListener("mousedown",function(U){var F,K,lt,Nt=U.target;Nt!==$&&!(!((K=(F=D==null?void 0:D.resizer)===null||F===void 0?void 0:F.contains)===null||K===void 0)&&K.call(F,Nt))&&((lt=D==null?void 0:D.destory)===null||lt===void 0||lt.call(D),D=null,$=null)},{capture:!0})}return R})}(Xi)),Xi.exports}var x1=w1();const T1=rs(x1);var qs={exports:{}};const N1=kc(v1);var Kl;function A1(){return Kl||(Kl=1,function(o,t){(function(e,i){o.exports=i(N1)})(self,function(e){return function(){var i={386:function(m){var g=-1,y=1,L=0;function M(E,q,Z,j,H){if(E===q)return E?[[L,E]]:[];if(Z!=null){var X=function(Q,ut,rt){var ft=typeof rt=="number"?{index:rt,length:0}:rt.oldRange,Ot=typeof rt=="number"?null:rt.newRange,pt=Q.length,at=ut.length;if(ft.length===0&&(Ot===null||Ot.length===0)){var Rt=ft.index,Ut=Q.slice(0,Rt),Pt=Q.slice(Rt),Ft=Ot?Ot.index:null,Ht=Rt+at-pt;if((Ft===null||Ft===Ht)&&!(Ht<0||Ht>at)){var xt=ut.slice(0,Ht);if((Jt=ut.slice(Ht))===Pt){var vt=Math.min(Rt,Ht);if((Yt=Ut.slice(0,vt))===(Mt=xt.slice(0,vt)))return zt(Yt,Ut.slice(vt),xt.slice(vt),Pt)}}if(Ft===null||Ft===Rt){var Lt=Rt,Jt=(xt=ut.slice(0,Lt),ut.slice(Lt));if(xt===Ut){var Et=Math.min(pt-Lt,at-Lt);if((Wt=Pt.slice(Pt.length-Et))===(Xt=Jt.slice(Jt.length-Et)))return zt(Ut,Pt.slice(0,Pt.length-Et),Jt.slice(0,Jt.length-Et),Wt)}}}if(ft.length>0&&Ot&&Ot.length===0){var Yt=Q.slice(0,ft.index),Wt=Q.slice(ft.index+ft.length);if(!(at<(vt=Yt.length)+(Et=Wt.length))){var Mt=ut.slice(0,vt),Xt=ut.slice(at-Et);if(Yt===Mt&&Wt===Xt)return zt(Yt,Q.slice(vt,pt-Et),ut.slice(vt,at-Et),Wt)}}return null}(E,q,Z);if(X)return X}var J=R(E,q),ot=E.substring(0,J);J=k(E=E.substring(J),q=q.substring(J));var st=E.substring(E.length-J),dt=function(Q,ut){var rt;if(!Q)return[[y,ut]];if(!ut)return[[g,Q]];var ft=Q.length>ut.length?Q:ut,Ot=Q.length>ut.length?ut:Q,pt=ft.indexOf(Ot);if(pt!==-1)return rt=[[y,ft.substring(0,pt)],[L,Ot],[y,ft.substring(pt+Ot.length)]],Q.length>ut.length&&(rt[0][0]=rt[2][0]=g),rt;if(Ot.length===1)return[[g,Q],[y,ut]];var at=function(Lt,Jt){var Et=Lt.length>Jt.length?Lt:Jt,Yt=Lt.length>Jt.length?Jt:Lt;if(Et.length<4||2*Yt.length<Et.length)return null;function Wt(_e,qe,me){for(var Me,Ae,$e,Oe,Re=_e.substring(me,me+Math.floor(_e.length/4)),ae=-1,ye="";(ae=qe.indexOf(Re,ae+1))!==-1;){var be=R(_e.substring(me),qe.substring(ae)),ve=k(_e.substring(0,me),qe.substring(0,ae));ye.length<ve+be&&(ye=qe.substring(ae-ve,ae)+qe.substring(ae,ae+be),Me=_e.substring(0,me-ve),Ae=_e.substring(me+be),$e=qe.substring(0,ae-ve),Oe=qe.substring(ae+be))}return 2*ye.length>=_e.length?[Me,Ae,$e,Oe,ye]:null}var Mt,Xt,Ee,re,le,Ne=Wt(Et,Yt,Math.ceil(Et.length/4)),ge=Wt(Et,Yt,Math.ceil(Et.length/2));return Ne||ge?(Mt=ge?Ne&&Ne[4].length>ge[4].length?Ne:ge:Ne,Lt.length>Jt.length?(Xt=Mt[0],Ee=Mt[1],re=Mt[2],le=Mt[3]):(re=Mt[0],le=Mt[1],Xt=Mt[2],Ee=Mt[3]),[Xt,Ee,re,le,Mt[4]]):null}(Q,ut);if(at){var Rt=at[0],Ut=at[1],Pt=at[2],Ft=at[3],Ht=at[4],xt=M(Rt,Pt),vt=M(Ut,Ft);return xt.concat([[L,Ht]],vt)}return function(Lt,Jt){for(var Et=Lt.length,Yt=Jt.length,Wt=Math.ceil((Et+Yt)/2),Mt=Wt,Xt=2*Wt,Ee=new Array(Xt),re=new Array(Xt),le=0;le<Xt;le++)Ee[le]=-1,re[le]=-1;Ee[Mt+1]=0,re[Mt+1]=0;for(var Ne=Et-Yt,ge=Ne%2!=0,_e=0,qe=0,me=0,Me=0,Ae=0;Ae<Wt;Ae++){for(var $e=-Ae+_e;$e<=Ae-qe;$e+=2){for(var Oe=Mt+$e,Re=(kt=$e===-Ae||$e!==Ae&&Ee[Oe-1]<Ee[Oe+1]?Ee[Oe+1]:Ee[Oe-1]+1)-$e;kt<Et&&Re<Yt&&Lt.charAt(kt)===Jt.charAt(Re);)kt++,Re++;if(Ee[Oe]=kt,kt>Et)qe+=2;else if(Re>Yt)_e+=2;else if(ge&&(be=Mt+Ne-$e)>=0&&be<Xt&&re[be]!==-1&&kt>=(ye=Et-re[be]))return N(Lt,Jt,kt,Re)}for(var ae=-Ae+me;ae<=Ae-Me;ae+=2){for(var ye,be=Mt+ae,ve=(ye=ae===-Ae||ae!==Ae&&re[be-1]<re[be+1]?re[be+1]:re[be-1]+1)-ae;ye<Et&&ve<Yt&&Lt.charAt(Et-ye-1)===Jt.charAt(Yt-ve-1);)ye++,ve++;if(re[be]=ye,ye>Et)Me+=2;else if(ve>Yt)me+=2;else if(!ge){var kt;if((Oe=Mt+Ne-ae)>=0&&Oe<Xt&&Ee[Oe]!==-1&&(Re=Mt+(kt=Ee[Oe])-Oe,kt>=(ye=Et-ye)))return N(Lt,Jt,kt,Re)}}}return[[g,Lt],[y,Jt]]}(Q,ut)}(E=E.substring(0,E.length-J),q=q.substring(0,q.length-J));return ot&&dt.unshift([L,ot]),st&&dt.push([L,st]),F(dt,H),j&&function(Q){for(var ut=!1,rt=[],ft=0,Ot=null,pt=0,at=0,Rt=0,Ut=0,Pt=0;pt<Q.length;)Q[pt][0]==L?(rt[ft++]=pt,at=Ut,Rt=Pt,Ut=0,Pt=0,Ot=Q[pt][1]):(Q[pt][0]==y?Ut+=Q[pt][1].length:Pt+=Q[pt][1].length,Ot&&Ot.length<=Math.max(at,Rt)&&Ot.length<=Math.max(Ut,Pt)&&(Q.splice(rt[ft-1],0,[g,Ot]),Q[rt[ft-1]+1][0]=y,ft--,pt=--ft>0?rt[ft-1]:-1,at=0,Rt=0,Ut=0,Pt=0,Ot=null,ut=!0)),pt++;for(ut&&F(Q),function(Lt){function Jt(qe,me){if(!qe||!me)return 6;var Me=qe.charAt(qe.length-1),Ae=me.charAt(0),$e=Me.match(B),Oe=Ae.match(B),Re=$e&&Me.match($),ae=Oe&&Ae.match($),ye=Re&&Me.match(D),be=ae&&Ae.match(D),ve=ye&&qe.match(et),kt=be&&me.match(U);return ve||kt?5:ye||be?4:$e&&!Re&&ae?3:Re||ae?2:$e||Oe?1:0}for(var Et=1;Et<Lt.length-1;){if(Lt[Et-1][0]==L&&Lt[Et+1][0]==L){var Yt=Lt[Et-1][1],Wt=Lt[Et][1],Mt=Lt[Et+1][1],Xt=k(Yt,Wt);if(Xt){var Ee=Wt.substring(Wt.length-Xt);Yt=Yt.substring(0,Yt.length-Xt),Wt=Ee+Wt.substring(0,Wt.length-Xt),Mt=Ee+Mt}for(var re=Yt,le=Wt,Ne=Mt,ge=Jt(Yt,Wt)+Jt(Wt,Mt);Wt.charAt(0)===Mt.charAt(0);){Yt+=Wt.charAt(0),Wt=Wt.substring(1)+Mt.charAt(0),Mt=Mt.substring(1);var _e=Jt(Yt,Wt)+Jt(Wt,Mt);_e>=ge&&(ge=_e,re=Yt,le=Wt,Ne=Mt)}Lt[Et-1][1]!=re&&(re?Lt[Et-1][1]=re:(Lt.splice(Et-1,1),Et--),Lt[Et][1]=le,Ne?Lt[Et+1][1]=Ne:(Lt.splice(Et+1,1),Et--))}Et++}}(Q),pt=1;pt<Q.length;){if(Q[pt-1][0]==g&&Q[pt][0]==y){var Ft=Q[pt-1][1],Ht=Q[pt][1],xt=_(Ft,Ht),vt=_(Ht,Ft);xt>=vt?(xt>=Ft.length/2||xt>=Ht.length/2)&&(Q.splice(pt,0,[L,Ht.substring(0,xt)]),Q[pt-1][1]=Ft.substring(0,Ft.length-xt),Q[pt+1][1]=Ht.substring(xt),pt++):(vt>=Ft.length/2||vt>=Ht.length/2)&&(Q.splice(pt,0,[L,Ft.substring(0,vt)]),Q[pt-1][0]=y,Q[pt-1][1]=Ht.substring(0,Ht.length-vt),Q[pt+1][0]=g,Q[pt+1][1]=Ft.substring(vt),pt++),pt++}pt++}}(dt),dt}function N(E,q,Z,j){var H=E.substring(0,Z),X=q.substring(0,j),J=E.substring(Z),ot=q.substring(j),st=M(H,X),dt=M(J,ot);return st.concat(dt)}function R(E,q){if(!E||!q||E.charAt(0)!==q.charAt(0))return 0;for(var Z=0,j=Math.min(E.length,q.length),H=j,X=0;Z<H;)E.substring(X,H)==q.substring(X,H)?X=Z=H:j=H,H=Math.floor((j-Z)/2+Z);return K(E.charCodeAt(H-1))&&H--,H}function _(E,q){var Z=E.length,j=q.length;if(Z==0||j==0)return 0;Z>j?E=E.substring(Z-j):Z<j&&(q=q.substring(0,Z));var H=Math.min(Z,j);if(E==q)return H;for(var X=0,J=1;;){var ot=E.substring(H-J),st=q.indexOf(ot);if(st==-1)return X;J+=st,st!=0&&E.substring(H-J)!=q.substring(0,J)||(X=J,J++)}}function k(E,q){if(!E||!q||E.slice(-1)!==q.slice(-1))return 0;for(var Z=0,j=Math.min(E.length,q.length),H=j,X=0;Z<H;)E.substring(E.length-H,E.length-X)==q.substring(q.length-H,q.length-X)?X=Z=H:j=H,H=Math.floor((j-Z)/2+Z);return lt(E.charCodeAt(E.length-H))&&H--,H}var B=/[^a-zA-Z0-9]/,$=/\s/,D=/[\r\n]/,et=/\n\r?\n$/,U=/^\r?\n\r?\n/;function F(E,q){E.push([L,""]);for(var Z,j=0,H=0,X=0,J="",ot="";j<E.length;)if(j<E.length-1&&!E[j][1])E.splice(j,1);else switch(E[j][0]){case y:X++,ot+=E[j][1],j++;break;case g:H++,J+=E[j][1],j++;break;case L:var st=j-X-H-1;if(q){if(st>=0&&yt(E[st][1])){var dt=E[st][1].slice(-1);if(E[st][1]=E[st][1].slice(0,-1),J=dt+J,ot=dt+ot,!E[st][1]){E.splice(st,1),j--;var Q=st-1;E[Q]&&E[Q][0]===y&&(X++,ot=E[Q][1]+ot,Q--),E[Q]&&E[Q][0]===g&&(H++,J=E[Q][1]+J,Q--),st=Q}}Nt(E[j][1])&&(dt=E[j][1].charAt(0),E[j][1]=E[j][1].slice(1),J+=dt,ot+=dt)}if(j<E.length-1&&!E[j][1]){E.splice(j,1);break}if(J.length>0||ot.length>0){J.length>0&&ot.length>0&&((Z=R(ot,J))!==0&&(st>=0?E[st][1]+=ot.substring(0,Z):(E.splice(0,0,[L,ot.substring(0,Z)]),j++),ot=ot.substring(Z),J=J.substring(Z)),(Z=k(ot,J))!==0&&(E[j][1]=ot.substring(ot.length-Z)+E[j][1],ot=ot.substring(0,ot.length-Z),J=J.substring(0,J.length-Z)));var ut=X+H;J.length===0&&ot.length===0?(E.splice(j-ut,ut),j-=ut):J.length===0?(E.splice(j-ut,ut,[y,ot]),j=j-ut+1):ot.length===0?(E.splice(j-ut,ut,[g,J]),j=j-ut+1):(E.splice(j-ut,ut,[g,J],[y,ot]),j=j-ut+2)}j!==0&&E[j-1][0]===L?(E[j-1][1]+=E[j][1],E.splice(j,1)):j++,X=0,H=0,J="",ot=""}E[E.length-1][1]===""&&E.pop();var rt=!1;for(j=1;j<E.length-1;)E[j-1][0]===L&&E[j+1][0]===L&&(E[j][1].substring(E[j][1].length-E[j-1][1].length)===E[j-1][1]?(E[j][1]=E[j-1][1]+E[j][1].substring(0,E[j][1].length-E[j-1][1].length),E[j+1][1]=E[j-1][1]+E[j+1][1],E.splice(j-1,1),rt=!0):E[j][1].substring(0,E[j+1][1].length)==E[j+1][1]&&(E[j-1][1]+=E[j+1][1],E[j][1]=E[j][1].substring(E[j+1][1].length)+E[j+1][1],E.splice(j+1,1),rt=!0)),j++;rt&&F(E,q)}function K(E){return E>=55296&&E<=56319}function lt(E){return E>=56320&&E<=57343}function Nt(E){return lt(E.charCodeAt(0))}function yt(E){return K(E.charCodeAt(E.length-1))}function zt(E,q,Z,j){return yt(E)||Nt(j)?null:function(H){for(var X=[],J=0;J<H.length;J++)H[J][1].length>0&&X.push(H[J]);return X}([[L,E],[g,q],[y,Z],[L,j]])}function C(E,q,Z,j){return M(E,q,Z,j,!0)}C.INSERT=y,C.DELETE=g,C.EQUAL=L,m.exports=C},861:function(m,g,y){m=y.nmd(m);var L="__lodash_hash_undefined__",M=9007199254740991,N="[object Arguments]",R="[object Boolean]",_="[object Date]",k="[object Function]",B="[object GeneratorFunction]",$="[object Map]",D="[object Number]",et="[object Object]",U="[object Promise]",F="[object RegExp]",K="[object Set]",lt="[object String]",Nt="[object Symbol]",yt="[object WeakMap]",zt="[object ArrayBuffer]",C="[object DataView]",E="[object Float32Array]",q="[object Float64Array]",Z="[object Int8Array]",j="[object Int16Array]",H="[object Int32Array]",X="[object Uint8Array]",J="[object Uint8ClampedArray]",ot="[object Uint16Array]",st="[object Uint32Array]",dt=/\w*$/,Q=/^\[object .+?Constructor\]$/,ut=/^(?:0|[1-9]\d*)$/,rt={};rt[N]=rt["[object Array]"]=rt[zt]=rt[C]=rt[R]=rt[_]=rt[E]=rt[q]=rt[Z]=rt[j]=rt[H]=rt[$]=rt[D]=rt[et]=rt[F]=rt[K]=rt[lt]=rt[Nt]=rt[X]=rt[J]=rt[ot]=rt[st]=!0,rt["[object Error]"]=rt[k]=rt[yt]=!1;var ft=typeof y.g=="object"&&y.g&&y.g.Object===Object&&y.g,Ot=typeof self=="object"&&self&&self.Object===Object&&self,pt=ft||Ot||Function("return this")(),at=g&&!g.nodeType&&g,Rt=at&&m&&!m.nodeType&&m,Ut=Rt&&Rt.exports===at;function Pt(z,x){return z.set(x[0],x[1]),z}function Ft(z,x){return z.add(x),z}function Ht(z,x,I,W){var ht=-1,At=z?z.length:0;for(W;++ht<At;)I=x(I,z[ht],ht,z);return I}function xt(z){var x=!1;if(z!=null&&typeof z.toString!="function")try{x=!!(z+"")}catch{}return x}function vt(z){var x=-1,I=Array(z.size);return z.forEach(function(W,ht){I[++x]=[ht,W]}),I}function Lt(z,x){return function(I){return z(x(I))}}function Jt(z){var x=-1,I=Array(z.size);return z.forEach(function(W){I[++x]=W}),I}var Et,Yt=Array.prototype,Wt=Function.prototype,Mt=Object.prototype,Xt=pt["__core-js_shared__"],Ee=(Et=/[^.]+$/.exec(Xt&&Xt.keys&&Xt.keys.IE_PROTO||""))?"Symbol(src)_1."+Et:"",re=Wt.toString,le=Mt.hasOwnProperty,Ne=Mt.toString,ge=RegExp("^"+re.call(le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=Ut?pt.Buffer:void 0,qe=pt.Symbol,me=pt.Uint8Array,Me=Lt(Object.getPrototypeOf,Object),Ae=Object.create,$e=Mt.propertyIsEnumerable,Oe=Yt.splice,Re=Object.getOwnPropertySymbols,ae=_e?_e.isBuffer:void 0,ye=Lt(Object.keys,Object),be=he(pt,"DataView"),ve=he(pt,"Map"),kt=he(pt,"Promise"),ir=he(pt,"Set"),Ve=he(pt,"WeakMap"),sr=he(Object,"create"),lr=te(be),Nr=te(ve),kr=te(kt),ar=te(ir),Xe=te(Ve),Pe=qe?qe.prototype:void 0,Ie=Pe?Pe.valueOf:void 0;function Qe(z){var x=-1,I=z?z.length:0;for(this.clear();++x<I;){var W=z[x];this.set(W[0],W[1])}}function De(z){var x=-1,I=z?z.length:0;for(this.clear();++x<I;){var W=z[x];this.set(W[0],W[1])}}function Ke(z){var x=-1,I=z?z.length:0;for(this.clear();++x<I;){var W=z[x];this.set(W[0],W[1])}}function er(z){this.__data__=new De(z)}function mr(z,x,I){var W=z[x];le.call(z,x)&&Ue(W,I)&&(I!==void 0||x in z)||(z[x]=I)}function P(z,x){for(var I=z.length;I--;)if(Ue(z[I][0],x))return I;return-1}function V(z,x,I,W,ht,At,Ct){var It;if(W&&(It=At?W(z,ht,At,Ct):W(z)),It!==void 0)return It;if(!Le(z))return z;var ne=fe(z);if(ne){if(It=function(mt){var Vt=mt.length,ce=mt.constructor(Vt);return Vt&&typeof mt[0]=="string"&&le.call(mt,"index")&&(ce.index=mt.index,ce.input=mt.input),ce}(z),!x)return function(mt,Vt){var ce=-1,Se=mt.length;for(Vt||(Vt=Array(Se));++ce<Se;)Vt[ce]=mt[ce];return Vt}(z,It)}else{var pe=ke(z),Tt=pe==k||pe==B;if(de(z))return function(mt,Vt){if(Vt)return mt.slice();var ce=new mt.constructor(mt.length);return mt.copy(ce),ce}(z,x);if(pe==et||pe==N||Tt&&!At){if(xt(z))return At?z:{};if(It=function(mt){return typeof mt.constructor!="function"||je(mt)?{}:Le(Vt=Me(mt))?Ae(Vt):{};var Vt}(Tt?{}:z),!x)return function(mt,Vt){return gt(mt,$t(mt),Vt)}(z,function(mt,Vt){return mt&&gt(Vt,br(Vt),mt)}(It,z))}else{if(!rt[pe])return At?z:{};It=function(mt,Vt,ce,Se){var fr,Ze=mt.constructor;switch(Vt){case zt:return nt(mt);case R:case _:return new Ze(+mt);case C:return function(Qt,Ye){var pr=Ye?nt(Qt.buffer):Qt.buffer;return new Qt.constructor(pr,Qt.byteOffset,Qt.byteLength)}(mt,Se);case E:case q:case Z:case j:case H:case X:case J:case ot:case st:return function(Qt,Ye){var pr=Ye?nt(Qt.buffer):Qt.buffer;return new Qt.constructor(pr,Qt.byteOffset,Qt.length)}(mt,Se);case $:return function(Qt,Ye,pr){return Ht(Ye?pr(vt(Qt),!0):vt(Qt),Pt,new Qt.constructor)}(mt,Se,ce);case D:case lt:return new Ze(mt);case F:return function(Qt){var Ye=new Qt.constructor(Qt.source,dt.exec(Qt));return Ye.lastIndex=Qt.lastIndex,Ye}(mt);case K:return function(Qt,Ye,pr){return Ht(Ye?pr(Jt(Qt),!0):Jt(Qt),Ft,new Qt.constructor)}(mt,Se,ce);case Nt:return fr=mt,Ie?Object(Ie.call(fr)):{}}}(z,pe,V,x)}}Ct||(Ct=new er);var ie=Ct.get(z);if(ie)return ie;if(Ct.set(z,It),!ne)var ee=I?function(mt){return function(Vt,ce,Se){var fr=ce(Vt);return fe(Vt)?fr:function(Ze,Qt){for(var Ye=-1,pr=Qt.length,Rr=Ze.length;++Ye<pr;)Ze[Rr+Ye]=Qt[Ye];return Ze}(fr,Se(Vt))}(mt,br,$t)}(z):br(z);return function(mt,Vt){for(var ce=-1,Se=mt?mt.length:0;++ce<Se&&Vt(mt[ce],ce)!==!1;);}(ee||z,function(mt,Vt){ee&&(mt=z[Vt=mt]),mr(It,Vt,V(mt,x,I,W,Vt,z,Ct))}),It}function nt(z){var x=new z.constructor(z.byteLength);return new me(x).set(new me(z)),x}function gt(z,x,I,W){I||(I={});for(var ht=-1,At=x.length;++ht<At;){var Ct=x[ht],It=void 0;mr(I,Ct,It===void 0?z[Ct]:It)}return I}function Dt(z,x){var I,W,ht=z.__data__;return((W=typeof(I=x))=="string"||W=="number"||W=="symbol"||W=="boolean"?I!=="__proto__":I===null)?ht[typeof x=="string"?"string":"hash"]:ht.map}function he(z,x){var I=function(W,ht){return W==null?void 0:W[ht]}(z,x);return function(W){return!(!Le(W)||(ht=W,Ee&&Ee in ht))&&(We(W)||xt(W)?ge:Q).test(te(W));var ht}(I)?I:void 0}Qe.prototype.clear=function(){this.__data__=sr?sr(null):{}},Qe.prototype.delete=function(z){return this.has(z)&&delete this.__data__[z]},Qe.prototype.get=function(z){var x=this.__data__;if(sr){var I=x[z];return I===L?void 0:I}return le.call(x,z)?x[z]:void 0},Qe.prototype.has=function(z){var x=this.__data__;return sr?x[z]!==void 0:le.call(x,z)},Qe.prototype.set=function(z,x){return this.__data__[z]=sr&&x===void 0?L:x,this},De.prototype.clear=function(){this.__data__=[]},De.prototype.delete=function(z){var x=this.__data__,I=P(x,z);return!(I<0||(I==x.length-1?x.pop():Oe.call(x,I,1),0))},De.prototype.get=function(z){var x=this.__data__,I=P(x,z);return I<0?void 0:x[I][1]},De.prototype.has=function(z){return P(this.__data__,z)>-1},De.prototype.set=function(z,x){var I=this.__data__,W=P(I,z);return W<0?I.push([z,x]):I[W][1]=x,this},Ke.prototype.clear=function(){this.__data__={hash:new Qe,map:new(ve||De),string:new Qe}},Ke.prototype.delete=function(z){return Dt(this,z).delete(z)},Ke.prototype.get=function(z){return Dt(this,z).get(z)},Ke.prototype.has=function(z){return Dt(this,z).has(z)},Ke.prototype.set=function(z,x){return Dt(this,z).set(z,x),this},er.prototype.clear=function(){this.__data__=new De},er.prototype.delete=function(z){return this.__data__.delete(z)},er.prototype.get=function(z){return this.__data__.get(z)},er.prototype.has=function(z){return this.__data__.has(z)},er.prototype.set=function(z,x){var I=this.__data__;if(I instanceof De){var W=I.__data__;if(!ve||W.length<199)return W.push([z,x]),this;I=this.__data__=new Ke(W)}return I.set(z,x),this};var $t=Re?Lt(Re,Object):function(){return[]},ke=function(z){return Ne.call(z)};function Te(z,x){return!!(x=x??M)&&(typeof z=="number"||ut.test(z))&&z>-1&&z%1==0&&z<x}function je(z){var x=z&&z.constructor;return z===(typeof x=="function"&&x.prototype||Mt)}function te(z){if(z!=null){try{return re.call(z)}catch{}try{return z+""}catch{}}return""}function Ue(z,x){return z===x||z!=z&&x!=x}(be&&ke(new be(new ArrayBuffer(1)))!=C||ve&&ke(new ve)!=$||kt&&ke(kt.resolve())!=U||ir&&ke(new ir)!=K||Ve&&ke(new Ve)!=yt)&&(ke=function(z){var x=Ne.call(z),I=x==et?z.constructor:void 0,W=I?te(I):void 0;if(W)switch(W){case lr:return C;case Nr:return $;case kr:return U;case ar:return K;case Xe:return yt}return x});var fe=Array.isArray;function cr(z){return z!=null&&function(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=M}(z.length)&&!We(z)}var de=ae||function(){return!1};function We(z){var x=Le(z)?Ne.call(z):"";return x==k||x==B}function Le(z){var x=typeof z;return!!z&&(x=="object"||x=="function")}function br(z){return cr(z)?function(x,I){var W=fe(x)||function(It){return function(ne){return function(pe){return!!pe&&typeof pe=="object"}(ne)&&cr(ne)}(It)&&le.call(It,"callee")&&(!$e.call(It,"callee")||Ne.call(It)==N)}(x)?function(It,ne){for(var pe=-1,Tt=Array(It);++pe<It;)Tt[pe]=ne(pe);return Tt}(x.length,String):[],ht=W.length,At=!!ht;for(var Ct in x)!le.call(x,Ct)||At&&(Ct=="length"||Te(Ct,ht))||W.push(Ct);return W}(z):function(x){if(!je(x))return ye(x);var I=[];for(var W in Object(x))le.call(x,W)&&W!="constructor"&&I.push(W);return I}(z)}m.exports=function(z){return V(z,!0,!0)}},842:function(m,g,y){m=y.nmd(m);var L="__lodash_hash_undefined__",M=1,N=2,R=9007199254740991,_="[object Arguments]",k="[object Array]",B="[object AsyncFunction]",$="[object Boolean]",D="[object Date]",et="[object Error]",U="[object Function]",F="[object GeneratorFunction]",K="[object Map]",lt="[object Number]",Nt="[object Null]",yt="[object Object]",zt="[object Promise]",C="[object Proxy]",E="[object RegExp]",q="[object Set]",Z="[object String]",j="[object Undefined]",H="[object WeakMap]",X="[object ArrayBuffer]",J="[object DataView]",ot=/^\[object .+?Constructor\]$/,st=/^(?:0|[1-9]\d*)$/,dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt[_]=dt[k]=dt[X]=dt[$]=dt[J]=dt[D]=dt[et]=dt[U]=dt[K]=dt[lt]=dt[yt]=dt[E]=dt[q]=dt[Z]=dt[H]=!1;var Q=typeof y.g=="object"&&y.g&&y.g.Object===Object&&y.g,ut=typeof self=="object"&&self&&self.Object===Object&&self,rt=Q||ut||Function("return this")(),ft=g&&!g.nodeType&&g,Ot=ft&&m&&!m.nodeType&&m,pt=Ot&&Ot.exports===ft,at=pt&&Q.process,Rt=function(){try{return at&&at.binding&&at.binding("util")}catch{}}(),Ut=Rt&&Rt.isTypedArray;function Pt(x,I){for(var W=-1,ht=x==null?0:x.length;++W<ht;)if(I(x[W],W,x))return!0;return!1}function Ft(x){var I=-1,W=Array(x.size);return x.forEach(function(ht,At){W[++I]=[At,ht]}),W}function Ht(x){var I=-1,W=Array(x.size);return x.forEach(function(ht){W[++I]=ht}),W}var xt,vt,Lt,Jt=Array.prototype,Et=Function.prototype,Yt=Object.prototype,Wt=rt["__core-js_shared__"],Mt=Et.toString,Xt=Yt.hasOwnProperty,Ee=(xt=/[^.]+$/.exec(Wt&&Wt.keys&&Wt.keys.IE_PROTO||""))?"Symbol(src)_1."+xt:"",re=Yt.toString,le=RegExp("^"+Mt.call(Xt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=pt?rt.Buffer:void 0,ge=rt.Symbol,_e=rt.Uint8Array,qe=Yt.propertyIsEnumerable,me=Jt.splice,Me=ge?ge.toStringTag:void 0,Ae=Object.getOwnPropertySymbols,$e=Ne?Ne.isBuffer:void 0,Oe=(vt=Object.keys,Lt=Object,function(x){return vt(Lt(x))}),Re=Dt(rt,"DataView"),ae=Dt(rt,"Map"),ye=Dt(rt,"Promise"),be=Dt(rt,"Set"),ve=Dt(rt,"WeakMap"),kt=Dt(Object,"create"),ir=Te(Re),Ve=Te(ae),sr=Te(ye),lr=Te(be),Nr=Te(ve),kr=ge?ge.prototype:void 0,ar=kr?kr.valueOf:void 0;function Xe(x){var I=-1,W=x==null?0:x.length;for(this.clear();++I<W;){var ht=x[I];this.set(ht[0],ht[1])}}function Pe(x){var I=-1,W=x==null?0:x.length;for(this.clear();++I<W;){var ht=x[I];this.set(ht[0],ht[1])}}function Ie(x){var I=-1,W=x==null?0:x.length;for(this.clear();++I<W;){var ht=x[I];this.set(ht[0],ht[1])}}function Qe(x){var I=-1,W=x==null?0:x.length;for(this.__data__=new Ie;++I<W;)this.add(x[I])}function De(x){var I=this.__data__=new Pe(x);this.size=I.size}function Ke(x,I){for(var W=x.length;W--;)if(je(x[W][0],I))return W;return-1}function er(x){return x==null?x===void 0?j:Nt:Me&&Me in Object(x)?function(I){var W=Xt.call(I,Me),ht=I[Me];try{I[Me]=void 0;var At=!0}catch{}var Ct=re.call(I);return At&&(W?I[Me]=ht:delete I[Me]),Ct}(x):function(I){return re.call(I)}(x)}function mr(x){return Le(x)&&er(x)==_}function P(x,I,W,ht,At){return x===I||(x==null||I==null||!Le(x)&&!Le(I)?x!=x&&I!=I:function(Ct,It,ne,pe,Tt,ie){var ee=Ue(Ct),mt=Ue(It),Vt=ee?k:$t(Ct),ce=mt?k:$t(It),Se=(Vt=Vt==_?yt:Vt)==yt,fr=(ce=ce==_?yt:ce)==yt,Ze=Vt==ce;if(Ze&&fe(Ct)){if(!fe(It))return!1;ee=!0,Se=!1}if(Ze&&!Se)return ie||(ie=new De),ee||br(Ct)?V(Ct,It,ne,pe,Tt,ie):function(se,ue,Ar,Lr,vr,gr,Sr){switch(Ar){case J:if(se.byteLength!=ue.byteLength||se.byteOffset!=ue.byteOffset)return!1;se=se.buffer,ue=ue.buffer;case X:return!(se.byteLength!=ue.byteLength||!gr(new _e(se),new _e(ue)));case $:case D:case lt:return je(+se,+ue);case et:return se.name==ue.name&&se.message==ue.message;case E:case Z:return se==ue+"";case K:var He=Ft;case q:var yr=Lr&M;if(He||(He=Ht),se.size!=ue.size&&!yr)return!1;var qr=Sr.get(se);if(qr)return qr==ue;Lr|=N,Sr.set(se,ue);var ze=V(He(se),He(ue),Lr,vr,gr,Sr);return Sr.delete(se),ze;case"[object Symbol]":if(ar)return ar.call(se)==ar.call(ue)}return!1}(Ct,It,Vt,ne,pe,Tt,ie);if(!(ne&M)){var Qt=Se&&Xt.call(Ct,"__wrapped__"),Ye=fr&&Xt.call(It,"__wrapped__");if(Qt||Ye){var pr=Qt?Ct.value():Ct,Rr=Ye?It.value():It;return ie||(ie=new De),Tt(pr,Rr,ne,pe,ie)}}return!!Ze&&(ie||(ie=new De),function(se,ue,Ar,Lr,vr,gr){var Sr=Ar&M,He=nt(se),yr=He.length;if(yr!=nt(ue).length&&!Sr)return!1;for(var qr=yr;qr--;){var ze=He[qr];if(!(Sr?ze in ue:Xt.call(ue,ze)))return!1}var gn=gr.get(se);if(gn&&gr.get(ue))return gn==ue;var Kr=!0;gr.set(se,ue),gr.set(ue,se);for(var Br=Sr;++qr<yr;){var Pr=se[ze=He[qr]],Er=ue[ze];if(Lr)var Mr=Sr?Lr(Er,Pr,ze,ue,se,gr):Lr(Pr,Er,ze,se,ue,gr);if(!(Mr===void 0?Pr===Er||vr(Pr,Er,Ar,Lr,gr):Mr)){Kr=!1;break}Br||(Br=ze=="constructor")}if(Kr&&!Br){var wr=se.constructor,Dr=ue.constructor;wr==Dr||!("constructor"in se)||!("constructor"in ue)||typeof wr=="function"&&wr instanceof wr&&typeof Dr=="function"&&Dr instanceof Dr||(Kr=!1)}return gr.delete(se),gr.delete(ue),Kr}(Ct,It,ne,pe,Tt,ie))}(x,I,W,ht,P,At))}function V(x,I,W,ht,At,Ct){var It=W&M,ne=x.length,pe=I.length;if(ne!=pe&&!(It&&pe>ne))return!1;var Tt=Ct.get(x);if(Tt&&Ct.get(I))return Tt==I;var ie=-1,ee=!0,mt=W&N?new Qe:void 0;for(Ct.set(x,I),Ct.set(I,x);++ie<ne;){var Vt=x[ie],ce=I[ie];if(ht)var Se=It?ht(ce,Vt,ie,I,x,Ct):ht(Vt,ce,ie,x,I,Ct);if(Se!==void 0){if(Se)continue;ee=!1;break}if(mt){if(!Pt(I,function(fr,Ze){if(Qt=Ze,!mt.has(Qt)&&(Vt===fr||At(Vt,fr,W,ht,Ct)))return mt.push(Ze);var Qt})){ee=!1;break}}else if(Vt!==ce&&!At(Vt,ce,W,ht,Ct)){ee=!1;break}}return Ct.delete(x),Ct.delete(I),ee}function nt(x){return function(I,W,ht){var At=W(I);return Ue(I)?At:function(Ct,It){for(var ne=-1,pe=It.length,Tt=Ct.length;++ne<pe;)Ct[Tt+ne]=It[ne];return Ct}(At,ht(I))}(x,z,he)}function gt(x,I){var W,ht,At=x.__data__;return((ht=typeof(W=I))=="string"||ht=="number"||ht=="symbol"||ht=="boolean"?W!=="__proto__":W===null)?At[typeof I=="string"?"string":"hash"]:At.map}function Dt(x,I){var W=function(ht,At){return ht==null?void 0:ht[At]}(x,I);return function(ht){return!(!We(ht)||function(At){return!!Ee&&Ee in At}(ht))&&(cr(ht)?le:ot).test(Te(ht))}(W)?W:void 0}Xe.prototype.clear=function(){this.__data__=kt?kt(null):{},this.size=0},Xe.prototype.delete=function(x){var I=this.has(x)&&delete this.__data__[x];return this.size-=I?1:0,I},Xe.prototype.get=function(x){var I=this.__data__;if(kt){var W=I[x];return W===L?void 0:W}return Xt.call(I,x)?I[x]:void 0},Xe.prototype.has=function(x){var I=this.__data__;return kt?I[x]!==void 0:Xt.call(I,x)},Xe.prototype.set=function(x,I){var W=this.__data__;return this.size+=this.has(x)?0:1,W[x]=kt&&I===void 0?L:I,this},Pe.prototype.clear=function(){this.__data__=[],this.size=0},Pe.prototype.delete=function(x){var I=this.__data__,W=Ke(I,x);return!(W<0||(W==I.length-1?I.pop():me.call(I,W,1),--this.size,0))},Pe.prototype.get=function(x){var I=this.__data__,W=Ke(I,x);return W<0?void 0:I[W][1]},Pe.prototype.has=function(x){return Ke(this.__data__,x)>-1},Pe.prototype.set=function(x,I){var W=this.__data__,ht=Ke(W,x);return ht<0?(++this.size,W.push([x,I])):W[ht][1]=I,this},Ie.prototype.clear=function(){this.size=0,this.__data__={hash:new Xe,map:new(ae||Pe),string:new Xe}},Ie.prototype.delete=function(x){var I=gt(this,x).delete(x);return this.size-=I?1:0,I},Ie.prototype.get=function(x){return gt(this,x).get(x)},Ie.prototype.has=function(x){return gt(this,x).has(x)},Ie.prototype.set=function(x,I){var W=gt(this,x),ht=W.size;return W.set(x,I),this.size+=W.size==ht?0:1,this},Qe.prototype.add=Qe.prototype.push=function(x){return this.__data__.set(x,L),this},Qe.prototype.has=function(x){return this.__data__.has(x)},De.prototype.clear=function(){this.__data__=new Pe,this.size=0},De.prototype.delete=function(x){var I=this.__data__,W=I.delete(x);return this.size=I.size,W},De.prototype.get=function(x){return this.__data__.get(x)},De.prototype.has=function(x){return this.__data__.has(x)},De.prototype.set=function(x,I){var W=this.__data__;if(W instanceof Pe){var ht=W.__data__;if(!ae||ht.length<199)return ht.push([x,I]),this.size=++W.size,this;W=this.__data__=new Ie(ht)}return W.set(x,I),this.size=W.size,this};var he=Ae?function(x){return x==null?[]:(x=Object(x),function(I,W){for(var ht=-1,At=I==null?0:I.length,Ct=0,It=[];++ht<At;){var ne=I[ht];pe=ne,qe.call(x,pe)&&(It[Ct++]=ne)}var pe;return It}(Ae(x)))}:function(){return[]},$t=er;function ke(x,I){return!!(I=I??R)&&(typeof x=="number"||st.test(x))&&x>-1&&x%1==0&&x<I}function Te(x){if(x!=null){try{return Mt.call(x)}catch{}try{return x+""}catch{}}return""}function je(x,I){return x===I||x!=x&&I!=I}(Re&&$t(new Re(new ArrayBuffer(1)))!=J||ae&&$t(new ae)!=K||ye&&$t(ye.resolve())!=zt||be&&$t(new be)!=q||ve&&$t(new ve)!=H)&&($t=function(x){var I=er(x),W=I==yt?x.constructor:void 0,ht=W?Te(W):"";if(ht)switch(ht){case ir:return J;case Ve:return K;case sr:return zt;case lr:return q;case Nr:return H}return I});var te=mr(function(){return arguments}())?mr:function(x){return Le(x)&&Xt.call(x,"callee")&&!qe.call(x,"callee")},Ue=Array.isArray,fe=$e||function(){return!1};function cr(x){if(!We(x))return!1;var I=er(x);return I==U||I==F||I==B||I==C}function de(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=R}function We(x){var I=typeof x;return x!=null&&(I=="object"||I=="function")}function Le(x){return x!=null&&typeof x=="object"}var br=Ut?function(x){return function(I){return x(I)}}(Ut):function(x){return Le(x)&&de(x.length)&&!!dt[er(x)]};function z(x){return(I=x)!=null&&de(I.length)&&!cr(I)?function(W,ht){var At=Ue(W),Ct=!At&&te(W),It=!At&&!Ct&&fe(W),ne=!At&&!Ct&&!It&&br(W),pe=At||Ct||It||ne,Tt=pe?function(mt,Vt){for(var ce=-1,Se=Array(mt);++ce<mt;)Se[ce]=Vt(ce);return Se}(W.length,String):[],ie=Tt.length;for(var ee in W)!Xt.call(W,ee)||pe&&(ee=="length"||It&&(ee=="offset"||ee=="parent")||ne&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||ke(ee,ie))||Tt.push(ee);return Tt}(x):function(W){if(At=(ht=W)&&ht.constructor,ht!==(typeof At=="function"&&At.prototype||Yt))return Oe(W);var ht,At,Ct=[];for(var It in Object(W))Xt.call(W,It)&&It!="constructor"&&Ct.push(It);return Ct}(x);var I}m.exports=function(x,I){return P(x,I)}},930:function(m,g,y){m=y.nmd(m);var L="__lodash_hash_undefined__",M=9007199254740991,N="[object Arguments]",R="[object AsyncFunction]",_="[object Function]",k="[object GeneratorFunction]",B="[object Null]",$="[object Object]",D="[object Proxy]",et="[object Undefined]",U=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,K={};K["[object Float32Array]"]=K["[object Float64Array]"]=K["[object Int8Array]"]=K["[object Int16Array]"]=K["[object Int32Array]"]=K["[object Uint8Array]"]=K["[object Uint8ClampedArray]"]=K["[object Uint16Array]"]=K["[object Uint32Array]"]=!0,K[N]=K["[object Array]"]=K["[object ArrayBuffer]"]=K["[object Boolean]"]=K["[object DataView]"]=K["[object Date]"]=K["[object Error]"]=K[_]=K["[object Map]"]=K["[object Number]"]=K[$]=K["[object RegExp]"]=K["[object Set]"]=K["[object String]"]=K["[object WeakMap]"]=!1;var lt,Nt,yt,zt=typeof y.g=="object"&&y.g&&y.g.Object===Object&&y.g,C=typeof self=="object"&&self&&self.Object===Object&&self,E=zt||C||Function("return this")(),q=g&&!g.nodeType&&g,Z=q&&m&&!m.nodeType&&m,j=Z&&Z.exports===q,H=j&&zt.process,X=function(){try{return Z&&Z.require&&Z.require("util").types||H&&H.binding&&H.binding("util")}catch{}}(),J=X&&X.isTypedArray,ot=Array.prototype,st=Function.prototype,dt=Object.prototype,Q=E["__core-js_shared__"],ut=st.toString,rt=dt.hasOwnProperty,ft=(lt=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+lt:"",Ot=dt.toString,pt=ut.call(Object),at=RegExp("^"+ut.call(rt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=j?E.Buffer:void 0,Ut=E.Symbol,Pt=E.Uint8Array,Ft=(Rt&&Rt.allocUnsafe,Nt=Object.getPrototypeOf,yt=Object,function(P){return Nt(yt(P))}),Ht=Object.create,xt=dt.propertyIsEnumerable,vt=ot.splice,Lt=Ut?Ut.toStringTag:void 0,Jt=function(){try{var P=ye(Object,"defineProperty");return P({},"",{}),P}catch{}}(),Et=Rt?Rt.isBuffer:void 0,Yt=Math.max,Wt=Date.now,Mt=ye(E,"Map"),Xt=ye(Object,"create"),Ee=function(){function P(){}return function(V){if(!Pe(V))return{};if(Ht)return Ht(V);P.prototype=V;var nt=new P;return P.prototype=void 0,nt}}();function re(P){var V=-1,nt=P==null?0:P.length;for(this.clear();++V<nt;){var gt=P[V];this.set(gt[0],gt[1])}}function le(P){var V=-1,nt=P==null?0:P.length;for(this.clear();++V<nt;){var gt=P[V];this.set(gt[0],gt[1])}}function Ne(P){var V=-1,nt=P==null?0:P.length;for(this.clear();++V<nt;){var gt=P[V];this.set(gt[0],gt[1])}}function ge(P){var V=this.__data__=new le(P);this.size=V.size}function _e(P,V,nt){(nt!==void 0&&!Ve(P[V],nt)||nt===void 0&&!(V in P))&&Me(P,V,nt)}function qe(P,V,nt){var gt=P[V];rt.call(P,V)&&Ve(gt,nt)&&(nt!==void 0||V in P)||Me(P,V,nt)}function me(P,V){for(var nt=P.length;nt--;)if(Ve(P[nt][0],V))return nt;return-1}function Me(P,V,nt){V=="__proto__"&&Jt?Jt(P,V,{configurable:!0,enumerable:!0,value:nt,writable:!0}):P[V]=nt}re.prototype.clear=function(){this.__data__=Xt?Xt(null):{},this.size=0},re.prototype.delete=function(P){var V=this.has(P)&&delete this.__data__[P];return this.size-=V?1:0,V},re.prototype.get=function(P){var V=this.__data__;if(Xt){var nt=V[P];return nt===L?void 0:nt}return rt.call(V,P)?V[P]:void 0},re.prototype.has=function(P){var V=this.__data__;return Xt?V[P]!==void 0:rt.call(V,P)},re.prototype.set=function(P,V){var nt=this.__data__;return this.size+=this.has(P)?0:1,nt[P]=Xt&&V===void 0?L:V,this},le.prototype.clear=function(){this.__data__=[],this.size=0},le.prototype.delete=function(P){var V=this.__data__,nt=me(V,P);return!(nt<0||(nt==V.length-1?V.pop():vt.call(V,nt,1),--this.size,0))},le.prototype.get=function(P){var V=this.__data__,nt=me(V,P);return nt<0?void 0:V[nt][1]},le.prototype.has=function(P){return me(this.__data__,P)>-1},le.prototype.set=function(P,V){var nt=this.__data__,gt=me(nt,P);return gt<0?(++this.size,nt.push([P,V])):nt[gt][1]=V,this},Ne.prototype.clear=function(){this.size=0,this.__data__={hash:new re,map:new(Mt||le),string:new re}},Ne.prototype.delete=function(P){var V=ae(this,P).delete(P);return this.size-=V?1:0,V},Ne.prototype.get=function(P){return ae(this,P).get(P)},Ne.prototype.has=function(P){return ae(this,P).has(P)},Ne.prototype.set=function(P,V){var nt=ae(this,P),gt=nt.size;return nt.set(P,V),this.size+=nt.size==gt?0:1,this},ge.prototype.clear=function(){this.__data__=new le,this.size=0},ge.prototype.delete=function(P){var V=this.__data__,nt=V.delete(P);return this.size=V.size,nt},ge.prototype.get=function(P){return this.__data__.get(P)},ge.prototype.has=function(P){return this.__data__.has(P)},ge.prototype.set=function(P,V){var nt=this.__data__;if(nt instanceof le){var gt=nt.__data__;if(!Mt||gt.length<199)return gt.push([P,V]),this.size=++nt.size,this;nt=this.__data__=new Ne(gt)}return nt.set(P,V),this.size=nt.size,this};function Ae(P){return P==null?P===void 0?et:B:Lt&&Lt in Object(P)?function(V){var nt=rt.call(V,Lt),gt=V[Lt];try{V[Lt]=void 0;var Dt=!0}catch{}var he=Ot.call(V);return Dt&&(nt?V[Lt]=gt:delete V[Lt]),he}(P):function(V){return Ot.call(V)}(P)}function $e(P){return Ie(P)&&Ae(P)==N}function Oe(P,V,nt,gt,Dt){P!==V&&function(he,$t,ke){for(var Te=-1,je=Object(he),te=ke(he),Ue=te.length;Ue--;){var fe=te[++Te];if($t(je[fe],fe,je)===!1)break}}(V,function(he,$t){if(Dt||(Dt=new ge),Pe(he))(function(Te,je,te,Ue,fe,cr,de){var We=kt(Te,te),Le=kt(je,te),br=de.get(Le);if(br)_e(Te,te,br);else{var z,x,I,W,ht,At=cr?cr(We,Le,te+"",Te,je,de):void 0,Ct=At===void 0;if(Ct){var It=lr(Le),ne=!It&&kr(Le),pe=!It&&!ne&&Qe(Le);At=Le,It||ne||pe?lr(We)?At=We:Ie(ht=We)&&Nr(ht)?At=function(Tt,ie){var ee=-1,mt=Tt.length;for(ie||(ie=Array(mt));++ee<mt;)ie[ee]=Tt[ee];return ie}(We):ne?(Ct=!1,At=function(Tt,ie){return Tt.slice()}(Le)):pe?(Ct=!1,W=new(I=(z=Le).buffer).constructor(I.byteLength),new Pt(W).set(new Pt(I)),x=W,At=new z.constructor(x,z.byteOffset,z.length)):At=[]:function(Tt){if(!Ie(Tt)||Ae(Tt)!=$)return!1;var ie=Ft(Tt);if(ie===null)return!0;var ee=rt.call(ie,"constructor")&&ie.constructor;return typeof ee=="function"&&ee instanceof ee&&ut.call(ee)==pt}(Le)||sr(Le)?(At=We,sr(We)?At=function(Tt){return function(ie,ee,mt,Vt){var ce=!mt;mt||(mt={});for(var Se=-1,fr=ee.length;++Se<fr;){var Ze=ee[Se],Qt=void 0;Qt===void 0&&(Qt=ie[Ze]),ce?Me(mt,Ze,Qt):qe(mt,Ze,Qt)}return mt}(Tt,De(Tt))}(We):Pe(We)&&!ar(We)||(At=function(Tt){return typeof Tt.constructor!="function"||ve(Tt)?{}:Ee(Ft(Tt))}(Le))):Ct=!1}Ct&&(de.set(Le,At),fe(At,Le,Ue,cr,de),de.delete(Le)),_e(Te,te,At)}})(P,V,$t,nt,Oe,gt,Dt);else{var ke=gt?gt(kt(P,$t),he,$t+"",P,V,Dt):void 0;ke===void 0&&(ke=he),_e(P,$t,ke)}},De)}var Re=Jt?function(P,V){return Jt(P,"toString",{configurable:!0,enumerable:!1,value:(nt=V,function(){return nt}),writable:!0});var nt}:mr;function ae(P,V){var nt,gt,Dt=P.__data__;return((gt=typeof(nt=V))=="string"||gt=="number"||gt=="symbol"||gt=="boolean"?nt!=="__proto__":nt===null)?Dt[typeof V=="string"?"string":"hash"]:Dt.map}function ye(P,V){var nt=function(gt,Dt){return gt==null?void 0:gt[Dt]}(P,V);return function(gt){return!(!Pe(gt)||function(Dt){return!!ft&&ft in Dt}(gt))&&(ar(gt)?at:U).test(function(Dt){if(Dt!=null){try{return ut.call(Dt)}catch{}try{return Dt+""}catch{}}return""}(gt))}(nt)?nt:void 0}function be(P,V){var nt=typeof P;return!!(V=V??M)&&(nt=="number"||nt!="symbol"&&F.test(P))&&P>-1&&P%1==0&&P<V}function ve(P){var V=P&&P.constructor;return P===(typeof V=="function"&&V.prototype||dt)}function kt(P,V){if((V!=="constructor"||typeof P[V]!="function")&&V!="__proto__")return P[V]}var ir=function(P){var V=0,nt=0;return function(){var gt=Wt(),Dt=16-(gt-nt);if(nt=gt,Dt>0){if(++V>=800)return arguments[0]}else V=0;return P.apply(void 0,arguments)}}(Re);function Ve(P,V){return P===V||P!=P&&V!=V}var sr=$e(function(){return arguments}())?$e:function(P){return Ie(P)&&rt.call(P,"callee")&&!xt.call(P,"callee")},lr=Array.isArray;function Nr(P){return P!=null&&Xe(P.length)&&!ar(P)}var kr=Et||function(){return!1};function ar(P){if(!Pe(P))return!1;var V=Ae(P);return V==_||V==k||V==R||V==D}function Xe(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=M}function Pe(P){var V=typeof P;return P!=null&&(V=="object"||V=="function")}function Ie(P){return P!=null&&typeof P=="object"}var Qe=J?function(P){return function(V){return P(V)}}(J):function(P){return Ie(P)&&Xe(P.length)&&!!K[Ae(P)]};function De(P){return Nr(P)?function(V,nt){var gt=lr(V),Dt=!gt&&sr(V),he=!gt&&!Dt&&kr(V),$t=!gt&&!Dt&&!he&&Qe(V),ke=gt||Dt||he||$t,Te=ke?function(Ue,fe){for(var cr=-1,de=Array(Ue);++cr<Ue;)de[cr]=fe(cr);return de}(V.length,String):[],je=Te.length;for(var te in V)ke&&(te=="length"||he&&(te=="offset"||te=="parent")||$t&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||be(te,je))||Te.push(te);return Te}(P):function(V){if(!Pe(V))return function(he){var $t=[];if(he!=null)for(var ke in Object(he))$t.push(ke);return $t}(V);var nt=ve(V),gt=[];for(var Dt in V)(Dt!="constructor"||!nt&&rt.call(V,Dt))&&gt.push(Dt);return gt}(P)}var Ke,er=(Ke=function(P,V,nt){Oe(P,V,nt)},function(P,V){return ir(function(nt,gt,Dt){return gt=Yt(gt===void 0?nt.length-1:gt,0),function(){for(var he=arguments,$t=-1,ke=Yt(he.length-gt,0),Te=Array(ke);++$t<ke;)Te[$t]=he[gt+$t];$t=-1;for(var je=Array(gt+1);++$t<gt;)je[$t]=he[$t];return je[gt]=Dt(Te),function(te,Ue,fe){switch(fe.length){case 0:return te.call(Ue);case 1:return te.call(Ue,fe[0]);case 2:return te.call(Ue,fe[0],fe[1]);case 3:return te.call(Ue,fe[0],fe[1],fe[2])}return te.apply(Ue,fe)}(nt,this,je)}}(P,V,mr),P+"")}(function(P,V){var nt=-1,gt=V.length,Dt=gt>1?V[gt-1]:void 0,he=gt>2?V[2]:void 0;for(Dt=Ke.length>3&&typeof Dt=="function"?(gt--,Dt):void 0,he&&function(ke,Te,je){if(!Pe(je))return!1;var te=typeof Te;return!!(te=="number"?Nr(je)&&be(Te,je.length):te=="string"&&Te in je)&&Ve(je[Te],ke)}(V[0],V[1],he)&&(Dt=gt<3?void 0:Dt,gt=1),P=Object(P);++nt<gt;){var $t=V[nt];$t&&Ke(P,$t,nt)}return P}));function mr(P){return P}m.exports=er},382:function(m,g,y){Object.defineProperty(g,"__esModule",{value:!0});const L=y(861),M=y(842);var N;(function(R){R.compose=function(_={},k={},B=!1){typeof _!="object"&&(_={}),typeof k!="object"&&(k={});let $=L(k);B||($=Object.keys($).reduce((D,et)=>($[et]!=null&&(D[et]=$[et]),D),{}));for(const D in _)_[D]!==void 0&&k[D]===void 0&&($[D]=_[D]);return Object.keys($).length>0?$:void 0},R.diff=function(_={},k={}){typeof _!="object"&&(_={}),typeof k!="object"&&(k={});const B=Object.keys(_).concat(Object.keys(k)).reduce(($,D)=>(M(_[D],k[D])||($[D]=k[D]===void 0?null:k[D]),$),{});return Object.keys(B).length>0?B:void 0},R.invert=function(_={},k={}){_=_||{};const B=Object.keys(k).reduce(($,D)=>(k[D]!==_[D]&&_[D]!==void 0&&($[D]=k[D]),$),{});return Object.keys(_).reduce(($,D)=>(_[D]!==k[D]&&k[D]===void 0&&($[D]=null),$),B)},R.transform=function(_,k,B=!1){if(typeof _!="object")return k;if(typeof k!="object")return;if(!B)return k;const $=Object.keys(k).reduce((D,et)=>(_[et]===void 0&&(D[et]=k[et]),D),{});return Object.keys($).length>0?$:void 0}})(N||(N={})),g.default=N},32:function(m,g,y){Object.defineProperty(g,"__esModule",{value:!0}),g.AttributeMap=g.OpIterator=g.Op=void 0;const L=y(386),M=y(861),N=y(842),R=y(382);g.AttributeMap=R.default;const _=y(427);g.Op=_.default;const k=y(505);g.OpIterator=k.default;const B="\0",$=(et,U)=>{if(typeof et!="object"||et===null)throw new Error("cannot retain a "+typeof et);if(typeof U!="object"||U===null)throw new Error("cannot retain a "+typeof U);const F=Object.keys(et)[0];if(!F||F!==Object.keys(U)[0])throw new Error(`embed types not matched: ${F} != ${Object.keys(U)[0]}`);return[F,et[F],U[F]]};class D{constructor(U){Array.isArray(U)?this.ops=U:U!=null&&Array.isArray(U.ops)?this.ops=U.ops:this.ops=[]}static registerEmbed(U,F){this.handlers[U]=F}static unregisterEmbed(U){delete this.handlers[U]}static getHandler(U){const F=this.handlers[U];if(!F)throw new Error(`no handlers for embed type "${U}"`);return F}insert(U,F){const K={};return typeof U=="string"&&U.length===0?this:(K.insert=U,F!=null&&typeof F=="object"&&Object.keys(F).length>0&&(K.attributes=F),this.push(K))}delete(U){return U<=0?this:this.push({delete:U})}retain(U,F){if(typeof U=="number"&&U<=0)return this;const K={retain:U};return F!=null&&typeof F=="object"&&Object.keys(F).length>0&&(K.attributes=F),this.push(K)}push(U){let F=this.ops.length,K=this.ops[F-1];if(U=M(U),typeof K=="object"){if(typeof U.delete=="number"&&typeof K.delete=="number")return this.ops[F-1]={delete:K.delete+U.delete},this;if(typeof K.delete=="number"&&U.insert!=null&&(F-=1,K=this.ops[F-1],typeof K!="object"))return this.ops.unshift(U),this;if(N(U.attributes,K.attributes)){if(typeof U.insert=="string"&&typeof K.insert=="string")return this.ops[F-1]={insert:K.insert+U.insert},typeof U.attributes=="object"&&(this.ops[F-1].attributes=U.attributes),this;if(typeof U.retain=="number"&&typeof K.retain=="number")return this.ops[F-1]={retain:K.retain+U.retain},typeof U.attributes=="object"&&(this.ops[F-1].attributes=U.attributes),this}}return F===this.ops.length?this.ops.push(U):this.ops.splice(F,0,U),this}chop(){const U=this.ops[this.ops.length-1];return U&&typeof U.retain=="number"&&!U.attributes&&this.ops.pop(),this}filter(U){return this.ops.filter(U)}forEach(U){this.ops.forEach(U)}map(U){return this.ops.map(U)}partition(U){const F=[],K=[];return this.forEach(lt=>{(U(lt)?F:K).push(lt)}),[F,K]}reduce(U,F){return this.ops.reduce(U,F)}changeLength(){return this.reduce((U,F)=>F.insert?U+_.default.length(F):F.delete?U-F.delete:U,0)}length(){return this.reduce((U,F)=>U+_.default.length(F),0)}slice(U=0,F=1/0){const K=[],lt=new k.default(this.ops);let Nt=0;for(;Nt<F&&lt.hasNext();){let yt;Nt<U?yt=lt.next(U-Nt):(yt=lt.next(F-Nt),K.push(yt)),Nt+=_.default.length(yt)}return new D(K)}compose(U){const F=new k.default(this.ops),K=new k.default(U.ops),lt=[],Nt=K.peek();if(Nt!=null&&typeof Nt.retain=="number"&&Nt.attributes==null){let zt=Nt.retain;for(;F.peekType()==="insert"&&F.peekLength()<=zt;)zt-=F.peekLength(),lt.push(F.next());Nt.retain-zt>0&&K.next(Nt.retain-zt)}const yt=new D(lt);for(;F.hasNext()||K.hasNext();)if(K.peekType()==="insert")yt.push(K.next());else if(F.peekType()==="delete")yt.push(F.next());else{const zt=Math.min(F.peekLength(),K.peekLength()),C=F.next(zt),E=K.next(zt);if(E.retain){const q={};if(typeof C.retain=="number")q.retain=typeof E.retain=="number"?zt:E.retain;else if(typeof E.retain=="number")C.retain==null?q.insert=C.insert:q.retain=C.retain;else{const j=C.retain==null?"insert":"retain",[H,X,J]=$(C[j],E.retain),ot=D.getHandler(H);q[j]={[H]:ot.compose(X,J,j==="retain")}}const Z=R.default.compose(C.attributes,E.attributes,typeof C.retain=="number");if(Z&&(q.attributes=Z),yt.push(q),!K.hasNext()&&N(yt.ops[yt.ops.length-1],q)){const j=new D(F.rest());return yt.concat(j).chop()}}else typeof E.delete=="number"&&(typeof C.retain=="number"||typeof C.retain=="object"&&C.retain!==null)&&yt.push(E)}return yt.chop()}concat(U){const F=new D(this.ops.slice());return U.ops.length>0&&(F.push(U.ops[0]),F.ops=F.ops.concat(U.ops.slice(1))),F}diff(U,F){if(this.ops===U.ops)return new D;const K=[this,U].map(C=>C.map(E=>{if(E.insert!=null)return typeof E.insert=="string"?E.insert:B;throw new Error("diff() called "+(C===U?"on":"with")+" non-document")}).join("")),lt=new D,Nt=L(K[0],K[1],F,!0),yt=new k.default(this.ops),zt=new k.default(U.ops);return Nt.forEach(C=>{let E=C[1].length;for(;E>0;){let q=0;switch(C[0]){case L.INSERT:q=Math.min(zt.peekLength(),E),lt.push(zt.next(q));break;case L.DELETE:q=Math.min(E,yt.peekLength()),yt.next(q),lt.delete(q);break;case L.EQUAL:q=Math.min(yt.peekLength(),zt.peekLength(),E);const Z=yt.next(q),j=zt.next(q);N(Z.insert,j.insert)?lt.retain(q,R.default.diff(Z.attributes,j.attributes)):lt.push(j).delete(q)}E-=q}}),lt.chop()}eachLine(U,F=`
`){const K=new k.default(this.ops);let lt=new D,Nt=0;for(;K.hasNext();){if(K.peekType()!=="insert")return;const yt=K.peek(),zt=_.default.length(yt)-K.peekLength(),C=typeof yt.insert=="string"?yt.insert.indexOf(F,zt)-zt:-1;if(C<0)lt.push(K.next());else if(C>0)lt.push(K.next(C));else{if(U(lt,K.next(1).attributes||{},Nt)===!1)return;Nt+=1,lt=new D}}lt.length()>0&&U(lt,{},Nt)}invert(U){const F=new D;return this.reduce((K,lt)=>{if(lt.insert)F.delete(_.default.length(lt));else{if(typeof lt.retain=="number"&&lt.attributes==null)return F.retain(lt.retain),K+lt.retain;if(lt.delete||typeof lt.retain=="number"){const Nt=lt.delete||lt.retain;return U.slice(K,K+Nt).forEach(yt=>{lt.delete?F.push(yt):lt.retain&&lt.attributes&&F.retain(_.default.length(yt),R.default.invert(lt.attributes,yt.attributes))}),K+Nt}if(typeof lt.retain=="object"&&lt.retain!==null){const Nt=U.slice(K,K+1),yt=new k.default(Nt.ops).next(),[zt,C,E]=$(lt.retain,yt.insert),q=D.getHandler(zt);return F.retain({[zt]:q.invert(C,E)},R.default.invert(lt.attributes,yt.attributes)),K+1}}return K},0),F.chop()}transform(U,F=!1){if(F=!!F,typeof U=="number")return this.transformPosition(U,F);const K=U,lt=new k.default(this.ops),Nt=new k.default(K.ops),yt=new D;for(;lt.hasNext()||Nt.hasNext();)if(lt.peekType()!=="insert"||!F&&Nt.peekType()==="insert")if(Nt.peekType()==="insert")yt.push(Nt.next());else{const zt=Math.min(lt.peekLength(),Nt.peekLength()),C=lt.next(zt),E=Nt.next(zt);if(C.delete)continue;if(E.delete)yt.push(E);else{const q=C.retain,Z=E.retain;let j=typeof Z=="object"&&Z!==null?Z:zt;if(typeof q=="object"&&q!==null&&typeof Z=="object"&&Z!==null){const H=Object.keys(q)[0];if(H===Object.keys(Z)[0]){const X=D.getHandler(H);X&&(j={[H]:X.transform(q[H],Z[H],F)})}}yt.retain(j,R.default.transform(C.attributes,E.attributes,F))}}else yt.retain(_.default.length(lt.next()));return yt.chop()}transformPosition(U,F=!1){F=!!F;const K=new k.default(this.ops);let lt=0;for(;K.hasNext()&&lt<=U;){const Nt=K.peekLength(),yt=K.peekType();K.next(),yt!=="delete"?(yt==="insert"&&(lt<U||!F)&&(U+=Nt),lt+=Nt):U-=Math.min(Nt,U-lt)}return U}}D.Op=_.default,D.OpIterator=k.default,D.AttributeMap=R.default,D.handlers={},g.default=D,m.exports=D,m.exports.default=D},427:function(m,g){var y;Object.defineProperty(g,"__esModule",{value:!0}),function(L){L.length=function(M){return typeof M.delete=="number"?M.delete:typeof M.retain=="number"?M.retain:typeof M.retain=="object"&&M.retain!==null?1:typeof M.insert=="string"?M.insert.length:1}}(y||(y={})),g.default=y},505:function(m,g,y){Object.defineProperty(g,"__esModule",{value:!0});const L=y(427);g.default=class{constructor(M){this.ops=M,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(M){M||(M=1/0);const N=this.ops[this.index];if(N){const R=this.offset,_=L.default.length(N);if(M>=_-R?(M=_-R,this.index+=1,this.offset=0):this.offset+=M,typeof N.delete=="number")return{delete:M};{const k={};return N.attributes&&(k.attributes=N.attributes),typeof N.retain=="number"?k.retain=M:typeof N.retain=="object"&&N.retain!==null?k.retain=N.retain:typeof N.insert=="string"?k.insert=N.insert.substr(R,M):k.insert=N.insert,k}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?L.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const M=this.ops[this.index];return M?typeof M.delete=="number"?"delete":typeof M.retain=="number"||typeof M.retain=="object"&&M.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const M=this.offset,N=this.index,R=this.next(),_=this.ops.slice(this.index);return this.offset=M,this.index=N,[R].concat(_)}}return[]}}},912:function(m){m.exports=e}},c={};function u(m){var g=c[m];if(g!==void 0)return g.exports;var y=c[m]={id:m,loaded:!1,exports:{}};return i[m](y,y.exports,u),y.loaded=!0,y.exports}u.n=function(m){var g=m&&m.__esModule?function(){return m.default}:function(){return m};return u.d(g,{a:g}),g},u.d=function(m,g){for(var y in g)u.o(g,y)&&!u.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:g[y]})},u.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),u.o=function(m,g){return Object.prototype.hasOwnProperty.call(m,g)},u.nmd=function(m){return m.paths=[],m.children||(m.children=[]),m};var f={};return function(){u.d(f,{default:function(){return Ac}});var m=u(912),g=u.n(m),y=u(32),L=u.n(y),M='<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M36 19H12" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 9H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 29H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M36 39H12" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',N='<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M42 9H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M34 19H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 29H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M34 39H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',R='<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M42 9H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 19H14" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 29H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 39H14" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>';const _=["data-row","width","height","colspan","rowspan","style"],k={"border-style":"none","border-color":"","border-width":"","background-color":"",width:"",height:"",padding:"","text-align":"left","vertical-align":"middle"},B=["border-style","border-color","border-width","background-color","width","height","padding","text-align","vertical-align"],$=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","currentcolor","currentcolor","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],D=["border-style","border-color","border-width","background-color","width","height","align"],et=g().import("formats/list"),U=g().import("blots/container"),F=["colspan","rowspan"];class K extends U{static create(r){const n=super.create();for(const a of F)r[a]=="1"&&delete r[a];const l=Object.keys(r);for(const a of l)a==="data-row"?n.setAttribute(a,r[a]):a==="cellId"?n.setAttribute("data-cell",r[a]):n.setAttribute(`data-${a}`,r[a]);return n}format(r,n){return this.wrap(r,n)}static formats(r){const n=_.reduce((l,a)=>{const h=a.includes("data")?a:`data-${a}`;return r.hasAttribute(h)&&(l[a]=r.getAttribute(h)),l},{});n.cellId=r.getAttribute("data-cell");for(const l of F)n[l]||(n[l]="1");return n}formats(){const r=this.statics.formats(this.domNode,this.scroll);return{[this.statics.blotName]:r}}}K.blotName="table-list-container",K.className="table-list-container",K.tagName="OL";class lt extends et{format(r,n,l){const a=this.formats()[this.statics.blotName];if(r==="list"){const[h,p]=this.getCellFormats(this.parent);if(!n||n===a)return this.setReplace(l,h),this.replaceWith(xt.blotName,p);if(n!==a)return this.replaceWith(this.statics.blotName,n)}else if(r===K.blotName){typeof n=="string"&&(n={cellId:n});const[h,p]=this.getCorrectCellFormats(n);this.wrap(vt.blotName,h),this.wrap(r,Object.assign(Object.assign({},h),{cellId:p}))}else{if(r==="header"){const[h,p]=this.getCellFormats(this.parent);return this.setReplace(l,h),this.replaceWith("table-header",{cellId:p,value:n})}if(r===vt.blotName){const h=this.getListContainer(this.parent);if(!h)return;const p=h.formats()[h.statics.blotName];this.wrap(r,n),this.wrap(K.blotName,Object.assign(Object.assign({},p),n))}else if(r!==this.statics.blotName||n)super.format(r,n);else{const[,h]=this.getCellFormats(this.parent);this.replaceWith(xt.blotName,h)}}}getCellFormats(r){return j(ut(r))}getCorrectCellFormats(r){const n=ut(this.parent);if(n){const[l,a]=j(n),h=Object.assign(Object.assign({},l),r),p=h.cellId||a;return delete h.cellId,[h,p]}{const l=r.cellId,a=Object.assign({},r);return delete a.cellId,[a,l]}}getListContainer(r){for(;r;){if(r.statics.blotName===K.blotName)return r;r=r.parent}return null}static register(){g().register(K)}setReplace(r,n){r?this.parent.replaceWith(vt.blotName,n):this.wrap(vt.blotName,n)}}lt.blotName="table-list",lt.className="table-list",g().register({"formats/table-list":lt},!0),K.allowedChildren=[lt],lt.requiredContainer=K;const Nt=g().import("formats/header");class yt extends Nt{static create(r){const{cellId:n,value:l}=r,a=super.create(l);return a.setAttribute("data-cell",n),a}format(r,n,l){if(r==="header"){const a=this.statics.formats(this.domNode).value,h=this.domNode.getAttribute("data-cell");a!=n&&n?super.format("table-header",{cellId:h,value:n}):this.replaceWith(xt.blotName,h)}else{if(r==="list"){const[a,h]=this.getCellFormats(this.parent);return l?this.wrap(K.blotName,Object.assign(Object.assign({},a),{cellId:h})):this.wrap(vt.blotName,a),this.replaceWith("table-list",n)}if(r===vt.blotName)return this.wrap(r,n);if(r!==this.statics.blotName||n)super.format(r,n);else{const a=this.domNode.getAttribute("data-cell");this.replaceWith(xt.blotName,a)}}}static formats(r){return{cellId:r.getAttribute("data-cell"),value:this.tagName.indexOf(r.tagName)+1}}formats(){const r=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(r[this.statics.blotName]=n),r}getCellFormats(r){return j(ut(r))}}yt.blotName="table-header",yt.className="ql-table-header",g().register({"formats/table-header":yt},!0);var zt=yt;function C(s){if(typeof s!="string"||!s)return s;const r=s.slice(-2),n=s.slice(0,-2);return`${Math.round(parseFloat(n))}${r}`}function E(s){const r=document.createElement("div");return r.innerText=s,r.classList.add("ql-table-tooltip","ql-hidden"),r}function q(s){return s.replace(/mso.*?;/g,"")}function Z(s){const[r]=s.descendant(xt),[n]=s.descendant(K),[l]=s.descendant(zt);return r||n||l}function j(s){const r=vt.formats(s.domNode),n=Z(s);if(n)return[r,H(n.formats()[n.statics.blotName])];{const l=r["data-row"].split("-")[1];return[r,`cell-${l}`]}}function H(s){return s instanceof Object?s.cellId:s}function X(s,r){return s.closest(r)}function J(s,r){return{left:Math.min(s.left,r.left),right:Math.max(s.right,r.right),top:Math.min(s.top,r.top),bottom:Math.max(s.bottom,r.bottom)}}function ot(s,r,n){const l=g().find(r).descendants(Yt);let a=0;return l.reduce((h,p)=>{const{left:b,width:A}=Q(p.domNode,n);return a=a||b,a+2>=s.left&&a-2+A<=s.right&&h.push(p.domNode),a+=A,h},[])}function st(s,r,n,l){return g().find(r).descendants(vt).reduce((a,h)=>{const{left:p,top:b,width:A,height:S}=Q(h.domNode,n);switch(l){case"column":(p+2>=s.left&&p-2+A<=s.right||p+2<s.right&&s.right<p-2+A||s.left>p+2&&s.left<p-2+A)&&a.push(h.domNode);break;case"row":break;default:p+2>=s.left&&p-2+A<=s.right&&b+2>=s.top&&b-2+S<=s.bottom&&a.push(h.domNode)}return a},[])}function dt(s){return s.replace(/data-[a-z]+="[^"]*"/g,"").replace(/class="[^"]*"/g,r=>r.replace("ql-cell-selected","").replace("ql-cell-focused","").replace("ql-table-block","")).replace(/class="\s*"/g,"")}function Q(s,r){const n=s.getBoundingClientRect(),l=r.getBoundingClientRect(),a=n.left-l.left-r.scrollLeft,h=n.top-l.top-r.scrollTop,p=n.width,b=n.height;return{left:a,top:h,width:p,height:b,right:a+p,bottom:h+b}}function ut(s){for(;s;){if(s.statics.blotName===vt.blotName)return s;s=s.parent}return null}function rt(s,r){const n=getComputedStyle(s),l=s.style;return r.reduce((a,h)=>{return a[h]=(p=l.getPropertyValue(h)||n.getPropertyValue(h)).startsWith("rgba(")?function(b){b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"");const A=Math.round(+b[0]),S=Math.round(+b[1]),T=Math.round(+b[2]),w=Math.round(255*+b[3]).toString(16).toUpperCase().padStart(2,"0");return"#"+((1<<24)+(A<<16)+(S<<8)+T).toString(16).slice(1)+w}(p):p.startsWith("rgb(")?`#${(p=p.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(b=>`00${parseInt(b,10).toString(16)}`.slice(-2)).join("")}`:p,a;var p},{})}function ft(s){return!s||!!/^#([A-Fa-f0-9]{3,6})$/.test(s)||!!/^rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)$/.test(s)||function(r){for(const n of $)if(n===r)return!0;return!1}(s)}function Ot(s){if(!s)return!0;const r=s.slice(-2);return r==="px"||r==="em"||!/[a-z]/.test(r)&&!isNaN(parseFloat(r))}function pt(s,r){for(const n in r)s.setAttribute(n,r[n])}function at(s,r){const n=s.style;if(n)for(const l in r)n.setProperty(l,r[l]);else s.setAttribute("style",r.toString())}function Rt(s,r,n){const l=g().find(s);if(!l)return;const a=l.colgroup(),h=l.temporary();if(a){let p=0;const b=a.domNode.querySelectorAll("col");for(const A of b)p+=~~A.getAttribute("width");at(h.domNode,{width:`${p}px`})}else at(h.domNode,{width:~~(r.width+n)+"px"})}const Ut=g().import("blots/block"),Pt=g().import("blots/container"),Ft=["border","cellspacing","style","data-class"],Ht=["width"];class xt extends Ut{static create(r){const n=super.create();return r?n.setAttribute("data-cell",r):n.setAttribute("data-cell",Xt()),n}format(r,n){const l=this.formats()[this.statics.blotName];if(r===vt.blotName&&n)return this.wrap(Lt.blotName),this.wrap(r,n);if(r===Mt.blotName)this.wrap(r,n);else{if(r==="header")return this.replaceWith("table-header",{cellId:l,value:n});if(r==="table-header"&&n)return this.wrapTableCell(this.parent),this.replaceWith(r,n);if(r==="list"||r==="table-list"&&n){const a=this.getCellFormats(this.parent);return this.wrap(K.blotName,Object.assign(Object.assign({},a),{cellId:l})),this.replaceWith("table-list",n)}super.format(r,n)}}formats(){const r=this.attributes.values(),n=this.domNode.getAttribute("data-cell");return n!=null&&(r[this.statics.blotName]=n),r}getCellFormats(r){const n=ut(r);if(!n)return{};const[l]=j(n);return l}wrapTableCell(r){const n=ut(r);if(!n)return;const[l]=j(n);this.wrap(vt.blotName,l)}}xt.blotName="table-cell-block",xt.className="ql-table-block",xt.tagName="P";class vt extends Pt{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null&&this.next.children.head.formats){const r=this.children.head.formats()[this.children.head.statics.blotName],n=this.children.tail.formats()[this.children.tail.statics.blotName],l=this.next.children.head.formats()[this.next.children.head.statics.blotName],a=this.next.children.tail.formats()[this.next.children.tail.statics.blotName],h=H(r),p=H(n),b=H(l),A=H(a);return h===p&&h===b&&h===A}return!1}static create(r){const n=super.create(),l=Object.keys(r);for(const a of l)r[a]&&n.setAttribute(a,r[a]);return n}static formats(r){const n=this.getEmptyRowspan(r),l=_.reduce((a,h)=>(r.hasAttribute(h)&&(a[h]=h==="rowspan"&&n?""+(~~r.getAttribute(h)-n):q(r.getAttribute(h))),a),{});return this.hasColgroup(r)&&(delete l.width,l.style&&(l.style=l.style.replace(/width.*?;/g,""))),l}formats(){const r=this.statics.formats(this.domNode,this.scroll);return{[this.statics.blotName]:r}}static getEmptyRowspan(r){let n=r.parentElement.nextElementSibling,l=0;for(;n&&n.tagName==="TR"&&!n.innerHTML.replace(/\s/g,"");)l++,n=n.nextElementSibling;return l}static hasColgroup(r){for(;r&&r.tagName!=="TBODY";)r=r.parentElement;for(;r;){if(r.tagName==="COLGROUP")return!0;r=r.previousElementSibling}return!1}html(){return this.domNode.outerHTML.replace(/<(ol)[^>]*><li[^>]* data-list="bullet">(?:.*?)<\/li><\/(ol)>/gi,(r,n,l)=>r.replace(n,"ul").replace(l,"ul"))}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}setChildrenId(r){this.children.forEach(n=>{n.domNode.setAttribute("data-cell",r)})}table(){let r=this.parent;for(;r!=null&&r.statics.blotName!=="table-container";)r=r.parent;return r}optimize(r){super.optimize(r),this.children.forEach(n=>{if(n.next!=null&&H(n.formats()[n.statics.blotName])!==H(n.next.formats()[n.next.statics.blotName])){const l=this.splitAfter(n);l&&l.optimize(),this.prev&&this.prev.optimize()}})}}vt.blotName="table-cell",vt.tagName="TD";class Lt extends Pt{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null&&this.next.children.head.formats){const r=this.children.head.formats()[this.children.head.statics.blotName],n=this.children.tail.formats()[this.children.tail.statics.blotName],l=this.next.children.head.formats()[this.next.children.head.statics.blotName],a=this.next.children.tail.formats()[this.next.children.tail.statics.blotName];return r["data-row"]===n["data-row"]&&r["data-row"]===l["data-row"]&&r["data-row"]===a["data-row"]}return!1}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}}Lt.blotName="table-row",Lt.tagName="TR";class Jt extends Pt{}Jt.blotName="table-body",Jt.tagName="TBODY";class Et extends Ut{static create(r){const n=super.create(),l=Object.keys(r),a=Mt.defaultClassName;for(const h of l)h!=="data-class"||~r[h].indexOf(a)?n.setAttribute(h,r[h]):n.setAttribute(h,`${a} ${r[h]}`);return n}static formats(r){return Ft.reduce((n,l)=>(r.hasAttribute(l)&&(n[l]=r.getAttribute(l)),n),{})}formats(){const r=this.statics.formats(this.domNode,this.scroll);return{[this.statics.blotName]:r}}optimize(...r){if(this.statics.requiredContainer&&this.parent instanceof this.statics.requiredContainer){const n=this.formats()[this.statics.blotName];for(const l of Ft)n[l]?l==="data-class"?this.parent.domNode.setAttribute("class",n[l]):this.parent.domNode.setAttribute(l,n[l]):this.parent.domNode.removeAttribute(l)}super.optimize(...r)}}Et.blotName="table-temporary",Et.className="ql-table-temporary",Et.tagName="temporary";class Yt extends Ut{static create(r){const n=super.create(),l=Object.keys(r);for(const a of l)n.setAttribute(a,r[a]);return n}static formats(r){return Ht.reduce((n,l)=>(r.hasAttribute(l)&&(n[l]=r.getAttribute(l)),n),{})}formats(){const r=this.statics.formats(this.domNode,this.scroll);return{[this.statics.blotName]:r}}html(){return this.domNode.outerHTML}}Yt.blotName="table-col",Yt.tagName="COL";class Wt extends Pt{}Wt.blotName="table-colgroup",Wt.tagName="COLGROUP";class Mt extends Pt{colgroup(){const[r]=this.descendant(Wt);return r||this.findChild("table-colgroup")}deleteColumn(r,n,l,a=[]){const h=this.tbody(),p=this.descendants(vt);if(h!=null&&h.children.head!=null)if(n.length===p.length)l();else{for(const[b,A]of r)this.setCellColspan(g().find(b),A);for(const b of[...n,...a])b.parentElement.children.length===1&&this.setCellRowspan(b.parentElement.previousElementSibling),b.remove()}}deleteRow(r,n){const l=this.tbody();if(l!=null&&l.children.head!=null)if(r.length===l.children.length)n();else{const a=new WeakMap,h=[],p=[],b=this.getMaxColumns(l.children.head.children);for(const A of r){const S=this.getCorrectRow(A,b);S&&S.children.forEach(T=>{var w;const G=~~T.domNode.getAttribute("rowspan")||1;if(G>1){const it=T.statics.blotName,[ct]=j(T);if(r.includes(T.parent)){const bt=(w=T.parent)===null||w===void 0?void 0:w.next;if(a.has(T)){const{rowspan:St}=a.get(T);a.set(T,{next:bt,rowspan:St-1})}else a.set(T,{next:bt,rowspan:G-1}),p.push(T)}else T.replaceWith(it,Object.assign(Object.assign({},ct),{rowspan:G-1}))}})}for(const A of p){const[S]=j(A),{right:T,width:w}=A.domNode.getBoundingClientRect(),{next:G,rowspan:it}=a.get(A);this.setColumnCells(G,h,{position:T,width:w},S,it,A)}for(const[A,S,T,w]of h){const G=this.scroll.create(vt.blotName,S);w.moveChildren(G);const it=Xt();G.setChildrenId(it),A.insertBefore(G,T),w.remove()}for(const A of r)A.remove()}}deleteTable(){this.remove()}findChild(r){let n=this.children.head;for(;n;){if(n.statics.blotName===r)return n;n=n.next}return null}getCopyTable(){return this.domNode.outerHTML.replace(/<temporary[^>]*>(.*?)<\/temporary>/gi,"").replace(/<td[^>]*>(.*?)<\/td>/gi,r=>dt(r))}getCorrectRow(r,n){let l=!1;for(;r&&!l;){if(n===this.getMaxColumns(r.children))return l=!0,r;r=r.prev}return r}getInsertRow(r,n,l){const a=this.tbody();if(a==null||a.children.head==null)return;const h=Ee(),p=this.scroll.create(Lt.blotName),b=this.getMaxColumns(a.children.head.children);return this.getMaxColumns(r.children)===b?(r.children.forEach(A=>{const S={height:"24","data-row":h},T=~~A.domNode.getAttribute("colspan")||1;this.insertTableCell(T,S,p)}),p):(this.getCorrectRow(r.prev,b).children.forEach(A=>{const S={height:"24","data-row":h},T=~~A.domNode.getAttribute("colspan")||1,w=~~A.domNode.getAttribute("rowspan")||1;if(w>1)if(l>0&&!n)this.insertTableCell(T,S,p);else{const[G]=j(A);A.replaceWith(A.statics.blotName,Object.assign(Object.assign({},G),{rowspan:w+1}))}else this.insertTableCell(T,S,p)}),p)}getMaxColumns(r){return r.reduce((n,l)=>n+(~~l.domNode.getAttribute("colspan")||1),0)}insertColumn(r,n,l,a){const h=this.colgroup(),p=this.tbody();if(p==null||p.children.head==null)return;const b=[],A=[];let S=p.children.head;for(;S;){if(n&&a>0){const T=S.children.tail.domNode.getAttribute("data-row");b.push([S,T,null,null])}else this.setColumnCells(S,b,{position:r,width:l});S=S.next}if(h)if(n)A.push([h,null]);else{let T=0,w=0,G=h.children.head;for(;G;){const{left:it,width:ct}=G.domNode.getBoundingClientRect();if(T=T||it,w=T+ct,Math.abs(T-r)<=2){A.push([h,G]);break}if(Math.abs(w-r)<=2&&!G.next){A.push([h,null]);break}T+=ct,G=G.next}}for(const[T,w,G]of b)T?this.insertColumnCell(T,w,G):this.setCellColspan(G,1);for(const[T,w]of A)this.insertCol(T,w)}insertCol(r,n){const l=this.scroll.create(Yt.blotName,{width:"72"});r.insertBefore(l,n)}insertColumnCell(r,n,l){const a=this.colgroup()?{"data-row":n}:{"data-row":n,width:"72"},h=this.scroll.create(vt.blotName,a),p=this.scroll.create(xt.blotName,Xt());if(h.appendChild(p),!r){const b=this.tbody();r=this.scroll.create(Lt.blotName),b.insertBefore(r,null)}return r.insertBefore(h,l),p.optimize(),h}insertRow(r,n){const l=this.tbody();if(l==null||l.children.head==null)return;const a=l.children.at(r),h=a||l.children.at(r-1),p=this.getInsertRow(h,a,n);l.insertBefore(p,a)}insertTableCell(r,n,l){r>1?Object.assign(n,{colspan:r}):delete n.colspan;const a=this.scroll.create(vt.blotName,n),h=this.scroll.create(xt.blotName,Xt());a.appendChild(h),l.appendChild(a),h.optimize()}optimize(r){super.optimize(r);const n=this.descendants(Et);if(this.setClassName(n),n.length>1){n.shift();for(const l of n)l.remove()}}setCellColspan(r,n){const l=r.statics.blotName,a=r.formats()[l],h=(~~a.colspan||1)+n;h>1?Object.assign(a,{colspan:h}):delete a.colspan,r.replaceWith(l,a)}setCellRowspan(r){for(;r;){const n=r.querySelectorAll("td[rowspan]");if(n.length){for(const l of n){const a=g().find(l),h=a.statics.blotName,p=a.formats()[h],b=(~~p.rowspan||1)-1,A=Z(a);b>1?Object.assign(p,{rowspan:b}):delete p.rowspan,A.format(h,p)}break}r=r.previousElementSibling}}setClassName(r){const n=this.statics.defaultClassName,l=r[0],a=this.domNode.getAttribute("class"),h=(p,b)=>{const A=p.domNode.getAttribute("data-class");A!==b&&b!=null&&p.domNode.setAttribute("data-class",(S=>{const T=(S||"").split(/\s+/);return T.find(w=>w===n)||T.unshift(n),T.join(" ").trim()})(b)),b||A||p.domNode.setAttribute("data-class",n)};if(l)h(l,a);else{const p=this.prev;if(!p)return;const[b]=p.descendant(vt),[A]=p.descendant(Et);!b&&A&&h(A,a)}}setColumnCells(r,n,l,a,h,p){if(!r)return;const{position:b,width:A}=l;let S=r.children.head;for(;S;){const{left:T,right:w}=S.domNode.getBoundingClientRect(),G=S.domNode.getAttribute("data-row");typeof a=="object"&&Object.assign(a,{rowspan:h,"data-row":G});const it=a||G;if(Math.abs(T-b)<=2){n.push([r,it,S,p]);break}if(Math.abs(w-b)<=2&&!S.next){n.push([r,it,null,p]);break}if(Math.abs(T-b-A)<=2){n.push([r,it,S,p]);break}if(b>T&&b<w){n.push([null,it,S,p]);break}S=S.next}}tbody(){const[r]=this.descendant(Jt);return r||this.findChild("table-body")}temporary(){const[r]=this.descendant(Et);return r}}function Xt(){return`cell-${Math.random().toString(36).slice(2,6)}`}function Ee(){return`row-${Math.random().toString(36).slice(2,6)}`}Mt.blotName="table-container",Mt.defaultClassName="ql-table-better",Mt.tagName="TABLE",Mt.allowedChildren=[Jt,Et,Wt],Jt.requiredContainer=Mt,Et.requiredContainer=Mt,Wt.requiredContainer=Mt,Jt.allowedChildren=[Lt],Lt.requiredContainer=Jt,Wt.allowedChildren=[Yt],Yt.requiredContainer=Wt,Lt.allowedChildren=[vt],vt.requiredContainer=Lt,vt.allowedChildren=[xt,zt,K],xt.requiredContainer=vt,zt.requiredContainer=vt,K.requiredContainer=vt;var re=u(930),le=u.n(re);const Ne=["border","cellspacing","style","class"];function ge(s,r,n){return typeof r=="object"?Object.keys(r).reduce((l,a)=>ge(l,a,r[a]),s):s.reduce((l,a)=>a.attributes&&a.attributes[r]?l.push(a):l.insert(a.insert,le()({},{[r]:n},a.attributes)),new(L()))}function _e(s,r){const n=s.parentNode.tagName==="TABLE"?s.parentNode:s.parentNode.parentNode,l=Array.from(n.querySelectorAll("tr")).indexOf(s)+1;return s.innerHTML.replace(/\s/g,"")?ge(r,"table-cell",l):new(L())}function qe(s,r){var n;const l=s.parentNode.parentNode.tagName==="TABLE"?s.parentNode.parentNode:s.parentNode.parentNode.parentNode,a=Array.from(l.querySelectorAll("tr")),h=s.tagName,p=Array.from(s.parentNode.querySelectorAll(h)),b=s.getAttribute("data-row")||a.indexOf(s.parentNode)+1,A=((n=s==null?void 0:s.firstElementChild)===null||n===void 0?void 0:n.getAttribute("data-cell"))||p.indexOf(s)+1;return r.length()||r.insert(`
`,{"table-cell":{"data-row":b}}),r.ops.forEach(S=>{S.attributes&&S.attributes["table-cell"]&&(S.attributes["table-cell"]=Object.assign(Object.assign({},S.attributes["table-cell"]),{"data-row":b}))}),ge(function(S,T,w){const G=vt.formats(S);return S.tagName==="TH"?(T.ops.forEach(it=>{typeof it.insert!="string"||it.insert.endsWith(`
`)||(it.insert+=`
`)}),ge(T,"table-cell",Object.assign(Object.assign({},G),{"data-row":w}))):T}(s,r,b),"table-cell-block",A)}function me(s,r){let n=~~s.getAttribute("span")||1;const l=s.getAttribute("width"),a=new(L());for(;n>1;)a.insert(`
`,{"table-col":{width:l}}),n--;return a.concat(r)}function Me(s,r){const n=Ne.reduce((l,a)=>(s.hasAttribute(a)&&(a==="class"?l["data-class"]=s.getAttribute(a):l[a]=q(s.getAttribute(a))),l),{});return new(L())().insert(`
`,{"table-temporary":n}).concat(r)}var Ae={col:"Column",insColL:"Insert column left",insColR:"Insert column right",delCol:"Delete column",row:"Row",insRowAbv:"Insert row above",insRowBlw:"Insert row below",delRow:"Delete row",mCells:"Merge cells",sCell:"Split cell",tblProps:"Table properties",cellProps:"Cell properties",insParaOTbl:"Insert paragraph outside the table",insB4:"Insert before",insAft:"Insert after",copyTable:"Copy table",delTable:"Delete table",border:"Border",color:"Color",width:"Width",background:"Background",dims:"Dimensions",height:"Height",padding:"Padding",tblCellTxtAlm:"Table cell text alignment",alCellTxtL:"Align cell text to the left",alCellTxtC:"Align cell text to the center",alCellTxtR:"Align cell text to the right",jusfCellTxt:"Justify cell text",alCellTxtT:"Align cell text to the top",alCellTxtM:"Align cell text to the middle",alCellTxtB:"Align cell text to the bottom",dimsAlm:"Dimensions and alignment",alTblL:"Align table to the left",tblC:"Center table",alTblR:"Align table to the right",save:"Save",cancel:"Cancel",colorMsg:'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".',dimsMsg:'The value is invalid. Try "10px" or "2em" or simply "2".',colorPicker:"Color picker",removeColor:"Remove color",black:"Black",dimGrey:"Dim grey",grey:"Grey",lightGrey:"Light grey",white:"White",red:"Red",orange:"Orange",yellow:"Yellow",lightGreen:"Light green",green:"Green",aquamarine:"Aquamarine",turquoise:"Turquoise",lightBlue:"Light blue",blue:"Blue",purple:"Purple"},$e={col:"列",insColL:"向左插入列",insColR:"向右插入列",delCol:"删除列",row:"行",insRowAbv:"在上面插入行",insRowBlw:"在下面插入行",delRow:"删除行",mCells:"合并单元格",sCell:"拆分单元格",tblProps:"表格属性",cellProps:"单元格属性",insParaOTbl:"在表格外插入段落",insB4:"在表格前面插入",insAft:"在表格后面插入",copyTable:"复制表格",delTable:"删除表格",border:"边框",color:"颜色",width:"宽度",background:"背景",dims:"尺寸",height:"高度",padding:"内边距",tblCellTxtAlm:"单元格文本对齐方式",alCellTxtL:"左对齐",alCellTxtC:"水平居中对齐",alCellTxtR:"右对齐",jusfCellTxt:"两边对齐",alCellTxtT:"顶端对齐",alCellTxtM:"垂直居中对齐",alCellTxtB:"底部对齐",dimsAlm:"尺寸和对齐方式",alTblL:"表格左对齐",tblC:"表格居中",alTblR:"表格右对齐",save:"保存",cancel:"取消",colorMsg:'无效颜色，请使用 "#FF0000" 或者 "rgb(255,0,0)" 或者 "red"',dimsMsg:'无效值， 请使用 "10px" 或者 "2em" 或者 "2"',colorPicker:"颜色选择器",removeColor:"删除颜色",black:"黑色",dimGrey:"暗灰色",grey:"灰色",lightGrey:"浅灰色",white:"白色",red:"红色",orange:"橙色",yellow:"黄色",lightGreen:"浅绿色",green:"绿色",aquamarine:"海蓝色",turquoise:"青绿色",lightBlue:"浅蓝色",blue:"蓝色",purple:"紫色"},Oe={col:"Colonne",insColL:"Insérer colonne à gauche",insColR:"Insérer colonne à droite",delCol:"Supprimer la colonne",row:"Ligne",insRowAbv:"Insérer ligne au-dessus",insRowBlw:"Insérer ligne en dessous",delRow:"Supprimer la ligne",mCells:"Fusionner les cellules",sCell:"Diviser la cellule",tblProps:"Propriétés du tableau",cellProps:"Propriétés de la cellule",insParaOTbl:"Insérer paragraphe en dehors du tableau",insB4:"Insérer avant",insAft:"Insérer après",copyTable:"Copier le tableau",delTable:"Supprimer le tableau",border:"Bordure",color:"Couleur",width:"Largeur",background:"Arrière-plan",dims:"Dimensions",height:"Hauteur",padding:"Marge intérieure",tblCellTxtAlm:"Alignement du texte de la cellule du tableau",alCellTxtL:"Aligner le texte de la cellule à gauche",alCellTxtC:"Aligner le texte de la cellule au centre",alCellTxtR:"Aligner le texte de la cellule à droite",jusfCellTxt:"Justifier le texte de la cellule",alCellTxtT:"Aligner le texte de la cellule en haut",alCellTxtM:"Aligner le texte de la cellule au milieu",alCellTxtB:"Aligner le texte de la cellule en bas",dimsAlm:"Dimensions et alignement",alTblL:"Aligner le tableau à gauche",tblC:"Centrer le tableau",alTblR:"Aligner le tableau à droite",save:"Enregistrer",cancel:"Annuler",colorMsg:'La couleur est invalide. Essayez "#FF0000" ou "rgb(255,0,0)" ou "rouge".',dimsMsg:'La valeur est invalide. Essayez "10px" ou "2em" ou simplement "2".',colorPicker:"Sélecteur de couleur",removeColor:"Supprimer la couleur",black:"Noir",dimGrey:"Gris foncé",grey:"Gris",lightGrey:"Gris clair",white:"Blanc",red:"Rouge",orange:"Orange",yellow:"Jaune",lightGreen:"Vert clair",green:"Vert",aquamarine:"Aigue-marine",turquoise:"Turquoise",lightBlue:"Bleu clair",blue:"Bleu",purple:"Violet"},Re={col:"Kolumna",insColL:"Wstaw kolumnę z lewej",insColR:"Wstaw kolumnę z prawej",delCol:"Usuń kolumnę",row:"Wiersz",insRowAbv:"Wstaw wiersz powyżej",insRowBlw:"Wstaw wiersz poniżej",delRow:"Usuń wiersz",mCells:"Scal komórki",sCell:"Podziel komórkę",tblProps:"Właściwości tabeli",cellProps:"Właściwości komórki",insParaOTbl:"Wstaw akapit poza tabelą",insB4:"Wstaw przed",insAft:"Wstaw po",copyTable:"Kopiuj tabelę",delTable:"Usuń tabelę",border:"Obramowanie",color:"Kolor",width:"Szerokość",background:"Tło",dims:"Wymiary",height:"Wysokość",padding:"Margines wewnętrzny",tblCellTxtAlm:"Wyrównanie tekstu w komórce tabeli",alCellTxtL:"Wyrównaj tekst w komórce do lewej",alCellTxtC:"Wyrównaj tekst w komórce do środka",alCellTxtR:"Wyrównaj tekst w komórce do prawej",jusfCellTxt:"Wyjustuj tekst w komórce",alCellTxtT:"Wyrównaj tekst w komórce do góry",alCellTxtM:"Wyrównaj tekst w komórce do środka",alCellTxtB:"Wyrównaj tekst w komórce do dołu",dimsAlm:"Wymiary i wyrównanie",alTblL:"Wyrównaj tabelę do lewej",tblC:"Wyśrodkuj tabelę",alTblR:"Wyrównaj tabelę do prawej",save:"Zapisz",cancel:"Anuluj",colorMsg:'Kolor jest nieprawidłowy. Spróbuj "#FF0000" lub "rgb(255,0,0)" lub "red".',dimsMsg:'Wartość jest nieprawidłowa. Spróbuj "10px" lub "2em" lub po prostu "2".',colorPicker:"Wybór koloru",removeColor:"Usuń kolor",black:"Czarny",dimGrey:"Przyciemniony szary",grey:"Szary",lightGrey:"Jasnoszary",white:"Biały",red:"Czerwony",orange:"Pomarańczowy",yellow:"Żółty",lightGreen:"Jasnozielony",green:"Zielony",aquamarine:"Akwamaryna",turquoise:"Turkusowy",lightBlue:"Jasnoniebieski",blue:"Niebieski",purple:"Fioletowy"},ae={col:"Spalte",insColL:"Spalte links einfügen",insColR:"Spalte rechts einfügen",delCol:"Spalte löschen",row:"Zeile",insRowAbv:"Zeile oberhalb einfügen",insRowBlw:"Zeile unterhalb einfügen",delRow:"Zeile löschen",mCells:"Zellen verbinden",sCell:"Zelle teilen",tblProps:"Tabelleneingenschaften",cellProps:"Zelleneigenschaften",insParaOTbl:"Absatz außerhalb der Tabelle einfügen",insB4:"Davor einfügen",insAft:"Danach einfügen",copyTable:"Tabelle kopieren",delTable:"Tabelle löschen",border:"Rahmen",color:"Farbe",width:"Breite",background:"Schattierung",dims:"Maße",height:"Höhe",padding:"Abstand",tblCellTxtAlm:"Ausrichtung",alCellTxtL:"Zellentext links ausrichten",alCellTxtC:"Zellentext mittig ausrichten",alCellTxtR:"Zellentext rechts ausrichten",jusfCellTxt:"Zellentext Blocksatz",alCellTxtT:"Zellentext oben ausrichten",alCellTxtM:"Zellentext mittig ausrichten",alCellTxtB:"Zellentext unten ausrichten",dimsAlm:"Maße und Ausrichtung",alTblL:"Tabelle links ausrichten",tblC:"Tabelle mittig ausrichten",alTblR:"Tabelle rechts ausrichten",save:"Speichern",cancel:"Abbrechen",colorMsg:'Die Farbe ist ungültig. Probiere "#FF0000", "rgb(255,0,0)" oder "red".',dimsMsg:'Der Wert ist ungültig. Probiere "10px", "2em" oder einfach "2".',colorPicker:"Farbwähler",removeColor:"Farbe entfernen",black:"Schwarz",dimGrey:"Dunkelgrau",grey:"Grau",lightGrey:"Hellgrau",white:"Weiß",red:"Rot",orange:"Orange",yellow:"Gelb",lightGreen:"Hellgrün",green:"Grün",aquamarine:"Aquamarin",turquoise:"Türkis",lightBlue:"Hellblau",blue:"Blau",purple:"Lila"},ye={col:"Столбец",insColL:"Вставить столбец слева",insColR:"Вставить столбец справа",delCol:"Удалить столбец",row:"Строка",insRowAbv:"Вставить строку сверху",insRowBlw:"Вставить строку снизу",delRow:"Удалить строку",mCells:"Объединить ячейки",sCell:"Разбить ячейку",tblProps:"Свойства таблицы",cellProps:"Свойства ячейки",insParaOTbl:"Вставить абзац за пределами таблицы",insB4:"Вставить абзац перед",insAft:"Вставить абзац после",copyTable:"Копировать таблицу",delTable:"Удалить таблицу",border:"Обводка",color:"Цвет",width:"Ширина",background:"Фон",dims:"Размеры",height:"Высота",padding:"Отступ",tblCellTxtAlm:"Выравнивание текста в ячейке таблицы",alCellTxtL:"Выровнять текст в ячейке по левому краю",alCellTxtC:"Выровнять текст в ячейке по центру",alCellTxtR:"Выровнять текст в ячейке по правому краю",jusfCellTxt:"Выровнять текст в ячейке по ширине",alCellTxtT:"Выровнять текст в ячейке по верху",alCellTxtM:"Выровнять текст в ячейке по середине",alCellTxtB:"Выровнять текст в ячейке по низу",dimsAlm:"Размеры и выравнивание",alTblL:"Выровнять таблицу по левому краю",tblC:"Центрировать таблицу",alTblR:"Выровнять таблицу по правому краю",save:"Сохранить",cancel:"Отменить",colorMsg:'Неверный цвет. Попробуйте "#FF0000", "rgb(255,0,0)" или "red".',dimsMsg:'Недопустимое значение. Попробуйте "10px", "2em" или просто "2".',colorPicker:"Выбор цвета",removeColor:"Удалить цвет",black:"Черный",dimGrey:"Темно-серый",grey:"Серый",lightGrey:"Светло-серый",white:"Белый",red:"Красный",orange:"Оранжевый",yellow:"Желтый",lightGreen:"Светло-зеленый",green:"Зеленый",aquamarine:"Аквамарин",turquoise:"Бирюзовый",lightBlue:"Светло-голубой",blue:"Синий",purple:"Фиолетовый"},be={col:"Sütun",insColL:"Sola sütun ekle",insColR:"Sağa sütun ekle",delCol:"Sütunu sil",row:"Satır",insRowAbv:"Üstüne satır ekle",insRowBlw:"Altına satır ekle",delRow:"Satırı sil",mCells:"Hücreleri birleştir",sCell:"Hücreyi böl",tblProps:"Tablo özellikleri",cellProps:"Hücre özellikleri",insParaOTbl:"Tablo dışında paragraf ekle",insB4:"Öncesine ekle",insAft:"Sonrasına ekle",copyTable:"Tabloyu kopyala",delTable:"Tabloyu sil",border:"Kenarlık",color:"Renk",width:"Genişlik",background:"Arka plan",dims:"Boyutlar",height:"Yükseklik",padding:"Dolgu",tblCellTxtAlm:"Tablo hücresi metin hizalaması",alCellTxtL:"Hücre metnini sola hizala",alCellTxtC:"Hücre metnini ortaya hizala",alCellTxtR:"Hücre metnini sağa hizala",jusfCellTxt:"Hücre metnini yasla",alCellTxtT:"Hücre metnini üste hizala",alCellTxtM:"Hücre metnini ortaya hizala",alCellTxtB:"Hücre metnini alta hizala",dimsAlm:"Boyutlar ve hizalama",alTblL:"Tabloyu sola hizala",tblC:"Tabloyu ortala",alTblR:"Tabloyu sağa hizala",save:"Kaydet",cancel:"İptal",colorMsg:'Renk geçersiz. "#FF0000", "rgb(255,0,0)" veya "red" deneyin.',dimsMsg:'Değer geçersiz. "10px", "2em" veya sadece "2" deneyin.',colorPicker:"Renk seçici",removeColor:"Rengi kaldır",black:"Siyah",dimGrey:"Koyu gri",grey:"Gri",lightGrey:"Açık gri",white:"Beyaz",red:"Kırmızı",orange:"Turuncu",yellow:"Sarı",lightGreen:"Açık yeşil",green:"Yeşil",aquamarine:"Akuamarin",turquoise:"Turkuaz",lightBlue:"Açık mavi",blue:"Mavi",purple:"Mor"},ve=class{constructor(s){this.config={en_US:Ae,zh_CN:$e,fr_FR:Oe,pl_PL:Re,de_DE:ae,ru_RU:ye,tr_TR:be},this.init(s)}changeLanguage(s){this.name=s}init(s){if(s===void 0||typeof s=="string")this.changeLanguage(s||"en_US");else{const{name:r,content:n}=s;n&&this.registry(r,n),r&&this.changeLanguage(r)}}registry(s,r){this.config=Object.assign(Object.assign({},this.config),{[s]:r})}useLanguage(s){return this.config[this.name][s]}},kt=(s=>(s[s.TYPE=3]="TYPE",s[s.LEVEL=12]="LEVEL",s[s.ATTRIBUTE=13]="ATTRIBUTE",s[s.BLOT=14]="BLOT",s[s.INLINE=7]="INLINE",s[s.BLOCK=11]="BLOCK",s[s.BLOCK_BLOT=10]="BLOCK_BLOT",s[s.INLINE_BLOT=6]="INLINE_BLOT",s[s.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",s[s.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",s[s.ANY=15]="ANY",s))(kt||{});class ir{constructor(r,n,l={}){this.attrName=r,this.keyName=n;const a=kt.TYPE&kt.ATTRIBUTE;this.scope=l.scope!=null?l.scope&kt.LEVEL|a:kt.ATTRIBUTE,l.whitelist!=null&&(this.whitelist=l.whitelist)}static keys(r){return Array.from(r.attributes).map(n=>n.name)}add(r,n){return!!this.canAdd(r,n)&&(r.setAttribute(this.keyName,n),!0)}canAdd(r,n){return this.whitelist==null||(typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1)}remove(r){r.removeAttribute(this.keyName)}value(r){const n=r.getAttribute(this.keyName);return this.canAdd(r,n)&&n?n:""}}class Ve extends Error{constructor(r){super(r="[Parchment] "+r),this.message=r,this.name=this.constructor.name}}const sr=class eo{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(r,n=!1){if(r==null)return null;if(this.blots.has(r))return this.blots.get(r)||null;if(n){let l=null;try{l=r.parentNode}catch{return null}return this.find(l,n)}return null}create(r,n,l){const a=this.query(n);if(a==null)throw new Ve(`Unable to create ${n} blot`);const h=a,p=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:h.create(l),b=new h(r,p,l);return eo.blots.set(b.domNode,b),b}find(r,n=!1){return eo.find(r,n)}query(r,n=kt.ANY){let l;return typeof r=="string"?l=this.types[r]||this.attributes[r]:r instanceof Text||r.nodeType===Node.TEXT_NODE?l=this.types.text:typeof r=="number"?r&kt.LEVEL&kt.BLOCK?l=this.types.block:r&kt.LEVEL&kt.INLINE&&(l=this.types.inline):r instanceof Element&&((r.getAttribute("class")||"").split(/\s+/).some(a=>(l=this.classes[a],!!l)),l=l||this.tags[r.tagName]),l==null?null:"scope"in l&&n&kt.LEVEL&l.scope&&n&kt.TYPE&l.scope?l:null}register(...r){return r.map(n=>{const l="blotName"in n,a="attrName"in n;if(!l&&!a)throw new Ve("Invalid definition");if(l&&n.blotName==="abstract")throw new Ve("Cannot register abstract class");const h=l?n.blotName:a?n.attrName:void 0;return this.types[h]=n,a?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):l&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(p=>p.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(p=>{(this.tags[p]==null||n.className==null)&&(this.tags[p]=n)}))),n})}};sr.blots=new WeakMap;let lr=sr;function Nr(s,r){return(s.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${r}-`)===0)}const kr=class extends ir{static keys(s){return(s.getAttribute("class")||"").split(/\s+/).map(r=>r.split("-").slice(0,-1).join("-"))}add(s,r){return!!this.canAdd(s,r)&&(this.remove(s),s.classList.add(`${this.keyName}-${r}`),!0)}remove(s){Nr(s,this.keyName).forEach(r=>{s.classList.remove(r)}),s.classList.length===0&&s.removeAttribute("class")}value(s){const r=(Nr(s,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(s,r)?r:""}};function ar(s){const r=s.split("-"),n=r.slice(1).map(l=>l[0].toUpperCase()+l.slice(1)).join("");return r[0]+n}const Xe=class extends ir{static keys(s){return(s.getAttribute("style")||"").split(";").map(r=>r.split(":")[0].trim())}add(s,r){return!!this.canAdd(s,r)&&(s.style[ar(this.keyName)]=r,!0)}remove(s){s.style[ar(this.keyName)]="",s.getAttribute("style")||s.removeAttribute("style")}value(s){const r=s.style[ar(this.keyName)];return this.canAdd(s,r)?r:""}},Pe=class{constructor(s){this.attributes={},this.domNode=s,this.build()}attribute(s,r){r?s.add(this.domNode,r)&&(s.value(this.domNode)!=null?this.attributes[s.attrName]=s:delete this.attributes[s.attrName]):(s.remove(this.domNode),delete this.attributes[s.attrName])}build(){this.attributes={};const s=lr.find(this.domNode);if(s==null)return;const r=ir.keys(this.domNode),n=kr.keys(this.domNode),l=Xe.keys(this.domNode);r.concat(n).concat(l).forEach(a=>{const h=s.scroll.query(a,kt.ATTRIBUTE);h instanceof ir&&(this.attributes[h.attrName]=h)})}copy(s){Object.keys(this.attributes).forEach(r=>{const n=this.attributes[r].value(this.domNode);s.format(r,n)})}move(s){this.copy(s),Object.keys(this.attributes).forEach(r=>{this.attributes[r].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((s,r)=>(s[r]=this.attributes[r].value(this.domNode),s),{})}},Ie=class{constructor(s,r){this.scroll=s,this.domNode=r,lr.blots.set(r,this),this.prev=null,this.next=null}static create(s){if(this.tagName==null)throw new Ve("Blot definition missing tagName");let r,n;return Array.isArray(this.tagName)?(typeof s=="string"?(n=s.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):typeof s=="number"&&(n=s),r=typeof n=="number"?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):r=document.createElement(this.tagName),this.className&&r.classList.add(this.className),r}get statics(){return this.constructor}attach(){}clone(){const s=this.domNode.cloneNode(!1);return this.scroll.create(s)}detach(){this.parent!=null&&this.parent.removeChild(this),lr.blots.delete(this.domNode)}deleteAt(s,r){this.isolate(s,r).remove()}formatAt(s,r,n,l){const a=this.isolate(s,r);if(this.scroll.query(n,kt.BLOT)!=null&&l)a.wrap(n,l);else if(this.scroll.query(n,kt.ATTRIBUTE)!=null){const h=this.scroll.create(this.statics.scope);a.wrap(h),h.format(n,l)}}insertAt(s,r,n){const l=n==null?this.scroll.create("text",r):this.scroll.create(r,n),a=this.split(s);this.parent.insertBefore(l,a||void 0)}isolate(s,r){const n=this.split(s);if(n==null)throw new Error("Attempt to isolate at end");return n.split(r),n}length(){return 1}offset(s=this.parent){return this.parent==null||this===s?0:this.parent.children.offset(this)+this.parent.offset(s)}optimize(s){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(s,r){const n=typeof s=="string"?this.scroll.create(s,r):s;return this.parent!=null&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(s,r){return s===0?this:this.next}update(s,r){}wrap(s,r){const n=typeof s=="string"?this.scroll.create(s,r):s;if(this.parent!=null&&this.parent.insertBefore(n,this.next||void 0),typeof n.appendChild!="function")throw new Ve(`Cannot wrap ${s}`);return n.appendChild(this),n}};Ie.blotName="abstract";let Qe=Ie;const De=class extends Qe{static value(s){return!0}index(s,r){return this.domNode===s||this.domNode.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(r,1):-1}position(s,r){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return s>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};De.scope=kt.INLINE_BLOT;const Ke=De;class er{constructor(){this.head=null,this.tail=null,this.length=0}append(...r){if(this.insertBefore(r[0],null),r.length>1){const n=r.slice(1);this.append(...n)}}at(r){const n=this.iterator();let l=n();for(;l&&r>0;)r-=1,l=n();return l}contains(r){const n=this.iterator();let l=n();for(;l;){if(l===r)return!0;l=n()}return!1}indexOf(r){const n=this.iterator();let l=n(),a=0;for(;l;){if(l===r)return a;a+=1,l=n()}return-1}insertBefore(r,n){r!=null&&(this.remove(r),r.next=n,n!=null?(r.prev=n.prev,n.prev!=null&&(n.prev.next=r),n.prev=r,n===this.head&&(this.head=r)):this.tail!=null?(this.tail.next=r,r.prev=this.tail,this.tail=r):(r.prev=null,this.head=this.tail=r),this.length+=1)}offset(r){let n=0,l=this.head;for(;l!=null;){if(l===r)return n;n+=l.length(),l=l.next}return-1}remove(r){this.contains(r)&&(r.prev!=null&&(r.prev.next=r.next),r.next!=null&&(r.next.prev=r.prev),r===this.head&&(this.head=r.next),r===this.tail&&(this.tail=r.prev),this.length-=1)}iterator(r=this.head){return()=>{const n=r;return r!=null&&(r=r.next),n}}find(r,n=!1){const l=this.iterator();let a=l();for(;a;){const h=a.length();if(r<h||n&&r===h&&(a.next==null||a.next.length()!==0))return[a,r];r-=h,a=l()}return[null,0]}forEach(r){const n=this.iterator();let l=n();for(;l;)r(l),l=n()}forEachAt(r,n,l){if(n<=0)return;const[a,h]=this.find(r);let p=r-h;const b=this.iterator(a);let A=b();for(;A&&p<r+n;){const S=A.length();r>p?l(A,r-p,Math.min(n,p+S-r)):l(A,0,Math.min(S,r+n-p)),p+=S,A=b()}}map(r){return this.reduce((n,l)=>(n.push(r(l)),n),[])}reduce(r,n){const l=this.iterator();let a=l();for(;a;)n=r(n,a),a=l();return n}}function mr(s,r){const n=r.find(s);if(n)return n;try{return r.create(s)}catch{const l=r.create(kt.INLINE);return Array.from(s.childNodes).forEach(a=>{l.domNode.appendChild(a)}),s.parentNode&&s.parentNode.replaceChild(l.domNode,s),l.attach(),l}}const P=class Cn extends Qe{constructor(r,n){super(r,n),this.uiNode=null,this.build()}appendChild(r){this.insertBefore(r)}attach(){super.attach(),this.children.forEach(r=>{r.attach()})}attachUI(r){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=r,Cn.uiClass&&this.uiNode.classList.add(Cn.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new er,Array.from(this.domNode.childNodes).filter(r=>r!==this.uiNode).reverse().forEach(r=>{try{const n=mr(r,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof Ve)return;throw n}})}deleteAt(r,n){if(r===0&&n===this.length())return this.remove();this.children.forEachAt(r,n,(l,a,h)=>{l.deleteAt(a,h)})}descendant(r,n=0){const[l,a]=this.children.find(n);return r.blotName==null&&r(l)||r.blotName!=null&&l instanceof r?[l,a]:l instanceof Cn?l.descendant(r,a):[null,-1]}descendants(r,n=0,l=Number.MAX_VALUE){let a=[],h=l;return this.children.forEachAt(n,l,(p,b,A)=>{(r.blotName==null&&r(p)||r.blotName!=null&&p instanceof r)&&a.push(p),p instanceof Cn&&(a=a.concat(p.descendants(r,b,h))),h-=A}),a}detach(){this.children.forEach(r=>{r.detach()}),super.detach()}enforceAllowedChildren(){let r=!1;this.children.forEach(n=>{r||this.statics.allowedChildren.some(l=>n instanceof l)||(n.statics.scope===kt.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),r=!0):n instanceof Cn?n.unwrap():n.remove())})}formatAt(r,n,l,a){this.children.forEachAt(r,n,(h,p,b)=>{h.formatAt(p,b,l,a)})}insertAt(r,n,l){const[a,h]=this.children.find(r);if(a)a.insertAt(h,n,l);else{const p=l==null?this.scroll.create("text",n):this.scroll.create(n,l);this.appendChild(p)}}insertBefore(r,n){r.parent!=null&&r.parent.children.remove(r);let l=null;this.children.insertBefore(r,n||null),r.parent=this,n!=null&&(l=n.domNode),(this.domNode.parentNode!==r.domNode||this.domNode.nextSibling!==l)&&this.domNode.insertBefore(r.domNode,l),r.attach()}length(){return this.children.reduce((r,n)=>r+n.length(),0)}moveChildren(r,n){this.children.forEach(l=>{r.insertBefore(l,n)})}optimize(r){if(super.optimize(r),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(r,n=!1){const[l,a]=this.children.find(r,n),h=[[this,r]];return l instanceof Cn?h.concat(l.path(a,n)):(l!=null&&h.push([l,a]),h)}removeChild(r){this.children.remove(r)}replaceWith(r,n){const l=typeof r=="string"?this.scroll.create(r,n):r;return l instanceof Cn&&this.moveChildren(l),super.replaceWith(l)}split(r,n=!1){if(!n){if(r===0)return this;if(r===this.length())return this.next}const l=this.clone();return this.parent&&this.parent.insertBefore(l,this.next||void 0),this.children.forEachAt(r,this.length(),(a,h,p)=>{const b=a.split(h,n);b!=null&&l.appendChild(b)}),l}splitAfter(r){const n=this.clone();for(;r.next!=null;)n.appendChild(r.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(r,n){const l=[],a=[];r.forEach(h=>{h.target===this.domNode&&h.type==="childList"&&(l.push(...h.addedNodes),a.push(...h.removedNodes))}),a.forEach(h=>{if(h.parentNode!=null&&h.tagName!=="IFRAME"&&document.body.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const p=this.scroll.find(h);p!=null&&(p.domNode.parentNode==null||p.domNode.parentNode===this.domNode)&&p.detach()}),l.filter(h=>h.parentNode===this.domNode&&h!==this.uiNode).sort((h,p)=>h===p?0:h.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(h=>{let p=null;h.nextSibling!=null&&(p=this.scroll.find(h.nextSibling));const b=mr(h,this.scroll);(b.next!==p||b.next==null)&&(b.parent!=null&&b.parent.removeChild(this),this.insertBefore(b,p||void 0))}),this.enforceAllowedChildren()}};P.uiClass="";const V=P,nt=class ti extends V{static create(r){return super.create(r)}static formats(r,n){const l=n.query(ti.blotName);if(l==null||r.tagName!==l.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return r.tagName.toLowerCase()}}constructor(r,n){super(r,n),this.attributes=new Pe(this.domNode)}format(r,n){if(r!==this.statics.blotName||n){const l=this.scroll.query(r,kt.INLINE);if(l==null)return;l instanceof ir?this.attributes.attribute(l,n):n&&(r!==this.statics.blotName||this.formats()[r]!==n)&&this.replaceWith(r,n)}else this.children.forEach(l=>{l instanceof ti||(l=l.wrap(ti.blotName,!0)),this.attributes.copy(l)}),this.unwrap()}formats(){const r=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(r[this.statics.blotName]=n),r}formatAt(r,n,l,a){this.formats()[l]!=null||this.scroll.query(l,kt.ATTRIBUTE)?this.isolate(r,n).format(l,a):super.formatAt(r,n,l,a)}optimize(r){super.optimize(r);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const l=this.next;l instanceof ti&&l.prev===this&&function(a,h){if(Object.keys(a).length!==Object.keys(h).length)return!1;for(const p in a)if(a[p]!==h[p])return!1;return!0}(n,l.formats())&&(l.moveChildren(this),l.remove())}replaceWith(r,n){const l=super.replaceWith(r,n);return this.attributes.copy(l),l}update(r,n){super.update(r,n),r.some(l=>l.target===this.domNode&&l.type==="attributes")&&this.attributes.build()}wrap(r,n){const l=super.wrap(r,n);return l instanceof ti&&this.attributes.move(l),l}};nt.allowedChildren=[nt,Ke],nt.blotName="inline",nt.scope=kt.INLINE_BLOT,nt.tagName="SPAN";const gt=nt,Dt=class ro extends V{static create(r){return super.create(r)}static formats(r,n){const l=n.query(ro.blotName);if(l==null||r.tagName!==l.tagName){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return r.tagName.toLowerCase()}}constructor(r,n){super(r,n),this.attributes=new Pe(this.domNode)}format(r,n){const l=this.scroll.query(r,kt.BLOCK);l!=null&&(l instanceof ir?this.attributes.attribute(l,n):r!==this.statics.blotName||n?n&&(r!==this.statics.blotName||this.formats()[r]!==n)&&this.replaceWith(r,n):this.replaceWith(ro.blotName))}formats(){const r=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(r[this.statics.blotName]=n),r}formatAt(r,n,l,a){this.scroll.query(l,kt.BLOCK)!=null?this.format(l,a):super.formatAt(r,n,l,a)}insertAt(r,n,l){if(l==null||this.scroll.query(n,kt.INLINE)!=null)super.insertAt(r,n,l);else{const a=this.split(r);if(a==null)throw new Error("Attempt to insertAt after block boundaries");{const h=this.scroll.create(n,l);a.parent.insertBefore(h,a)}}}replaceWith(r,n){const l=super.replaceWith(r,n);return this.attributes.copy(l),l}update(r,n){super.update(r,n),r.some(l=>l.target===this.domNode&&l.type==="attributes")&&this.attributes.build()}};Dt.blotName="block",Dt.scope=kt.BLOCK_BLOT,Dt.tagName="P",Dt.allowedChildren=[gt,Dt,Ke];const he=Dt,$t=class extends V{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(s,r){super.deleteAt(s,r),this.enforceAllowedChildren()}formatAt(s,r,n,l){super.formatAt(s,r,n,l),this.enforceAllowedChildren()}insertAt(s,r,n){super.insertAt(s,r,n),this.enforceAllowedChildren()}optimize(s){super.optimize(s),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};$t.blotName="container",$t.scope=kt.BLOCK_BLOT;const ke=$t,Te=class extends Ke{static formats(s,r){}format(s,r){super.formatAt(0,this.length(),s,r)}formatAt(s,r,n,l){s===0&&r===this.length()?this.format(n,l):super.formatAt(s,r,n,l)}formats(){return this.statics.formats(this.domNode,this.scroll)}},je={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},te=class extends V{constructor(s,r){super(null,r),this.registry=s,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,je),this.attach()}create(s,r){return this.registry.create(this,s,r)}find(s,r=!1){const n=this.registry.find(s,r);return n?n.scroll===this?n:r?this.find(n.scroll.domNode.parentNode,!0):null:null}query(s,r=kt.ANY){return this.registry.query(s,r)}register(...s){return this.registry.register(...s)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(s,r){this.update(),s===0&&r===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(s,r)}formatAt(s,r,n,l){this.update(),super.formatAt(s,r,n,l)}insertAt(s,r,n){this.update(),super.insertAt(s,r,n)}optimize(s=[],r={}){super.optimize(r);const n=r.mutationsMap||new WeakMap;let l=Array.from(this.observer.takeRecords());for(;l.length>0;)s.push(l.pop());const a=(b,A=!0)=>{b==null||b===this||b.domNode.parentNode!=null&&(n.has(b.domNode)||n.set(b.domNode,[]),A&&a(b.parent))},h=b=>{n.has(b.domNode)&&(b instanceof V&&b.children.forEach(h),n.delete(b.domNode),b.optimize(r))};let p=s;for(let b=0;p.length>0;b+=1){if(b>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(p.forEach(A=>{const S=this.find(A.target,!0);S!=null&&(S.domNode===A.target&&(A.type==="childList"?(a(this.find(A.previousSibling,!1)),Array.from(A.addedNodes).forEach(T=>{const w=this.find(T,!1);a(w,!1),w instanceof V&&w.children.forEach(G=>{a(G,!1)})})):A.type==="attributes"&&a(S.prev)),a(S))}),this.children.forEach(h),p=Array.from(this.observer.takeRecords()),l=p.slice();l.length>0;)s.push(l.pop())}}update(s,r={}){s=s||this.observer.takeRecords();const n=new WeakMap;s.map(l=>{const a=this.find(l.target,!0);return a==null?null:n.has(a.domNode)?(n.get(a.domNode).push(l),null):(n.set(a.domNode,[l]),a)}).forEach(l=>{l!=null&&l!==this&&n.has(l.domNode)&&l.update(n.get(l.domNode)||[],r)}),r.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),r),this.optimize(s,r)}};te.blotName="scroll",te.defaultChild=he,te.allowedChildren=[he,ke],te.scope=kt.BLOCK_BLOT,te.tagName="DIV";const Ue=class sc extends Ke{static create(r){return document.createTextNode(r)}static value(r){return r.data}constructor(r,n){super(r,n),this.text=this.statics.value(this.domNode)}deleteAt(r,n){this.domNode.data=this.text=this.text.slice(0,r)+this.text.slice(r+n)}index(r,n){return this.domNode===r?n:-1}insertAt(r,n,l){l==null?(this.text=this.text.slice(0,r)+n+this.text.slice(r),this.domNode.data=this.text):super.insertAt(r,n,l)}length(){return this.text.length}optimize(r){super.optimize(r),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof sc&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(r,n=!1){return[this.domNode,r]}split(r,n=!1){if(!n){if(r===0)return this;if(r===this.length())return this.next}const l=this.scroll.create(this.domNode.splitText(r));return this.parent.insertBefore(l,this.next||void 0),this.text=this.statics.value(this.domNode),l}update(r,n){r.some(l=>l.type==="characterData"&&l.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Ue.blotName="text",Ue.scope=kt.INLINE_BLOT;const fe=["bold","italic","underline","strike","size","color","background","font","list","header","align","link","image"],cr=["link","image"];var de,We,Le,br,z,x=class{constructor(s,r){this.quill=s,this.selectedTds=[],this.startTd=null,this.endTd=null,this.disabledList=[],this.singleList=[],this.tableBetter=r,this.quill.root.addEventListener("click",this.handleClick.bind(this)),this.initDocumentListener(),this.initWhiteList()}attach(s){let r=Array.from(s.classList).find(h=>h.indexOf("ql-")===0);if(!r)return;const[n,l]=this.getButtonsWhiteList(),a=this.getCorrectDisabled(s,r);r=r.slice(3),n.includes(r)||this.disabledList.push(...a),l.includes(r)&&this.singleList.push(...a)}clearSelected(){for(const s of this.selectedTds)s.classList&&s.classList.remove("ql-cell-focused","ql-cell-selected");this.selectedTds=[],this.startTd=null,this.endTd=null}exitTableFocus(s,r){const n=ut(s).table(),l=r?-1:n.length(),a=n.offset(this.quill.scroll)+l;this.tableBetter.hideTools(),this.quill.setSelection(a,0,g().sources.USER)}getButtonsWhiteList(){const{options:s={}}=this.tableBetter,{toolbarButtons:r={}}=s,{whiteList:n=fe,singleWhiteList:l=cr}=r;return[n,l]}getCopyColumns(s){const r=s.querySelector("tr");return Array.from(r.querySelectorAll("td")).reduce((n,l)=>n+(~~l.getAttribute("colspan")||1),0)}getCopyData(){const s=g().find(this.selectedTds[0]).table();if(s.descendants(vt).length===this.selectedTds.length){const l=s.getCopyTable();return{html:l,text:this.getText(l)}}let r="";const n={};for(const l of this.selectedTds){const a=l.getAttribute("data-row");n[a]||(n[a]=[]),n[a].push(l)}for(const l of Object.values(n)){let a="";for(const h of l)a+=dt(h.outerHTML);a=`<tr>${a}</tr>`,r+=a}return r=`<table><tbody>${r}</tbody></table>`,{html:r,text:this.getText(r)}}getCorrectDisabled(s,r){if(s.tagName!=="SELECT")return[s];const n=s.closest("span.ql-formats");return n?[...n.querySelectorAll(`span.${r}.ql-picker`),s]:[s]}getCorrectRow(s,r){const n=r==="next"?0:-1;let l=(~~s.getAttribute("rowspan")||1)+n||1,a=g().find(s).parent;for(;a&&l;)a=a[r],l--;return a==null?void 0:a.domNode}getCorrectValue(s,r){for(const n of this.selectedTds){const l=g().find(n).html()||n.outerHTML,a=this.quill.clipboard.convert({html:l,text:`
`});for(const h of a.ops)if(!this.isContinue(h)&&(r=this.getListCorrectValue(s,r,h==null?void 0:h.attributes))!=((h==null?void 0:h.attributes)&&(h==null?void 0:h.attributes[s])||!1))return r}return!r}getListCorrectValue(s,r,n={}){return s!=="list"?r:r==="check"?n[s]!=="checked"&&n[s]!=="unchecked"&&"unchecked":r}getPasteComputeBounds(s,r,n){const l=s.getBoundingClientRect(),a=r.getBoundingClientRect(),h=n.domNode.getBoundingClientRect(),p=this.quill.container.getBoundingClientRect(),b=this.quill.container.scrollLeft,A=this.quill.container.scrollTop;return{left:l.left-p.left-b,right:a.right-p.left-b,top:l.top-p.top-A,bottom:h.bottom-p.top-A}}getPasteInfo(s,r,n){let l=0,a=null,h=null,p=s.parentElement;for(;s;){if(l+=~~s.getAttribute("colspan")||1,l>=r){l=r,a=s;break}s=s.nextElementSibling}for(;--n;){if(!p.nextElementSibling){h=p.firstElementChild;break}p=p.nextElementSibling}return[{clospan:Math.abs(r-l),cloTd:a},{rowspan:n,rowTd:h}]}getPasteLastRow(s,r){for(;--r&&s;)s=s.next;return s}getPasteTds(s){const r={};for(const n of s){const l=n.getAttribute("data-row");r[l]||(r[l]=[]),r[l].push(n)}return Object.values(r)}getText(s){return this.quill.clipboard.convert({html:s}).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}handleClick(s){if(s.detail<3||!this.selectedTds.length)return;const{index:r,length:n}=this.quill.getSelection(!0);this.quill.setSelection(r,n-1,g().sources.SILENT),this.quill.scrollSelectionIntoView()}handleDeleteKeyup(s){var r;((r=this.selectedTds)===null||r===void 0?void 0:r.length)<2||s.key!=="Backspace"&&s.key!=="Delete"||(s.ctrlKey?(this.tableBetter.tableMenus.deleteColumn(!0),this.tableBetter.tableMenus.deleteRow(!0)):this.removeSelectedTdsContent())}handleKeyup(s){switch(s.key){case"ArrowLeft":case"ArrowRight":this.makeTableArrowLevelHandler(s.key);break;case"ArrowUp":case"ArrowDown":this.makeTableArrowVerticalHandler(s.key)}}handleMousedown(s){this.clearSelected();const r=s.target.closest("table");if(!r)return;this.tableBetter.tableMenus.destroyTablePropertiesForm();const n=s.target.closest("td");this.startTd=n,this.endTd=n,this.selectedTds=[n],n.classList.add("ql-cell-focused");const l=h=>{const p=h.target.closest("td");if(!p)return;const b=n.isEqualNode(p);if(b)return;this.clearSelected(),this.startTd=n,this.endTd=p;const A=J(Q(n,this.quill.container),Q(p,this.quill.container));this.selectedTds=st(A,r,this.quill.container);for(const S of this.selectedTds)S.classList&&S.classList.add("ql-cell-selected");b||this.quill.blur()},a=h=>{this.setSingleDisabled(),this.setCorrectPositionTds(this.startTd,this.endTd,this.selectedTds),this.quill.root.removeEventListener("mousemove",l),this.quill.root.removeEventListener("mouseup",a)};this.quill.root.addEventListener("mousemove",l),this.quill.root.addEventListener("mouseup",a)}initDocumentListener(){document.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),document.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),document.addEventListener("keyup",this.handleDeleteKeyup.bind(this)),document.addEventListener("paste",this.onCapturePaste.bind(this))}initWhiteList(){const s=this.quill.getModule("toolbar");Array.from(s.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)})}insertColumnCell(s,r){const n=s.tbody();n&&n.children.forEach(l=>{const a=l.children.tail.domNode.getAttribute("data-row");for(let h=0;h<r;h++)s.insertColumnCell(l,a,null)})}insertRow(s,r,n){const l=g().find(n).rowOffset();for(;r--;)s.insertRow(l+1,1)}insertWith(s){return typeof s=="string"&&s.startsWith(`
`)&&s.endsWith(`
`)}isContinue(s){return!(!this.insertWith(s.insert)||s.attributes&&!s.attributes["table-list"]&&!s.attributes["table-header"])}lines(s){const r=n=>{let l=[];return n.children.forEach(a=>{a instanceof ke?l=l.concat(r(a)):function(h){return h instanceof he||h instanceof Te}(a)&&l.push(a)}),l};return r(s)}makeTableArrowLevelHandler(s){const r=s==="ArrowLeft"?this.startTd:this.endTd,n=this.quill.getSelection();if(!n)return;const[l]=this.quill.getLine(n.index),a=ut(l);if(!a)return this.tableBetter.hideTools();!a||r&&r.isEqualNode(a.domNode)||(this.setSelected(a.domNode,!1),this.tableBetter.showTools(!1))}makeTableArrowVerticalHandler(s){const r=s==="ArrowUp",n=this.quill.getSelection();if(!n)return;const[l,a]=this.quill.getLine(n.index),h=r?"prev":"next";if(l[h]&&this.selectedTds.length){const p=l[h].offset(this.quill.scroll)+Math.min(a,l[h].length()-1);this.quill.setSelection(p,0,g().sources.USER)}else{if(!this.selectedTds.length){const T=ut(l);return T?(this.tableArrowSelection(r,T),void this.tableBetter.showTools(!1)):void 0}const p=r?this.startTd:this.endTd,b=g().find(p).parent[h],{left:A,right:S}=p.getBoundingClientRect();if(b){let T=null,w=b;for(;w&&!T;){let G=w.children.head;for(;G;){const{left:it,right:ct}=G.domNode.getBoundingClientRect();if(Math.abs(it-A)<=2){T=G;break}if(Math.abs(ct-S)<=2){T=G;break}G=G.next}w=w[h]}T?this.tableArrowSelection(r,T):this.exitTableFocus(l,r)}else this.exitTableFocus(l,r)}}onCaptureCopy(s,r=!1){var n,l,a;if(((n=this.selectedTds)===null||n===void 0?void 0:n.length)<2||s.defaultPrevented)return;s.preventDefault();const{html:h,text:p}=this.getCopyData();(l=s.clipboardData)===null||l===void 0||l.setData("text/plain",p),(a=s.clipboardData)===null||a===void 0||a.setData("text/html",h),r&&this.removeSelectedTdsContent()}onCapturePaste(s){var r,n,l;if(!(!((r=this.selectedTds)===null||r===void 0)&&r.length))return;s.preventDefault();const a=(n=s.clipboardData)===null||n===void 0?void 0:n.getData("text/html"),h=((l=s.clipboardData)===null||l===void 0||l.getData("text/plain"),document.createElement("div"));h.innerHTML=a;const p=Array.from(h.querySelectorAll("tr"));if(!p.length)return;const b=g().find(this.startTd),A=b.row(),S=b.table();this.quill.history.cutoff();const T=this.getCopyColumns(h),[w,G]=this.getPasteInfo(this.startTd,T,p.length),{clospan:it,cloTd:ct}=w,{rowspan:bt,rowTd:St}=G;it&&this.insertColumnCell(S,it),bt&&this.insertRow(S,bt,St);const Gt=it?A.children.tail.domNode:ct,Zt=this.getPasteLastRow(A,p.length),oe=this.getPasteComputeBounds(this.startTd,Gt,Zt),Be=this.getPasteTds(st(oe,S.domNode,this.quill.container)),nr=p.reduce((xr,Ir)=>(xr.push(Array.from(Ir.querySelectorAll("td"))),xr),[]),$r=[];for(;nr.length;){const xr=nr.shift(),Ir=Be.shift();let Ur=null,bn=null;for(;xr.length;){const Uo=xr.shift(),gs=Ir.shift();if(gs)Ur=gs,bn=this.pasteSelectedTd(gs,Uo);else{const Ec=Ur.getAttribute("data-row"),Ho=g().find(Ur);bn=S.insertColumnCell(Ho.parent,Ec,Ho.next),bn=this.pasteSelectedTd(bn.domNode,Uo),Ur=bn.domNode}bn&&$r.push(bn.domNode)}for(;Ir.length;)Ir.shift().remove()}this.quill.blur(),this.setSelectedTds($r),this.tableBetter.tableMenus.updateMenus(),this.quill.scrollSelectionIntoView()}pasteSelectedTd(s,r){const n=s.getAttribute("data-row"),l=vt.formats(r);Object.assign(l,{"data-row":n});const a=g().find(s),h=a.replaceWith(a.statics.blotName,l);this.quill.setSelection(h.offset(this.quill.scroll)+h.length()-1,0,g().sources.USER);const p=this.quill.getSelection(!0),b=this.quill.getFormat(p.index),A=r.innerHTML,S=this.getText(A),T=this.quill.clipboard.convert({text:S,html:A}),w=new(L())().retain(p.index).delete(p.length).concat(ge(T,b));return this.quill.updateContents(w,g().sources.USER),h}removeCursor(){const s=this.quill.getSelection(!0);s&&s.length===0&&(this.quill.selection.cursor.remove(),this.quill.blur())}removeSelectedTdContent(s){const r=g().find(s);let n=r.children.head;const l=n.formats()[xt.blotName],a=this.quill.scroll.create(xt.blotName,l);for(r.insertBefore(a,n);n;)n.remove(),n=n.next}removeSelectedTdsContent(){if(!(this.selectedTds.length<2)){for(const s of this.selectedTds)this.removeSelectedTdContent(s);this.tableBetter.tableMenus.updateMenus()}}setCorrectPositionTds(s,r,n){if(!s||!r||n.length<2)return;const l=n[0],a=n[n.length-1],h=[...new Set([s,r,l,a])];h.sort((p,b)=>{const A=p.getBoundingClientRect(),S=b.getBoundingClientRect();return(A.top<=S.top||A.bottom<=S.bottom)&&(A.left<=S.left||A.right<=S.right)?-1:1}),this.startTd=h[0],this.endTd=h[h.length-1]}setDisabled(s){for(const r of this.disabledList)s?r.classList.add("ql-table-button-disabled"):r.classList.remove("ql-table-button-disabled");this.setSingleDisabled()}setSelected(s,r=!0){const n=g().find(s);this.clearSelected(),this.startTd=s,this.endTd=s,this.selectedTds=[s],s.classList.add("ql-cell-focused"),r&&this.quill.setSelection(n.offset(this.quill.scroll)+n.length()-1,0,g().sources.USER)}setSelectedTds(s){this.clearSelected(),this.startTd=s[0],this.endTd=s[s.length-1],this.selectedTds=s;for(const r of this.selectedTds)r.classList&&r.classList.add("ql-cell-selected")}setSelectedTdsFormat(s,r){const n=[],l=this.quill.getModule("toolbar");for(const a of this.selectedTds)if(l.handlers[s]!=null){const h=g().find(a),p=this.lines(h),b=l.handlers[s].call(l,r,p);b&&n.push(ut(b).domNode)}else{const h=window.getSelection();h.selectAllChildren(a),this.quill.format(s,r,g().sources.USER),h.removeAllRanges()}this.quill.blur(),n.length&&this.setSelectedTds(n)}setSingleDisabled(){for(const s of this.singleList)this.selectedTds.length>1?s.classList.add("ql-table-button-disabled"):s.classList.remove("ql-table-button-disabled")}tableArrowSelection(s,r){const n=s?"tail":"head",l=s?r.children[n].length()-1:0;this.setSelected(r.domNode,!1);const a=r.children[n].offset(this.quill.scroll)+l;this.quill.setSelection(a,0,g().sources.USER)}updateSelected(s){switch(s){case"column":{const r=this.endTd.nextElementSibling||this.startTd.previousElementSibling;if(!r)return;this.setSelected(r)}break;case"row":{const r=this.getCorrectRow(this.endTd,"next")||this.getCorrectRow(this.startTd,"prev");if(!r)return;const n=Q(this.startTd,this.quill.container);let l=r.firstElementChild;for(;l;){const a=Q(l,this.quill.container);if(a.left+2>=n.left||a.right-2>=n.left)return void this.setSelected(l);l=l.nextElementSibling}this.setSelected(r.firstElementChild)}}}},I=class{constructor(s,r){this.quill=s,this.options=null,this.drag=!1,this.line=null,this.dragBlock=null,this.dragTable=null,this.direction=null,this.tableBetter=r,this.quill.root.addEventListener("mousemove",this.handleMouseMove.bind(this))}createDragBlock(){const s=document.createElement("div");s.classList.add("ql-operate-block");const{dragBlockProps:r}=this.getProperty(this.options);at(s,r),this.dragBlock=s,this.quill.container.appendChild(s),this.updateCell(s)}createDragTable(s){const r=document.createElement("div"),n=this.getDragTableProperty(s);r.classList.add("ql-operate-drag-table"),at(r,n),this.dragTable=r,this.quill.container.appendChild(r)}createOperateLine(){const s=document.createElement("div"),r=document.createElement("div");s.classList.add("ql-operate-line-container");const{containerProps:n,lineProps:l}=this.getProperty(this.options);at(s,n),at(r,l),s.appendChild(r),this.quill.container.appendChild(s),this.line=s,this.updateCell(s)}getCorrectCol(s,r){let n=s.children.head;for(;n&&--r;)n=n.next;return n}getDragTableProperty(s){const{left:r,top:n,width:l,height:a}=s.getBoundingClientRect(),h=this.quill.container.getBoundingClientRect();return{left:r-h.left+"px",top:n-h.top+"px",width:`${l}px`,height:`${a}px`,display:"block"}}getLevelColSum(s){let r=s,n=0;for(;r;)n+=~~r.getAttribute("colspan")||1,r=r.previousSibling;return n}getMaxColNum(s){const r=s.parentElement.children;let n=0;for(const l of r)n+=~~l.getAttribute("colspan")||1;return n}getProperty(s){const r=this.quill.container.getBoundingClientRect(),{tableNode:n,cellNode:l,mousePosition:a}=s,{clientX:h,clientY:p}=a,b=n.getBoundingClientRect(),A=l.getBoundingClientRect(),S=A.left+A.width,T=A.top+A.height,w={width:"8px",height:"8px",top:b.bottom-r.top+"px",left:b.right-r.left+"px",display:b.bottom>r.bottom?"none":"block"};return Math.abs(S-h)<=5?(this.direction="level",{dragBlockProps:w,containerProps:{width:"5px",height:`${r.height}px`,top:"0",left:S-r.left-2.5+"px",display:"flex",cursor:"col-resize"},lineProps:{width:"1px",height:"100%"}}):Math.abs(T-p)<=5?(this.direction="vertical",{dragBlockProps:w,containerProps:{width:`${r.width}px`,height:"5px",top:T-r.top-2.5+"px",left:"0",display:"flex",cursor:"row-resize"},lineProps:{width:"100%",height:"1px"}}):(this.hideLine(),{dragBlockProps:w})}getVerticalCells(s,r){let n=s.parentElement;for(;r>1&&n;)n=n.nextSibling,r--;return n.children}handleMouseMove(s){const r=s.target.closest("table"),n=s.target.closest("td"),l={clientX:s.clientX,clientY:s.clientY};if(!r||!n)return void(this.line&&!this.drag&&(this.hideLine(),this.hideDragBlock()));const a={tableNode:r,cellNode:n,mousePosition:l};if(this.line){if(this.drag||!n)return;this.updateProperty(a)}else this.options=a,this.createOperateLine(),this.createDragBlock()}hideDragBlock(){this.dragBlock&&at(this.dragBlock,{display:"none"})}hideDragTable(){this.dragTable&&at(this.dragTable,{display:"none"})}hideLine(){this.line&&at(this.line,{display:"none"})}isLine(s){return s.classList.contains("ql-operate-line-container")}setCellLevelRect(s,r){const{right:n}=s.getBoundingClientRect(),l=~~(r-n),a=this.getLevelColSum(s),h=g().find(s).table(),p=h.colgroup(),b=h.domNode.getBoundingClientRect();if(p){const A=this.getCorrectCol(p,a),S=A.next,T=A.formats()[A.statics.blotName];if(A.domNode.setAttribute("width",`${parseFloat(T.width)+l}`),S){const w=S.formats()[S.statics.blotName];S.domNode.setAttribute("width",""+(parseFloat(w.width)-l))}}else{const A=s.nextElementSibling==null,S=s.parentElement.parentElement.children,T=[];for(const w of S){const G=w.children;if(A){const ct=G[G.length-1],{width:bt}=ct.getBoundingClientRect();T.push([ct,""+~~(bt+l)]);continue}let it=0;for(const ct of G){if(it+=~~ct.getAttribute("colspan")||1,it>a)break;if(it===a){const{width:bt}=ct.getBoundingClientRect(),St=ct.nextElementSibling;if(!St)continue;const{width:Gt}=St.getBoundingClientRect();T.push([ct,""+~~(bt+l)],[St,""+~~(Gt-l)])}}}for(const[w,G]of T)pt(w,{width:G}),at(w,{width:`${G}px`})}s.nextElementSibling==null&&Rt(h.domNode,b,l)}setCellRect(s,r,n){this.direction==="level"?this.setCellLevelRect(s,r):this.direction==="vertical"&&this.setCellVerticalRect(s,n)}setCellsRect(s,r,n){const l=s.parentElement.parentElement.children,a=r/this.getMaxColNum(s),h=n/l.length,p=[],b=g().find(s).table(),A=b.colgroup(),S=b.domNode.getBoundingClientRect();for(const T of l){const w=T.children;for(const G of w){const it=~~G.getAttribute("colspan")||1,{width:ct,height:bt}=G.getBoundingClientRect();p.push([G,`${Math.ceil(ct+a*it)}`,`${Math.ceil(bt+h)}`])}}if(A){let T=A.children.head;for(const[w,,G]of p)pt(w,{height:G}),at(w,{height:`${G}px`});for(;T;){const{width:w}=T.domNode.getBoundingClientRect();pt(T.domNode,{width:`${Math.ceil(w+a)}`}),T=T.next}}else for(const[T,w,G]of p)pt(T,{width:w,height:G}),at(T,{width:`${w}px`,height:`${G}px`});Rt(b.domNode,S,r)}setCellVerticalRect(s,r){const n=~~s.getAttribute("rowspan")||1,l=n>1?this.getVerticalCells(s,n):s.parentElement.children;for(const a of l){const{top:h}=a.getBoundingClientRect(),p=""+~~(r-h);pt(a,{height:p}),at(a,{height:`${p}px`})}}toggleLineChildClass(s){const r=this.line.firstElementChild;s?r.classList.add("ql-operate-line"):r.classList.remove("ql-operate-line")}updateCell(s){if(!s)return;const r=this.isLine(s),n=a=>{a.preventDefault(),this.drag&&(r?(this.updateDragLine(a.clientX,a.clientY),this.hideDragBlock()):(this.updateDragBlock(a.clientX,a.clientY),this.hideLine()))},l=a=>{a.preventDefault();const{cellNode:h,tableNode:p}=this.options;if(r)this.setCellRect(h,a.clientX,a.clientY),this.toggleLineChildClass(!1);else{const{right:b,bottom:A}=p.getBoundingClientRect(),S=a.clientX-b,T=a.clientY-A;this.setCellsRect(h,S,T),this.dragBlock.classList.remove("ql-operate-block-move"),this.hideDragBlock(),this.hideDragTable()}this.drag=!1,document.removeEventListener("mousemove",n,!1),document.removeEventListener("mouseup",l,!1),this.tableBetter.tableMenus.updateMenus(p)};s.addEventListener("mousedown",a=>{a.preventDefault();const{tableNode:h}=this.options;if(r)this.toggleLineChildClass(!0);else if(this.dragTable){const p=this.getDragTableProperty(h);at(this.dragTable,p)}else this.createDragTable(h);this.drag=!0,document.addEventListener("mousemove",n),document.addEventListener("mouseup",l)})}updateDragBlock(s,r){const n=this.quill.container.getBoundingClientRect();this.dragBlock.classList.add("ql-operate-block-move"),at(this.dragBlock,{top:~~(r-n.top-4)+"px",left:~~(s-n.left-4)+"px"}),this.updateDragTable(s,r)}updateDragLine(s,r){const n=this.quill.container.getBoundingClientRect();this.direction==="level"?at(this.line,{left:~~(s-n.left-2.5)+"px"}):this.direction==="vertical"&&at(this.line,{top:~~r-n.top-2.5+"px"})}updateDragTable(s,r){const{top:n,left:l}=this.dragTable.getBoundingClientRect(),a=s-l,h=r-n;at(this.dragTable,{width:`${a}px`,height:`${h}px`,display:"block"})}updateProperty(s){const{containerProps:r,lineProps:n,dragBlockProps:l}=this.getProperty(s);r&&n&&(this.options=s,at(this.line,r),at(this.line.firstChild,n),at(this.dragBlock,l))}},W='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084293475" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2632" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M1012.62222223 944.76190506a78.01904747 78.01904747 0 0 1-78.01904747 78.01904747H76.3936505a78.01904747 78.01904747 0 0 1-78.01904747-78.01904747V86.55238079a78.01904747 78.01904747 0 0 1 78.01904747-78.01904746h858.20952426a78.01904747 78.01904747 0 0 1 78.01904747 78.01904746v858.20952427zM466.4888889 554.66666666H76.3936505v390.0952384h390.0952384V554.66666666z m468.11428586 0H544.50793636v390.0952384h390.0952384V554.66666666zM466.4888889 86.55238079H76.3936505v390.0952384h390.0952384V86.55238079z m468.11428586 0H544.50793636v390.0952384h390.0952384V86.55238079z" fill="#515151" p-id="2633"></path></svg>',ht='<?xml version="1.0" encoding="UTF-8"?><svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M36 18L24 30L12 18" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',At={},Ct=[],It=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function ne(s,r){for(var n in r)s[n]=r[n];return s}function pe(s){var r=s.parentNode;r&&r.removeChild(s)}function Tt(s,r,n){var l,a,h,p,b=arguments;if(r=ne({},r),arguments.length>3)for(n=[n],l=3;l<arguments.length;l++)n.push(b[l]);if(n!=null&&(r.children=n),s!=null&&s.defaultProps!=null)for(a in s.defaultProps)r[a]===void 0&&(r[a]=s.defaultProps[a]);return p=r.key,(h=r.ref)!=null&&delete r.ref,p!=null&&delete r.key,ie(s,r,p,h)}function ie(s,r,n,l){var a={type:s,props:r,key:n,ref:l,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return de.vnode&&de.vnode(a),a}function ee(s){return s.children}function mt(s,r){this.props=s,this.context=r}function Vt(s,r){if(r==null)return s.__p?Vt(s.__p,s.__p.__k.indexOf(s)+1):null;for(var n;r<s.__k.length;r++)if((n=s.__k[r])!=null&&n.__e!=null)return n.__e;return typeof s.type=="function"?Vt(s):null}function ce(s){var r,n;if((s=s.__p)!=null&&s.__c!=null){for(s.__e=s.__c.base=null,r=0;r<s.__k.length;r++)if((n=s.__k[r])!=null&&n.__e!=null){s.__e=s.__c.base=n.__e;break}return ce(s)}}function Se(s){(!s.__d&&(s.__d=!0)&&We.push(s)===1||br!==de.debounceRendering)&&(br=de.debounceRendering,(de.debounceRendering||Le)(fr))}function fr(){var s,r,n,l,a,h,p,b;for(We.sort(function(A,S){return S.__v.__b-A.__v.__b});s=We.pop();)s.__d&&(n=void 0,l=void 0,h=(a=(r=s).__v).__e,p=r.__P,b=r.u,r.u=!1,p&&(n=[],l=se(p,a,ne({},a),r.__n,p.ownerSVGElement!==void 0,null,n,b,h??Vt(a)),ue(n,a),l!=h&&ce(a)))}function Ze(s,r,n,l,a,h,p,b,A){var S,T,w,G,it,ct,bt,St=n&&n.__k||Ct,Gt=St.length;if(b==At&&(b=h!=null?h[0]:Gt?Vt(n,0):null),S=0,r.__k=Qt(r.__k,function(Zt){if(Zt!=null){if(Zt.__p=r,Zt.__b=r.__b+1,(w=St[S])===null||w&&Zt.key==w.key&&Zt.type===w.type)St[S]=void 0;else for(T=0;T<Gt;T++){if((w=St[T])&&Zt.key==w.key&&Zt.type===w.type){St[T]=void 0;break}w=null}if(G=se(s,Zt,w=w||At,l,a,h,p,null,b,A),(T=Zt.ref)&&w.ref!=T&&(bt||(bt=[])).push(T,Zt.__c||G,Zt),G!=null){if(ct==null&&(ct=G),Zt.l!=null)G=Zt.l,Zt.l=null;else if(h==w||G!=b||G.parentNode==null){t:if(b==null||b.parentNode!==s)s.appendChild(G);else{for(it=b,T=0;(it=it.nextSibling)&&T<Gt;T+=2)if(it==G)break t;s.insertBefore(G,b)}r.type=="option"&&(s.value="")}b=G.nextSibling,typeof r.type=="function"&&(r.l=G)}}return S++,Zt}),r.__e=ct,h!=null&&typeof r.type!="function")for(S=h.length;S--;)h[S]!=null&&pe(h[S]);for(S=Gt;S--;)St[S]!=null&&vr(St[S],St[S]);if(bt)for(S=0;S<bt.length;S++)Lr(bt[S],bt[++S],bt[++S])}function Qt(s,r,n){if(n==null&&(n=[]),s==null||typeof s=="boolean")r&&n.push(r(null));else if(Array.isArray(s))for(var l=0;l<s.length;l++)Qt(s[l],r,n);else n.push(r?r(function(a){if(a==null||typeof a=="boolean")return null;if(typeof a=="string"||typeof a=="number")return ie(null,a,null,null);if(a.__e!=null||a.__c!=null){var h=ie(a.type,a.props,a.key,null);return h.__e=a.__e,h}return a}(s)):s);return n}function Ye(s,r,n){r[0]==="-"?s.setProperty(r,n):s[r]=typeof n=="number"&&It.test(r)===!1?n+"px":n??""}function pr(s,r,n,l,a){var h,p,b,A,S;if(!((r=a?r==="className"?"class":r:r==="class"?"className":r)==="key"||r==="children"))if(r==="style")if(h=s.style,typeof n=="string")h.cssText=n;else{if(typeof l=="string"&&(h.cssText="",l=null),l)for(p in l)n&&p in n||Ye(h,p,"");if(n)for(b in n)l&&n[b]===l[b]||Ye(h,b,n[b])}else r[0]==="o"&&r[1]==="n"?(A=r!==(r=r.replace(/Capture$/,"")),S=r.toLowerCase(),r=(S in s?S:r).slice(2),n?(l||s.addEventListener(r,Rr,A),(s.t||(s.t={}))[r]=n):s.removeEventListener(r,Rr,A)):r!=="list"&&r!=="tagName"&&r!=="form"&&!a&&r in s?s[r]=n??"":typeof n!="function"&&r!=="dangerouslySetInnerHTML"&&(r!==(r=r.replace(/^xlink:?/,""))?n==null||n===!1?s.removeAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase()):s.setAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase(),n):n==null||n===!1?s.removeAttribute(r):s.setAttribute(r,n))}function Rr(s){return this.t[s.type](de.event?de.event(s):s)}function se(s,r,n,l,a,h,p,b,A,S){var T,w,G,it,ct,bt,St,Gt,Zt,oe,Be=r.type;if(r.constructor!==void 0)return null;(T=de.__b)&&T(r);try{t:if(typeof Be=="function"){if(Gt=r.props,Zt=(T=Be.contextType)&&l[T.__c],oe=T?Zt?Zt.props.value:T.__p:l,n.__c?St=(w=r.__c=n.__c).__p=w.__E:("prototype"in Be&&Be.prototype.render?r.__c=w=new Be(Gt,oe):(r.__c=w=new mt(Gt,oe),w.constructor=Be,w.render=gr),Zt&&Zt.sub(w),w.props=Gt,w.state||(w.state={}),w.context=oe,w.__n=l,G=w.__d=!0,w.__h=[]),w.__s==null&&(w.__s=w.state),Be.getDerivedStateFromProps!=null&&ne(w.__s==w.state?w.__s=ne({},w.__s):w.__s,Be.getDerivedStateFromProps(Gt,w.__s)),G)Be.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),w.componentDidMount!=null&&p.push(w);else{if(Be.getDerivedStateFromProps==null&&b==null&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(Gt,oe),!b&&w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(Gt,w.__s,oe)===!1){for(w.props=Gt,w.state=w.__s,w.__d=!1,w.__v=r,r.__e=A!=null?A!==n.__e?A:n.__e:null,r.__k=n.__k,T=0;T<r.__k.length;T++)r.__k[T]&&(r.__k[T].__p=r);break t}w.componentWillUpdate!=null&&w.componentWillUpdate(Gt,w.__s,oe)}for(it=w.props,ct=w.state,w.context=oe,w.props=Gt,w.state=w.__s,(T=de.__r)&&T(r),w.__d=!1,w.__v=r,w.__P=s,T=w.render(w.props,w.state,w.context),r.__k=Qt(T!=null&&T.type==ee&&T.key==null?T.props.children:T),w.getChildContext!=null&&(l=ne(ne({},l),w.getChildContext())),G||w.getSnapshotBeforeUpdate==null||(bt=w.getSnapshotBeforeUpdate(it,ct)),Ze(s,r,n,l,a,h,p,A,S),w.base=r.__e;T=w.__h.pop();)w.__s&&(w.state=w.__s),T.call(w);G||it==null||w.componentDidUpdate==null||w.componentDidUpdate(it,ct,bt),St&&(w.__E=w.__p=null)}else r.__e=Ar(n.__e,r,n,l,a,h,p,S);(T=de.diffed)&&T(r)}catch(nr){de.__e(nr,r,n)}return r.__e}function ue(s,r){for(var n;n=s.pop();)try{n.componentDidMount()}catch(l){de.__e(l,n.__v)}de.__c&&de.__c(r)}function Ar(s,r,n,l,a,h,p,b){var A,S,T,w,G=n.props,it=r.props;if(a=r.type==="svg"||a,s==null&&h!=null){for(A=0;A<h.length;A++)if((S=h[A])!=null&&(r.type===null?S.nodeType===3:S.localName===r.type)){s=S,h[A]=null;break}}if(s==null){if(r.type===null)return document.createTextNode(it);s=a?document.createElementNS("http://www.w3.org/2000/svg",r.type):document.createElement(r.type),h=null}return r.type===null?G!==it&&(h!=null&&(h[h.indexOf(s)]=null),s.data=it):r!==n&&(h!=null&&(h=Ct.slice.call(s.childNodes)),T=(G=n.props||At).dangerouslySetInnerHTML,w=it.dangerouslySetInnerHTML,b||(w||T)&&(w&&T&&w.__html==T.__html||(s.innerHTML=w&&w.__html||"")),function(ct,bt,St,Gt,Zt){var oe;for(oe in St)oe in bt||pr(ct,oe,null,St[oe],Gt);for(oe in bt)Zt&&typeof bt[oe]!="function"||oe==="value"||oe==="checked"||St[oe]===bt[oe]||pr(ct,oe,bt[oe],St[oe],Gt)}(s,it,G,a,b),r.__k=r.props.children,w||Ze(s,r,n,l,r.type!=="foreignObject"&&a,h,p,At,b),b||("value"in it&&it.value!==void 0&&it.value!==s.value&&(s.value=it.value==null?"":it.value),"checked"in it&&it.checked!==void 0&&it.checked!==s.checked&&(s.checked=it.checked))),s}function Lr(s,r,n){try{typeof s=="function"?s(r):s.current=r}catch(l){de.__e(l,n)}}function vr(s,r,n){var l,a,h;if(de.unmount&&de.unmount(s),(l=s.ref)&&Lr(l,null,r),n||typeof s.type=="function"||(n=(a=s.__e)!=null),s.__e=s.l=null,(l=s.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(p){de.__e(p,r)}l.base=l.__P=null}if(l=s.__k)for(h=0;h<l.length;h++)l[h]&&vr(l[h],r,n);a!=null&&pe(a)}function gr(s,r,n){return this.constructor(s,n)}function Sr(s,r){for(var n=0;n<r.length;n++){var l=r[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(s,l.key,l)}}function He(){return He=Object.assign||function(s){for(var r=arguments,n=1;n<arguments.length;n++){var l=r[n];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(s[a]=l[a])}return s},He.apply(this,arguments)}de={},mt.prototype.setState=function(s,r){var n=this.__s!==this.state&&this.__s||(this.__s=ne({},this.state));(typeof s!="function"||(s=s(n,this.props)))&&ne(n,s),s!=null&&this.__v&&(this.u=!1,r&&this.__h.push(r),Se(this))},mt.prototype.forceUpdate=function(s){this.__v&&(s&&this.__h.push(s),this.u=!0,Se(this))},mt.prototype.render=ee,We=[],Le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,br=de.debounceRendering,de.__e=function(s,r,n){for(var l;r=r.__p;)if((l=r.__c)&&!l.__p)try{if(l.constructor&&l.constructor.getDerivedStateFromError!=null)l.setState(l.constructor.getDerivedStateFromError(s));else{if(l.componentDidCatch==null)continue;l.componentDidCatch(s)}return Se(l.__E=l)}catch(a){s=a}throw s},z=At;var yr="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",qr="[\\s|\\(]+("+yr+")[,|\\s]+("+yr+")[,|\\s]+("+yr+")\\s*\\)?",ze="[\\s|\\(]+("+yr+")[,|\\s]+("+yr+")[,|\\s]+("+yr+")[,|\\s]+("+yr+")\\s*\\)?",gn=new RegExp("rgb"+qr),Kr=new RegExp("rgba"+ze),Br=new RegExp("hsl"+qr),Pr=new RegExp("hsla"+ze),Er="^(?:#?|0x?)",Mr="([0-9a-fA-F]{1})",wr="([0-9a-fA-F]{2})",Dr=new RegExp(Er+Mr+Mr+Mr+"$"),Fn=new RegExp(Er+Mr+Mr+Mr+Mr+"$"),zr=new RegExp(Er+wr+wr+wr+"$"),Vn=new RegExp(Er+wr+wr+wr+wr+"$"),on=Math.log,ln=Math.round,mn=Math.floor;function d(s,r,n){return Math.min(Math.max(s,r),n)}function v(s,r){var n=s.indexOf("%")>-1,l=parseFloat(s);return n?r/100*l:l}function O(s){return parseInt(s,16)}function Y(s){return s.toString(16).padStart(2,"0")}var Kt=function(){function s(a,h){this.$={h:0,s:0,v:0,a:1},a&&this.set(a),this.onChange=h,this.initialValue=He({},this.$)}var r,n,l=s.prototype;return l.set=function(a){if(typeof a=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(a)?this.hexString=a:/^rgba?/.test(a)?this.rgbString=a:/^hsla?/.test(a)&&(this.hslString=a);else{if(typeof a!="object")throw new Error("Invalid color value");a instanceof s?this.hsva=a.hsva:"r"in a&&"g"in a&&"b"in a?this.rgb=a:"h"in a&&"s"in a&&"v"in a?this.hsv=a:"h"in a&&"s"in a&&"l"in a?this.hsl=a:"kelvin"in a&&(this.kelvin=a.kelvin)}},l.setChannel=function(a,h,p){var b;this[a]=He({},this[a],((b={})[h]=p,b))},l.reset=function(){this.hsva=this.initialValue},l.clone=function(){return new s(this)},l.unbind=function(){this.onChange=void 0},s.hsvToRgb=function(a){var h=a.h/60,p=a.s/100,b=a.v/100,A=mn(h),S=h-A,T=b*(1-p),w=b*(1-S*p),G=b*(1-(1-S)*p),it=A%6,ct=[G,b,b,w,T,T][it],bt=[T,T,G,b,b,w][it];return{r:d(255*[b,w,T,T,G,b][it],0,255),g:d(255*ct,0,255),b:d(255*bt,0,255)}},s.rgbToHsv=function(a){var h=a.r/255,p=a.g/255,b=a.b/255,A=Math.max(h,p,b),S=Math.min(h,p,b),T=A-S,w=0,G=A,it=A===0?0:T/A;switch(A){case S:w=0;break;case h:w=(p-b)/T+(p<b?6:0);break;case p:w=(b-h)/T+2;break;case b:w=(h-p)/T+4}return{h:60*w%360,s:d(100*it,0,100),v:d(100*G,0,100)}},s.hsvToHsl=function(a){var h=a.s/100,p=a.v/100,b=(2-h)*p,A=b<=1?b:2-b,S=A<1e-9?0:h*p/A;return{h:a.h,s:d(100*S,0,100),l:d(50*b,0,100)}},s.hslToHsv=function(a){var h=2*a.l,p=a.s*(h<=100?h:200-h)/100,b=h+p<1e-9?0:2*p/(h+p);return{h:a.h,s:d(100*b,0,100),v:d((h+p)/2,0,100)}},s.kelvinToRgb=function(a){var h,p,b,A=a/100;return A<66?(h=255,p=-155.25485562709179-.44596950469579133*(p=A-2)+104.49216199393888*on(p),b=A<20?0:.8274096064007395*(b=A-10)-254.76935184120902+115.67994401066147*on(b)):(h=351.97690566805693+.114206453784165*(h=A-55)-40.25366309332127*on(h),p=325.4494125711974+.07943456536662342*(p=A-50)-28.0852963507957*on(p),b=255),{r:d(mn(h),0,255),g:d(mn(p),0,255),b:d(mn(b),0,255)}},s.rgbToKelvin=function(a){for(var h,p=a.r,b=a.b,A=2e3,S=4e4;S-A>.4;){h=.5*(S+A);var T=s.kelvinToRgb(h);T.b/T.r>=b/p?S=h:A=h}return h},r=s,n=[{key:"hsv",get:function(){var a=this.$;return{h:a.h,s:a.s,v:a.v}},set:function(a){var h=this.$;if(a=He({},h,a),this.onChange){var p={h:!1,v:!1,s:!1,a:!1};for(var b in h)p[b]=a[b]!=h[b];this.$=a,(p.h||p.s||p.v||p.a)&&this.onChange(this,p)}else this.$=a}},{key:"hsva",get:function(){return He({},this.$)},set:function(a){this.hsv=a}},{key:"hue",get:function(){return this.$.h},set:function(a){this.hsv={h:a}}},{key:"saturation",get:function(){return this.$.s},set:function(a){this.hsv={s:a}}},{key:"value",get:function(){return this.$.v},set:function(a){this.hsv={v:a}}},{key:"alpha",get:function(){return this.$.a},set:function(a){this.hsv=He({},this.hsv,{a})}},{key:"kelvin",get:function(){return s.rgbToKelvin(this.rgb)},set:function(a){this.rgb=s.kelvinToRgb(a)}},{key:"red",get:function(){return this.rgb.r},set:function(a){this.rgb=He({},this.rgb,{r:a})}},{key:"green",get:function(){return this.rgb.g},set:function(a){this.rgb=He({},this.rgb,{g:a})}},{key:"blue",get:function(){return this.rgb.b},set:function(a){this.rgb=He({},this.rgb,{b:a})}},{key:"rgb",get:function(){var a=s.hsvToRgb(this.$),h=a.r,p=a.g,b=a.b;return{r:ln(h),g:ln(p),b:ln(b)}},set:function(a){this.hsv=He({},s.rgbToHsv(a),{a:a.a===void 0?1:a.a})}},{key:"rgba",get:function(){return He({},this.rgb,{a:this.alpha})},set:function(a){this.rgb=a}},{key:"hsl",get:function(){var a=s.hsvToHsl(this.$),h=a.h,p=a.s,b=a.l;return{h:ln(h),s:ln(p),l:ln(b)}},set:function(a){this.hsv=He({},s.hslToHsv(a),{a:a.a===void 0?1:a.a})}},{key:"hsla",get:function(){return He({},this.hsl,{a:this.alpha})},set:function(a){this.hsl=a}},{key:"rgbString",get:function(){var a=this.rgb;return"rgb("+a.r+", "+a.g+", "+a.b+")"},set:function(a){var h,p,b,A,S=1;if((h=gn.exec(a))?(p=v(h[1],255),b=v(h[2],255),A=v(h[3],255)):(h=Kr.exec(a))&&(p=v(h[1],255),b=v(h[2],255),A=v(h[3],255),S=v(h[4],1)),!h)throw new Error("Invalid rgb string");this.rgb={r:p,g:b,b:A,a:S}}},{key:"rgbaString",get:function(){var a=this.rgba;return"rgba("+a.r+", "+a.g+", "+a.b+", "+a.a+")"},set:function(a){this.rgbString=a}},{key:"hexString",get:function(){var a=this.rgb;return"#"+Y(a.r)+Y(a.g)+Y(a.b)},set:function(a){var h,p,b,A,S=255;if((h=Dr.exec(a))?(p=17*O(h[1]),b=17*O(h[2]),A=17*O(h[3])):(h=Fn.exec(a))?(p=17*O(h[1]),b=17*O(h[2]),A=17*O(h[3]),S=17*O(h[4])):(h=zr.exec(a))?(p=O(h[1]),b=O(h[2]),A=O(h[3])):(h=Vn.exec(a))&&(p=O(h[1]),b=O(h[2]),A=O(h[3]),S=O(h[4])),!h)throw new Error("Invalid hex string");this.rgb={r:p,g:b,b:A,a:S/255}}},{key:"hex8String",get:function(){var a=this.rgba;return"#"+Y(a.r)+Y(a.g)+Y(a.b)+Y(mn(255*a.a))},set:function(a){this.hexString=a}},{key:"hslString",get:function(){var a=this.hsl;return"hsl("+a.h+", "+a.s+"%, "+a.l+"%)"},set:function(a){var h,p,b,A,S=1;if((h=Br.exec(a))?(p=v(h[1],360),b=v(h[2],100),A=v(h[3],100)):(h=Pr.exec(a))&&(p=v(h[1],360),b=v(h[2],100),A=v(h[3],100),S=v(h[4],1)),!h)throw new Error("Invalid hsl string");this.hsl={h:p,s:b,l:A,a:S}}},{key:"hslaString",get:function(){var a=this.hsla;return"hsla("+a.h+", "+a.s+"%, "+a.l+"%, "+a.a+")"},set:function(a){this.hslString=a}}],n&&Sr(r.prototype,n),s}();function jt(s){var r,n=s.width,l=s.sliderSize,a=s.borderWidth,h=s.handleRadius,p=s.padding,b=s.sliderShape,A=s.layoutDirection==="horizontal";return l=(r=l)!=null?r:2*p+2*h,b==="circle"?{handleStart:s.padding+s.handleRadius,handleRange:n-2*p-2*h,width:n,height:n,cx:n/2,cy:n/2,radius:n/2-a/2}:{handleStart:l/2,handleRange:n-l,radius:l/2,x:0,y:0,width:A?l:n,height:A?n:l}}var we,xe=2*Math.PI,Je=function(s,r){return(s%r+r)%r},Ce=function(s,r){return Math.sqrt(s*s+r*r)};function ur(s){return s.width/2-s.padding-s.handleRadius-s.borderWidth}function hr(s){var r=s.width/2;return{width:s.width,radius:r-s.borderWidth,cx:r,cy:r}}function tr(s,r,n){var l=s.wheelAngle,a=s.wheelDirection;return n&&a==="clockwise"?r=l+r:a==="clockwise"?r=360-l+r:n&&a==="anticlockwise"?r=l+180-r:a==="anticlockwise"&&(r=l-r),Je(r,360)}function dr(s,r,n){var l=hr(s),a=l.cx,h=l.cy,p=ur(s);r=a-r,n=h-n;var b=tr(s,Math.atan2(-n,-r)*(360/xe)),A=Math.min(Ce(r,n),p);return{h:Math.round(b),s:Math.round(100/p*A)}}function rr(s){var r=s.width,n=s.boxHeight;return{width:r,height:n??r,radius:s.padding+s.handleRadius}}function Zr(s,r,n){var l=rr(s),a=l.width,h=l.height,p=l.radius,b=(r-p)/(a-2*p)*100,A=(n-p)/(h-2*p)*100;return{s:Math.max(0,Math.min(b,100)),v:Math.max(0,Math.min(100-A,100))}}function Yr(s){we||(we=document.getElementsByTagName("base"));var r=window.navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(r),l=/iPhone|iPod|iPad/i.test(r),a=window.location;return(n||l)&&we.length>0?a.protocol+"//"+a.host+a.pathname+a.search+s:s}function an(s,r,n,l){for(var a=0;a<l.length;a++){var h=l[a].x-r,p=l[a].y-n;if(Math.sqrt(h*h+p*p)<s.handleRadius)return a}return null}function Wn(s){return{boxSizing:"border-box",border:s.borderWidth+"px solid "+s.borderColor}}function An(s,r,n){return s+"-gradient("+r+", "+n.map(function(l){var a=l[0];return l[1]+" "+a+"%"}).join(",")+")"}function or(s){return typeof s=="string"?s:s+"px"}var Co=["mousemove","touchmove","mouseup","touchend"],Mi=function(s){function r(n){s.call(this,n),this.uid=(Math.random()+1).toString(36).substring(5)}return r.__proto__=s,r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.render=function(n){var l=this.handleEvent.bind(this),a={onMouseDown:l,ontouchstart:l},h=n.layoutDirection==="horizontal",p=n.margin===null?n.sliderMargin:n.margin,b={overflow:"visible",display:h?"inline-block":"block"};return n.index>0&&(b[h?"marginLeft":"marginTop"]=p),Tt(ee,null,n.children(this.uid,a,b))},r.prototype.handleEvent=function(n){var l=this,a=this.props.onInput,h=this.base.getBoundingClientRect();n.preventDefault();var p=n.touches?n.changedTouches[0]:n,b=p.clientX-h.left,A=p.clientY-h.top;switch(n.type){case"mousedown":case"touchstart":a(b,A,0)!==!1&&Co.forEach(function(S){document.addEventListener(S,l,{passive:!1})});break;case"mousemove":case"touchmove":a(b,A,1);break;case"mouseup":case"touchend":a(b,A,2),Co.forEach(function(S){document.removeEventListener(S,l,{passive:!1})})}},r}(mt);function In(s){var r=s.r,n=s.url,l=r,a=r;return Tt("svg",{className:"IroHandle IroHandle--"+s.index+" "+(s.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+or(s.x)+", "+or(s.y)+")",willChange:"transform",top:or(-r),left:or(-r),width:or(2*r),height:or(2*r),position:"absolute",overflow:"visible"}},n&&Tt("use",Object.assign({xlinkHref:Yr(n)},s.props)),!n&&Tt("circle",{cx:l,cy:a,r,fill:"none","stroke-width":2,stroke:"#000"}),!n&&Tt("circle",{cx:l,cy:a,r:r-2,fill:s.fill,"stroke-width":2,stroke:"#fff"}))}function Ii(s){var r=s.activeIndex,n=r!==void 0&&r<s.colors.length?s.colors[r]:s.color,l=jt(s),a=l.width,h=l.height,p=l.radius,b=function(S,T){var w=jt(S),G=w.width,it=w.height,ct=w.handleRange,bt=w.handleStart,St=S.layoutDirection==="horizontal",Gt=function(Be,nr){var $r=nr.hsva,xr=nr.rgb;switch(Be.sliderType){case"red":return xr.r/2.55;case"green":return xr.g/2.55;case"blue":return xr.b/2.55;case"alpha":return 100*$r.a;case"kelvin":var Ir=Be.minTemperature,Ur=Be.maxTemperature-Ir,bn=(nr.kelvin-Ir)/Ur*100;return Math.max(0,Math.min(bn,100));case"hue":return $r.h/=3.6;case"saturation":return $r.s;default:return $r.v}}(S,T),Zt=St?G/2:it/2,oe=bt+Gt/100*ct;return St&&(oe=-1*oe+ct+2*bt),{x:St?Zt:oe,y:St?oe:Zt}}(s,n),A=function(S,T){var w=T.hsv,G=T.rgb;switch(S.sliderType){case"red":return[[0,"rgb(0,"+G.g+","+G.b+")"],[100,"rgb(255,"+G.g+","+G.b+")"]];case"green":return[[0,"rgb("+G.r+",0,"+G.b+")"],[100,"rgb("+G.r+",255,"+G.b+")"]];case"blue":return[[0,"rgb("+G.r+","+G.g+",0)"],[100,"rgb("+G.r+","+G.g+",255)"]];case"alpha":return[[0,"rgba("+G.r+","+G.g+","+G.b+",0)"],[100,"rgb("+G.r+","+G.g+","+G.b+")"]];case"kelvin":for(var it=[],ct=S.minTemperature,bt=S.maxTemperature,St=bt-ct,Gt=ct,Zt=0;Gt<bt;Gt+=St/8,Zt+=1){var oe=Kt.kelvinToRgb(Gt),Be=oe.r,nr=oe.g,$r=oe.b;it.push([12.5*Zt,"rgb("+Be+","+nr+","+$r+")"])}return it;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var xr=Kt.hsvToHsl({h:w.h,s:0,v:w.v}),Ir=Kt.hsvToHsl({h:w.h,s:100,v:w.v});return[[0,"hsl("+xr.h+","+xr.s+"%,"+xr.l+"%)"],[100,"hsl("+Ir.h+","+Ir.s+"%,"+Ir.l+"%)"]];default:var Ur=Kt.hsvToHsl({h:w.h,s:w.s,v:100});return[[0,"#000"],[100,"hsl("+Ur.h+","+Ur.s+"%,"+Ur.l+"%)"]]}}(s,n);return Tt(Mi,Object.assign({},s,{onInput:function(S,T,w){var G=function(it,ct,bt){var St,Gt=jt(it),Zt=Gt.handleRange,oe=Gt.handleStart;St=it.layoutDirection==="horizontal"?-1*bt+Zt+oe:ct-oe,St=Math.max(Math.min(St,Zt),0);var Be=Math.round(100/Zt*St);switch(it.sliderType){case"kelvin":var nr=it.minTemperature;return nr+(it.maxTemperature-nr)*(Be/100);case"alpha":return Be/100;case"hue":return 3.6*Be;case"red":case"blue":case"green":return 2.55*Be;default:return Be}}(s,S,T);s.parent.inputActive=!0,n[s.sliderType]=G,s.onInput(w,s.id)}}),function(S,T,w){return Tt("div",Object.assign({},T,{className:"IroSlider",style:Object.assign({},{position:"relative",width:or(a),height:or(h),borderRadius:or(p),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},w)}),Tt("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:or(p),background:An("linear",s.layoutDirection==="horizontal"?"to top":"to right",A)},Wn(s))}),Tt(In,{isActive:!0,index:n.index,r:s.handleRadius,url:s.handleSvg,props:s.handleProps,x:b.x,y:b.y}))})}function lc(s){var r=rr(s),n=r.width,l=r.height,a=r.radius,h=s.colors,p=s.parent,b=s.activeIndex,A=b!==void 0&&b<s.colors.length?s.colors[b]:s.color,S=[[[0,"#fff"],[100,"hsl("+A.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]],T=h.map(function(w){return function(G,it){var ct=rr(G),bt=ct.width,St=ct.height,Gt=ct.radius,Zt=it.hsv,oe=Gt,Be=bt-2*Gt,nr=St-2*Gt;return{x:oe+Zt.s/100*Be,y:oe+(nr-Zt.v/100*nr)}}(s,w)});return Tt(Mi,Object.assign({},s,{onInput:function(w,G,it){if(it===0){var ct=an(s,w,G,T);ct!==null?p.setActiveColor(ct):(p.inputActive=!0,A.hsv=Zr(s,w,G),s.onInput(it,s.id))}else it===1&&(p.inputActive=!0,A.hsv=Zr(s,w,G));s.onInput(it,s.id)}}),function(w,G,it){return Tt("div",Object.assign({},G,{className:"IroBox",style:Object.assign({},{width:or(n),height:or(l),position:"relative"},it)}),Tt("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:or(a)},Wn(s),{background:An("linear","to bottom",S[1])+","+An("linear","to right",S[0])})}),h.filter(function(ct){return ct!==A}).map(function(ct){return Tt(In,{isActive:!1,index:ct.index,fill:ct.hslString,r:s.handleRadius,url:s.handleSvg,props:s.handleProps,x:T[ct.index].x,y:T[ct.index].y})}),Tt(In,{isActive:!0,index:A.index,fill:A.hslString,r:s.activeHandleRadius||s.handleRadius,url:s.handleSvg,props:s.handleProps,x:T[A.index].x,y:T[A.index].y}))})}function _o(s){var r=hr(s).width,n=s.colors,l=(s.borderWidth,s.parent),a=s.color,h=a.hsv,p=n.map(function(A){return function(S,T){var w=T.hsv,G=hr(S),it=G.cx,ct=G.cy,bt=ur(S),St=(180+tr(S,w.h,!0))*(xe/360),Gt=w.s/100*bt,Zt=S.wheelDirection==="clockwise"?-1:1;return{x:it+Gt*Math.cos(St)*Zt,y:ct+Gt*Math.sin(St)*Zt}}(s,A)}),b={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};return Tt(Mi,Object.assign({},s,{onInput:function(A,S,T){if(T===0){if(!function(G,it,ct){var bt=hr(G),St=bt.cx,Gt=bt.cy,Zt=G.width/2;return Ce(St-it,Gt-ct)<Zt}(s,A,S))return!1;var w=an(s,A,S,p);w!==null?l.setActiveColor(w):(l.inputActive=!0,a.hsv=dr(s,A,S),s.onInput(T,s.id))}else T===1&&(l.inputActive=!0,a.hsv=dr(s,A,S));s.onInput(T,s.id)}}),function(A,S,T){return Tt("div",Object.assign({},S,{className:"IroWheel",style:Object.assign({},{width:or(r),height:or(r),position:"relative"},T)}),Tt("div",{className:"IroWheelHue",style:Object.assign({},b,{transform:"rotateZ("+(s.wheelAngle+90)+"deg)",background:s.wheelDirection==="clockwise"?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)"})}),Tt("div",{className:"IroWheelSaturation",style:Object.assign({},b,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),s.wheelLightness&&Tt("div",{className:"IroWheelLightness",style:Object.assign({},b,{background:"#000",opacity:1-h.v/100})}),Tt("div",{className:"IroWheelBorder",style:Object.assign({},b,Wn(s))}),n.filter(function(w){return w!==a}).map(function(w){return Tt(In,{isActive:!1,index:w.index,fill:w.hslString,r:s.handleRadius,url:s.handleSvg,props:s.handleProps,x:p[w.index].x,y:p[w.index].y})}),Tt(In,{isActive:!0,index:a.index,fill:a.hslString,r:s.activeHandleRadius||s.handleRadius,url:s.handleSvg,props:s.handleProps,x:p[a.index].x,y:p[a.index].y}))})}In.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}},Ii.defaultProps=Object.assign({},{sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3});var ko=function(s){function r(n){var l=this;s.call(this,n),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=n.id,(n.colors.length>0?n.colors:[n.color]).forEach(function(a){return l.addColor(a)}),this.setActiveColor(0),this.state=Object.assign({},n,{color:this.color,colors:this.colors,layout:n.layout})}return r.__proto__=s,r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.addColor=function(n,l){l===void 0&&(l=this.colors.length);var a=new Kt(n,this.onColorChange.bind(this));this.colors.splice(l,0,a),this.colors.forEach(function(h,p){return h.index=p}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",a)},r.prototype.removeColor=function(n){var l=this.colors.splice(n,1)[0];l.unbind(),this.colors.forEach(function(a,h){return a.index=h}),this.state&&this.setState({colors:this.colors}),l.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",l)},r.prototype.setActiveColor=function(n){this.color=this.colors[n],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},r.prototype.setColors=function(n,l){var a=this;l===void 0&&(l=0),this.colors.forEach(function(h){return h.unbind()}),this.colors=[],n.forEach(function(h){return a.addColor(h)}),this.setActiveColor(l),this.emit("color:setAll",this.colors)},r.prototype.on=function(n,l){var a=this,h=this.events;(Array.isArray(n)?n:[n]).forEach(function(p){(h[p]||(h[p]=[])).push(l),a.deferredEvents[p]&&(a.deferredEvents[p].forEach(function(b){l.apply(null,b)}),a.deferredEvents[p]=[])})},r.prototype.off=function(n,l){var a=this;(Array.isArray(n)?n:[n]).forEach(function(h){var p=a.events[h];p&&p.splice(p.indexOf(l),1)})},r.prototype.emit=function(n){for(var l=this,a=[],h=arguments.length-1;h-- >0;)a[h]=arguments[h+1];var p=this.activeEvents;p.hasOwnProperty(n)&&p[n]||(p[n]=!0,(this.events[n]||[]).forEach(function(b){return b.apply(l,a)}),p[n]=!1)},r.prototype.deferredEmit=function(n){for(var l,a=[],h=arguments.length-1;h-- >0;)a[h]=arguments[h+1];var p=this.deferredEvents;(l=this).emit.apply(l,[n].concat(a)),(p[n]||(p[n]=[])).push(a)},r.prototype.setOptions=function(n){this.setState(n)},r.prototype.resize=function(n){this.setOptions({width:n})},r.prototype.reset=function(){this.colors.forEach(function(n){return n.reset()}),this.setState({colors:this.colors})},r.prototype.onMount=function(n){this.el=n,this.deferredEmit("mount",this)},r.prototype.onColorChange=function(n,l){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",n,l)),this.emit("color:change",n,l)},r.prototype.emitInputEvent=function(n,l){n===0?this.emit("input:start",this.color,l):n===1?this.emit("input:move",this.color,l):n===2&&this.emit("input:end",this.color,l)},r.prototype.render=function(n,l){var a=this,h=l.layout;return Array.isArray(h)||(h=[{component:_o},{component:Ii}],l.transparency&&h.push({component:Ii,options:{sliderType:"alpha"}})),Tt("div",{class:"IroColorPicker",id:l.id,style:{display:l.display}},h.map(function(p,b){var A=p.component,S=p.options;return Tt(A,Object.assign({},l,S,{ref:void 0,onInput:a.emitInputEvent.bind(a),parent:a,index:b}))}))},r}(mt);ko.defaultProps=Object.assign({},{width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},{colors:[],display:"block",id:null,layout:"default",margin:null});var ji,ui,hs,ac=(ui=function(s,r){var n,l=document.createElement("div");function a(){var h=s instanceof Element?s:document.querySelector(s);h.appendChild(n.base),n.onMount(h)}return function(h,p,b){var A,S,T;de.__p&&de.__p(h,p),S=(A=b===z)?null:p.__k,h=Tt(ee,null,[h]),T=[],se(p,p.__k=h,S||At,At,p.ownerSVGElement!==void 0,S?null:Ct.slice.call(p.childNodes),T,!1,At,A),ue(T,h)}(Tt(ji,Object.assign({},{ref:function(h){return n=h}},r)),l),document.readyState!=="loading"?a():document.addEventListener("DOMContentLoaded",a),n},ui.prototype=(ji=ko).prototype,Object.assign(ui,ji),ui.__component=ji,ui);(function(s){var r;s.version="5.5.2",s.Color=Kt,s.ColorPicker=ac,(r=s.ui||(s.ui={})).h=Tt,r.ComponentBase=Mi,r.Handle=In,r.Slider=Ii,r.Wheel=_o,r.Box=lc})(hs||(hs={}));var Lo=hs;const cc=[{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M43 11L16.875 37L5 25.1818" stroke="#008a00" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"save"},{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 8L40 40" stroke="#db3700" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 40L40 8" stroke="#db3700" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"cancel"}],uc=[{value:"#000000",describe:"black"},{value:"#4d4d4d",describe:"dimGrey"},{value:"#808080",describe:"grey"},{value:"#e6e6e6",describe:"lightGrey"},{value:"#ffffff",describe:"white"},{value:"#ff0000",describe:"red"},{value:"#ffa500",describe:"orange"},{value:"#ffff00",describe:"yellow"},{value:"#99e64d",describe:"lightGreen"},{value:"#008000",describe:"green"},{value:"#7fffd4",describe:"aquamarine"},{value:"#40e0d0",describe:"turquoise"},{value:"#4d99e6",describe:"lightBlue"},{value:"#0000ff",describe:"blue"},{value:"#800080",describe:"purple"}];var Gn,So=class{constructor(s,r){this.tableMenus=s,this.options=r,this.attrs=Object.assign({},r.attribute),this.borderForm=[],this.saveButton=null,this.form=this.createPropertiesForm(r)}checkBtnsAction(s){s==="save"&&this.saveAction(this.options.type),this.removePropertiesForm(),this.tableMenus.showMenus(),this.tableMenus.updateMenus()}createActionBtns(s,r){const n=this.getUseLanguage(),l=document.createElement("div"),a=document.createDocumentFragment();l.classList.add("properties-form-action-row");for(const{icon:h,label:p}of cc){const b=document.createElement("button"),A=document.createElement("span");if(A.innerHTML=h,b.appendChild(A),pt(b,{label:p}),r){const S=document.createElement("span");S.innerText=n(p),b.appendChild(S)}a.appendChild(b)}return l.addEventListener("click",h=>s(h)),l.appendChild(a),l}createCheckBtns(s){const{menus:r,propertyName:n}=s,l=document.createElement("div"),a=document.createDocumentFragment();for(const{icon:h,describe:p,align:b}of r){const A=document.createElement("span");A.innerHTML=h,A.setAttribute("data-align",b),A.classList.add("ql-table-tooltip-hover"),this.options.attribute[n]===b&&A.classList.add("ql-table-btns-checked");const S=E(p);A.appendChild(S),a.appendChild(A)}return l.classList.add("ql-table-check-container"),l.appendChild(a),l.addEventListener("click",h=>{const p=h.target.closest("span.ql-table-tooltip-hover"),b=p.getAttribute("data-align");this.switchButton(l,p),this.setAttribute(n,b)}),l}createColorContainer(s){const r=document.createElement("div");r.classList.add("ql-table-color-container");const n=this.createColorInput(s),l=this.createColorPicker(s);return r.appendChild(n),r.appendChild(l),r}createColorInput(s){const r=this.createInput(s);return r.classList.add("label-field-view-color"),r}createColorList(s){const r=this.getUseLanguage(),n=document.createElement("ul"),l=document.createDocumentFragment();n.classList.add("color-list");for(const{value:a,describe:h}of uc){const p=document.createElement("li"),b=E(r(h));p.setAttribute("data-color",a),p.classList.add("ql-table-tooltip-hover"),at(p,{"background-color":a}),p.appendChild(b),l.appendChild(p)}return n.appendChild(l),n.addEventListener("click",a=>{const h=a.target,p=(h.tagName==="DIV"?h.parentElement:h).getAttribute("data-color");this.setAttribute(s,p,n),this.updateInputStatus(n,!1,!0)}),n}createColorPicker(s){const{propertyName:r,value:n}=s,l=document.createElement("span"),a=document.createElement("span");l.classList.add("color-picker"),a.classList.add("color-button"),n?at(a,{"background-color":n}):a.classList.add("color-unselected");const h=this.createColorPickerSelect(r);return a.addEventListener("click",()=>{this.toggleHidden(h);const p=this.getColorClosest(l),b=p==null?void 0:p.querySelector(".property-input");this.updateSelectedStatus(h,b==null?void 0:b.value,"color")}),l.appendChild(a),l.appendChild(h),l}createColorPickerIcon(s,r,n){const l=document.createElement("div"),a=document.createElement("span"),h=document.createElement("button");return a.innerHTML=s,h.innerText=r,l.classList.add("erase-container"),l.appendChild(a),l.appendChild(h),l.addEventListener("click",n),l}createColorPickerSelect(s){const r=this.getUseLanguage(),n=document.createElement("div"),l=this.createColorPickerIcon('<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 42H44" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M31 4L7 28L13 34H21L41 14L31 4Z" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',r("removeColor"),()=>{this.setAttribute(s,"",n),this.updateInputStatus(n,!1,!0)}),a=this.createColorList(s),h=this.createPalette(s,r,n);return n.classList.add("color-picker-select","ql-hidden"),n.appendChild(l),n.appendChild(a),n.appendChild(h),n}createDropdown(s,r){const n=document.createElement("div"),l=document.createElement("span"),a=document.createElement("span");return r==="dropdown"&&(a.innerHTML=ht,a.classList.add("ql-table-dropdown-icon")),s&&(l.innerText=s),n.classList.add("ql-table-dropdown-properties"),l.classList.add("ql-table-dropdown-text"),n.appendChild(l),r==="dropdown"&&n.appendChild(a),{dropdown:n,dropText:l}}createInput(s){const{attribute:r,message:n,propertyName:l,value:a,valid:h}=s,{placeholder:p=""}=r,b=document.createElement("div"),A=document.createElement("div"),S=document.createElement("label"),T=document.createElement("input"),w=document.createElement("div");return b.classList.add("label-field-view"),A.classList.add("label-field-view-input-wrapper"),S.innerText=p,pt(T,r),T.classList.add("property-input"),T.value=a,T.addEventListener("input",G=>{const it=G.target.value;h&&this.switchHidden(w,h(it)),this.updateInputStatus(A,h&&!h(it)),this.setAttribute(l,it,b)}),w.classList.add("label-field-view-status","ql-hidden"),n&&(w.innerText=n),A.appendChild(T),A.appendChild(S),b.appendChild(A),h&&b.appendChild(w),b}createList(s,r){const{options:n,propertyName:l}=s;if(!n.length)return null;const a=document.createElement("ul");for(const h of n){const p=document.createElement("li");p.innerText=h,a.appendChild(p)}return a.classList.add("ql-table-dropdown-list","ql-hidden"),a.addEventListener("click",h=>{const p=h.target.innerText;r.innerText=p,this.toggleBorderDisabled(p),this.setAttribute(l,p)}),a}createPalette(s,r,n){const l=document.createElement("div"),a=document.createElement("div"),h=document.createElement("div"),p=document.createElement("div"),b=new Lo.ColorPicker(p,{width:110,layout:[{component:Lo.ui.Wheel,options:{}}]}),A=this.createColorPickerIcon('<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 44C29.9601 44 26.3359 35.136 30 31C33.1264 27.4709 44 29.0856 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/><path d="M28 17C29.6569 17 31 15.6569 31 14C31 12.3431 29.6569 11 28 11C26.3431 11 25 12.3431 25 14C25 15.6569 26.3431 17 28 17Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/><path d="M16 21C17.6569 21 19 19.6569 19 18C19 16.3431 17.6569 15 16 15C14.3431 15 13 16.3431 13 18C13 19.6569 14.3431 21 16 21Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/><path d="M17 34C18.6569 34 20 32.6569 20 31C20 29.3431 18.6569 28 17 28C15.3431 28 14 29.3431 14 31C14 32.6569 15.3431 34 17 34Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/></svg>',r("colorPicker"),()=>this.toggleHidden(a)),S=this.createActionBtns(T=>{const w=T.target.closest("button");w&&(w.getAttribute("label")==="save"&&(this.setAttribute(s,b.color.hexString,n),this.updateInputStatus(l,!1,!0)),a.classList.add("ql-hidden"),n.classList.add("ql-hidden"))},!1);return a.classList.add("color-picker-palette","ql-hidden"),h.classList.add("color-picker-wrap"),p.classList.add("iro-container"),h.appendChild(p),h.appendChild(S),a.appendChild(h),l.appendChild(A),l.appendChild(a),l}createProperty(s){const{content:r,children:n}=s,l=this.getUseLanguage(),a=document.createElement("div"),h=document.createElement("label");h.innerText=r,h.classList.add("ql-table-dropdown-label"),a.classList.add("properties-form-row"),n.length===1&&a.classList.add("properties-form-row-full"),a.appendChild(h);for(const p of n){const b=this.createPropertyChild(p);b&&a.appendChild(b),b&&r===l("border")&&this.borderForm.push(b)}return a}createPropertyChild(s){const{category:r,value:n}=s;switch(r){case"dropdown":const{dropdown:l,dropText:a}=this.createDropdown(n,r),h=this.createList(s,a);return l.appendChild(h),l.addEventListener("click",()=>{this.toggleHidden(h),this.updateSelectedStatus(l,a.innerText,"dropdown")}),l;case"color":return this.createColorContainer(s);case"menus":return this.createCheckBtns(s);case"input":return this.createInput(s)}}createPropertiesForm(s){const r=this.getUseLanguage(),{title:n,properties:l}=function({type:b,attribute:A},S){return b==="table"?function(T,w){return{title:w("tblProps"),properties:[{content:w("border"),children:[{category:"dropdown",propertyName:"border-style",value:T["border-style"],options:["dashed","dotted","double","groove","inset","none","outset","ridge","solid"]},{category:"color",propertyName:"border-color",value:T["border-color"],attribute:{type:"text",placeholder:w("color")},valid:ft,message:w("colorMsg")},{category:"input",propertyName:"border-width",value:C(T["border-width"]),attribute:{type:"text",placeholder:w("width")},valid:Ot,message:w("dimsMsg")}]},{content:w("background"),children:[{category:"color",propertyName:"background-color",value:T["background-color"],attribute:{type:"text",placeholder:w("color")},valid:ft,message:w("colorMsg")}]},{content:w("dimsAlm"),children:[{category:"input",propertyName:"width",value:C(T.width),attribute:{type:"text",placeholder:w("width")},valid:Ot,message:w("dimsMsg")},{category:"input",propertyName:"height",value:C(T.height),attribute:{type:"text",placeholder:w("height")},valid:Ot,message:w("dimsMsg")},{category:"menus",propertyName:"align",value:T.align,menus:[{icon:N,describe:w("alTblL"),align:"left"},{icon:M,describe:w("tblC"),align:"center"},{icon:R,describe:w("alTblR"),align:"right"}]}]}]}}(A,S):function(T,w){return{title:w("cellProps"),properties:[{content:w("border"),children:[{category:"dropdown",propertyName:"border-style",value:T["border-style"],options:["dashed","dotted","double","groove","inset","none","outset","ridge","solid"]},{category:"color",propertyName:"border-color",value:T["border-color"],attribute:{type:"text",placeholder:w("color")},valid:ft,message:w("colorMsg")},{category:"input",propertyName:"border-width",value:C(T["border-width"]),attribute:{type:"text",placeholder:w("width")},valid:Ot,message:w("dimsMsg")}]},{content:w("background"),children:[{category:"color",propertyName:"background-color",value:T["background-color"],attribute:{type:"text",placeholder:w("color")},valid:ft,message:w("colorMsg")}]},{content:w("dims"),children:[{category:"input",propertyName:"width",value:C(T.width),attribute:{type:"text",placeholder:w("width")},valid:Ot,message:w("dimsMsg")},{category:"input",propertyName:"height",value:C(T.height),attribute:{type:"text",placeholder:w("height")},valid:Ot,message:w("dimsMsg")},{category:"input",propertyName:"padding",value:C(T.padding),attribute:{type:"text",placeholder:w("padding")},valid:Ot,message:w("dimsMsg")}]},{content:w("tblCellTxtAlm"),children:[{category:"menus",propertyName:"text-align",value:T["text-align"],menus:[{icon:N,describe:w("alCellTxtL"),align:"left"},{icon:M,describe:w("alCellTxtC"),align:"center"},{icon:R,describe:w("alCellTxtR"),align:"right"},{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M42 19H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 9H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 29H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 39H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',describe:w("jusfCellTxt"),align:"justify"}]},{category:"menus",propertyName:"vertical-align",value:T["vertical-align"],menus:[{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 36.3056H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 42H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 12L24 6L18 12V12" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M24 6V29" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',describe:w("alCellTxtT"),align:"top"},{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 36L24 30L30 36" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M23.9999 30.9998V43.9998" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 12L24 18L30 12" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M23.9999 17.0002V4.00022" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 24.0004H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',describe:w("alCellTxtM"),align:"middle"},{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 36.3056H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 42H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 23L24 29L18 23V23" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M24 6V29" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',describe:w("alCellTxtB"),align:"bottom"}]}]}]}}(A,S)}(s,r),a=document.createElement("div");a.classList.add("ql-table-properties-form");const h=document.createElement("h2"),p=this.createActionBtns(b=>{const A=b.target.closest("button");A&&this.checkBtnsAction(A.getAttribute("label"))},!0);h.innerText=n,h.classList.add("properties-form-header"),a.appendChild(h);for(const b of l){const A=this.createProperty(b);a.appendChild(A)}return a.appendChild(p),this.setBorderDisabled(),this.tableMenus.quill.container.appendChild(a),this.updatePropertiesForm(a,s.type),this.setSaveButton(p),a.addEventListener("click",b=>{const A=b.target;this.hiddenSelectList(A)}),a}getCellStyle(s,r){const n=(s.getAttribute("style")||"").split(";").filter(l=>l.trim()).reduce((l,a)=>{const h=a.split(":");return Object.assign(Object.assign({},l),{[h[0].trim()]:h[1].trim()})},{});return Object.assign(n,r),Object.keys(n).reduce((l,a)=>l+`${a}: ${n[a]}; `,"")}getColorClosest(s){return X(s,".ql-table-color-container")}getComputeBounds(s){if(s==="table"){const{table:r}=this.tableMenus,[n,l]=this.tableMenus.getCorrectBounds(r);return n.bottom>l.bottom?Object.assign(Object.assign({},n),{bottom:l.height}):n}{const{computeBounds:r}=this.tableMenus.getSelectedTdsInfo();return r}}getDiffProperties(){const s=this.attrs,r=this.options.attribute;return Object.keys(s).reduce((n,l)=>(s[l]!==r[l]&&(n[l]=function(a){return!(!a.endsWith("width")&&!a.endsWith("height"))}(l)?function(a){if(!a)return a;const h=a.slice(-2);return h!=="px"&&h!=="em"?a+"px":a}(s[l]):s[l]),n),{})}getUseLanguage(){const{language:s}=this.tableMenus.tableBetter;return s.useLanguage.bind(s)}getViewportSize(){return{viewWidth:document.documentElement.clientWidth,viewHeight:document.documentElement.clientHeight}}hiddenSelectList(s){var r,n;const l=".ql-table-dropdown-properties",a=".color-picker",h=this.form.querySelectorAll(".ql-table-dropdown-list"),p=this.form.querySelectorAll(".color-picker-select");for(const b of[...h,...p])!((r=b.closest(l))===null||r===void 0)&&r.isEqualNode(s.closest(l))||!((n=b.closest(a))===null||n===void 0)&&n.isEqualNode(s.closest(a))||b.classList.add("ql-hidden")}removePropertiesForm(){this.form.remove(),this.borderForm=[]}saveAction(s){s==="table"?this.saveTableAction():this.saveCellAction()}saveCellAction(){const{selectedTds:s}=this.tableMenus.tableBetter.cellSelection,{quill:r,table:n}=this.tableMenus,l=g().find(n).colgroup(),a=this.getDiffProperties(),h=parseFloat(a.width),p=a["text-align"];p&&delete a["text-align"];const b=[];if(l&&h){delete a.width;const{computeBounds:A}=this.tableMenus.getSelectedTdsInfo(),S=ot(A,n,r.container);for(const T of S)T.setAttribute("width",`${h}`)}for(const A of s){const S=g().find(A),T=S.statics.blotName,w=S.formats()[T],G=this.getCellStyle(A,a);if(p){const ct=p==="left"?"":p;S.children.forEach(bt=>{bt.statics.blotName===K.blotName?bt.children.forEach(St=>{St.format&&St.format("align",ct)}):bt.format("align",ct)})}const it=S.replaceWith(T,Object.assign(Object.assign({},w),{style:G}));b.push(it.domNode)}this.tableMenus.tableBetter.cellSelection.setSelectedTds(b)}saveTableAction(){var s;const{table:r,tableBetter:n}=this.tableMenus,l=(s=g().find(r).temporary())===null||s===void 0?void 0:s.domNode,a=r.querySelector("td"),h=this.getDiffProperties(),p=h.align;switch(delete h.align,p){case"center":Object.assign(h,{margin:"0 auto"});break;case"left":Object.assign(h,{margin:""});break;case"right":Object.assign(h,{"margin-left":"auto","margin-right":""})}at(l||r,h),n.cellSelection.setSelected(a)}setAttribute(s,r,n){this.attrs[s]=r,s.includes("-color")&&this.updateSelectColor(this.getColorClosest(n),r)}setBorderDisabled(){const[s]=this.borderForm,r=s.querySelector(".ql-table-dropdown-text").innerText;this.toggleBorderDisabled(r)}setSaveButton(s){const r=s.querySelector('button[label="save"]');this.saveButton=r}setSaveButtonDisabled(s){this.saveButton&&(s?this.saveButton.setAttribute("disabled","true"):this.saveButton.removeAttribute("disabled"))}switchButton(s,r){const n=s.querySelectorAll("span.ql-table-tooltip-hover");for(const l of n)l.classList.remove("ql-table-btns-checked");r.classList.add("ql-table-btns-checked")}switchHidden(s,r){r?s.classList.add("ql-hidden"):s.classList.remove("ql-hidden")}toggleBorderDisabled(s){const[,r,n]=this.borderForm;s!=="none"&&s?(r.classList.remove("ql-table-disabled"),n.classList.remove("ql-table-disabled")):(this.attrs["border-color"]="",this.attrs["border-width"]="",this.updateSelectColor(r,""),this.updateInputValue(n,""),r.classList.add("ql-table-disabled"),n.classList.add("ql-table-disabled"))}toggleHidden(s){s.classList.toggle("ql-hidden")}updateInputValue(s,r){s.querySelector(".property-input").value=r}updateInputStatus(s,r,n){const l=(n?this.getColorClosest(s):X(s,".label-field-view")).querySelector(".label-field-view-input-wrapper");r?(l.classList.add("label-field-view-error"),this.setSaveButtonDisabled(!0)):(l.classList.remove("label-field-view-error"),this.form.querySelectorAll(".label-field-view-error").length||this.setSaveButtonDisabled(!1))}updatePropertiesForm(s,r){s.classList.remove("ql-table-triangle-none");const{height:n,width:l}=s.getBoundingClientRect(),a=this.tableMenus.quill.container.getBoundingClientRect(),{top:h,left:p,right:b,bottom:A}=this.getComputeBounds(r),{viewHeight:S}=this.getViewportSize();let T=A+10,w=p+b-l>>1;T+a.top+n>S?(T=h-n-10,T<0?(T=a.height-n>>1,s.classList.add("ql-table-triangle-none")):(s.classList.add("ql-table-triangle-up"),s.classList.remove("ql-table-triangle-down"))):(s.classList.add("ql-table-triangle-down"),s.classList.remove("ql-table-triangle-up")),w<a.left?(w=0,s.classList.add("ql-table-triangle-none")):w+l>a.right&&(w=a.right-l,s.classList.add("ql-table-triangle-none")),at(s,{left:`${w}px`,top:`${T}px`})}updateSelectColor(s,r){const n=s.querySelector(".property-input"),l=s.querySelector(".color-button"),a=s.querySelector(".color-picker-select"),h=s.querySelector(".label-field-view-status");r?l.classList.remove("color-unselected"):l.classList.add("color-unselected"),n.value=r,at(l,{"background-color":r}),a.classList.add("ql-hidden"),this.switchHidden(h,ft(r))}updateSelectedStatus(s,r,n){const l=n==="color"?".color-list":".ql-table-dropdown-list",a=s.querySelector(l);if(!a)return;const h=Array.from(a.querySelectorAll("li"));for(const b of h)b.classList.remove(`ql-table-${n}-selected`);const p=h.find(b=>(n==="color"?b.getAttribute("data-color"):b.innerText)===r);p&&p.classList.add(`ql-table-${n}-selected`)}};(function(s){s.left="margin-left",s.right="margin-right"})(Gn||(Gn={}));var hc=class{constructor(s,r){this.quill=s,this.table=null,this.prevList=null,this.prevTooltip=null,this.scroll=!1,this.tableBetter=r,this.tablePropertiesForm=null,this.quill.root.addEventListener("click",this.handleClick.bind(this)),this.root=this.createMenus()}copyTable(){return function(s,r,n,l){return new(n||(n=Promise))(function(a,h){function p(S){try{A(l.next(S))}catch(T){h(T)}}function b(S){try{A(l.throw(S))}catch(T){h(T)}}function A(S){var T;S.done?a(S.value):(T=S.value,T instanceof n?T:new n(function(w){w(T)})).then(p,b)}A((l=l.apply(s,[])).next())})}(this,void 0,void 0,function*(){if(!this.table)return;const s=g().find(this.table);if(!s)return;const r="<p><br></p>"+s.getCopyTable(),n=this.tableBetter.cellSelection.getText(r),l=new ClipboardItem({"text/html":new Blob([r],{type:"text/html"}),"text/plain":new Blob([n],{type:"text/plain"})});try{yield navigator.clipboard.write([l]);const a=this.quill.getIndex(s),h=s.length();this.quill.setSelection(a+h,g().sources.SILENT),this.tableBetter.hideTools(),this.quill.scrollSelectionIntoView()}catch(a){console.error("Failed to copy table:",a)}})}createList(s){if(!s)return null;const r=document.createElement("ul");for(const[,n]of Object.entries(s)){const{content:l,handler:a}=n,h=document.createElement("li");h.innerText=l,h.addEventListener("click",a.bind(this)),r.appendChild(h)}return r.classList.add("ql-table-dropdown-list","ql-hidden"),r}createMenu(s,r,n){const l=document.createElement("div"),a=document.createElement("span");return a.innerHTML=n?s+r:s,l.classList.add("ql-table-dropdown"),a.classList.add("ql-table-tooltip-hover"),l.appendChild(a),l}createMenus(){const{language:s,options:r={}}=this.tableBetter,{menus:n}=r,l=s.useLanguage.bind(s),a=document.createElement("div");a.classList.add("ql-table-menus-container","ql-hidden");for(const[,h]of Object.entries(function(p,b){const A={column:{content:p("col"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084271333" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2200" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M9.14372835 1039.20071111L1020.26808889 1039.20071111l0-1048.576L9.14372835-9.37528889 9.14372835 1039.20071111z m252.77672107-711.53454649l1e-8-262.144 175.00150897 0 0 262.144L261.92044942 327.66616462zM942.48705138 702.1592576l0 262.14400001-178.89289103-1e-8 1e-8-262.144 178.89289102 0z m-256.66810311 0l0 262.144-171.11595236 0 0-262.144 171.11595236 0z m-248.89698987 0l0 262.144L261.92044943 964.3032576l-1e-8-262.144 175.00150898 0z m505.56509298-299.59563948L942.48705139 627.26180409l-178.89289104 0 0-224.69818596 178.89289103-1e-8z m-256.66810311 1e-8L685.81894827 627.26180409l-171.11595236 0 0-224.69818596 171.11595236 0z m-248.89698987 0L436.9219584 627.26180409 261.92044943 627.26180409l0-224.69818596 175.00150897 0z m505.56509298-337.04145352l0 262.14400001-178.89289102 0-1e-8-262.144 178.89289103-1e-8z m-256.66810311 1e-8l0 262.144-171.11595236 0 0-262.144 171.11595236 0z" fill="#515151" p-id="2201"></path></svg>',handler(T,w){this.toggleAttribute(T,w)},children:{left:{content:p("insColL"),handler(){const{leftTd:T}=this.getSelectedTdsInfo(),w=this.table.getBoundingClientRect();this.insertColumn(T,0),Rt(this.table,w,72),this.updateMenus()}},right:{content:p("insColR"),handler(){const{rightTd:T}=this.getSelectedTdsInfo(),w=this.table.getBoundingClientRect();this.insertColumn(T,1),Rt(this.table,w,72),this.updateMenus()}},delete:{content:p("delCol"),handler(){this.deleteColumn()}}}},row:{content:p("row"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084279720" class="icon" viewBox="0 0 1181 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2344" xmlns:xlink="http://www.w3.org/1999/xlink" width="18.453125" height="16"><path d="M1142.15367111 0H39.38417778C7.99630222 0 0 8.27050667 0 39.38531555v945.2293689C0 1015.72949333 7.99516445 1024 39.38531555 1024h1102.76835556c31.39128889 0 39.38417778-8.27050667 39.38417778-39.38531555V39.38531555c0-31.11480889-7.99516445-39.38531555-39.38417778-39.38531555zM354.46328889 945.23050667l-276.992 3.26997333V749.568l276.992-1.25952v196.92202667z m0-275.69265778H78.76835555V472.61468445h275.69265778v196.92316444z m0-275.69152H78.76835555V236.30848h275.69265778v157.53671111z m393.84632889 551.38417778H433.23050667V748.30848h315.07683555v196.92202667z m0-275.69265778H433.23050667V472.61468445h315.07683555v196.92316444z m0-275.69152H433.23050667V236.30848h315.07683555v157.53671111z m354.46101333 551.38417778H827.07683555V748.30848h275.69265778v196.92202667z m0-275.69265778H827.07683555V472.61468445h275.69265778v196.92316444z m0-275.69152H827.07683555V236.30848h275.69265778v157.53671111z" fill="#515151" p-id="2345"></path></svg>',handler(T,w){this.toggleAttribute(T,w)},children:{above:{content:p("insRowAbv"),handler(){const{leftTd:T}=this.getSelectedTdsInfo();this.insertRow(T,0),this.updateMenus()}},below:{content:p("insRowBlw"),handler(){const{rightTd:T}=this.getSelectedTdsInfo();this.insertRow(T,1),this.updateMenus()}},delete:{content:p("delRow"),handler(){this.deleteRow()}}}},merge:{content:p("mCells"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084199654" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1975" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M776.08580741 364.42263703c-15.53445925-7.76722963-31.06891852-7.76722963-46.60337778 0L589.6722963 512l139.81013333 147.57736297c15.53445925 7.76722963 31.06891852 7.76722963 46.60337778 0 15.53445925-15.53445925 15.53445925-31.06891852 0-46.60337779L706.18074075 543.06891852h163.11182222c15.53445925 0 31.06891852-15.53445925 31.06891851-31.06891852s-15.53445925-31.06891852-31.06891851-31.06891852H706.18074075l69.90506666-69.90506666c7.76722963-15.53445925 7.76722963-31.06891852 0-46.60337779z m-528.17161482 0c-15.53445925 15.53445925-15.53445925 31.06891852 0 46.60337779l69.90506666 69.90506666H154.70743703c-15.53445925 0-31.06891852 15.53445925-31.06891851 31.06891852s15.53445925 31.06891852 31.06891851 31.06891852H317.81925925l-69.90506666 69.90506666c-15.53445925 15.53445925-15.53445925 31.06891852 0 46.60337779 15.53445925 7.76722963 31.06891852 7.76722963 46.60337778 0L434.3277037 512 294.51757037 364.42263703c-15.53445925-7.76722963-31.06891852-7.76722963-46.60337778 0z" fill="#515151" p-id="1976"></path><path d="M317.81925925 939.19762963H84.80237037V84.80237037h233.01688888v116.50844445h77.6722963V7.13007408H7.13007408v1009.73985184h388.36148147V822.68918518h-77.6722963zM628.50844445 7.13007408v194.18074074h77.6722963v-116.50844445h233.01688888v854.39525926H706.18074075v-116.50844445h-77.6722963v194.18074074h388.36148147V7.13007408z" fill="#515151" p-id="1977"></path></svg>',handler(T,w){this.toggleAttribute(T,w)},children:{merge:{content:p("mCells"),handler(){this.mergeCells(),this.updateMenus()}},split:{content:p("sCell"),handler(){this.splitCell(),this.updateMenus()}}}},table:{content:p("tblProps"),icon:W,handler(T,w){const G=Object.assign(Object.assign({},rt(this.table,D)),{align:this.getTableAlignment(this.table)});this.toggleAttribute(T,w),this.tablePropertiesForm=new So(this,{attribute:G,type:"table"}),this.hideMenus()}},cell:{content:p("cellProps"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084286647" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2488" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M1058.13333333 0v1024H-34.13333333V0h1092.26666666zM460.8 563.2H68.26666667V921.6h392.53333333V563.2z m494.93333333 0H563.2V921.6h392.53333333V563.2zM460.8 102.4H68.26666667v358.4h392.53333333V102.4z" fill="#515151" p-id="2489"></path></svg>',handler(T,w){const{selectedTds:G}=this.tableBetter.cellSelection,it=G.length>1?this.getSelectedTdsAttrs(G):this.getSelectedTdAttrs(G[0]);this.toggleAttribute(T,w),this.tablePropertiesForm=new So(this,{attribute:it,type:"cell"}),this.hideMenus()}},wrap:{content:p("insParaOTbl"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084879007" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="968" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M512 332.57913685H49.39294151c-20.56031346 0-41.12062691-17.13359531-41.12062805-41.12062692V44.73474502c0-20.56031346 17.13359531-41.12062691 41.12062805-41.12062691H512c20.56031346 0 41.12062691 17.13359531 41.12062691 41.12062691v246.72376491c0 23.98703275-17.13359531 41.12062691-41.12062691 41.12062692zM90.51356843 250.33788188h380.36580466V85.85537308H90.51356843v164.4825088z m884.09349006 757.30488889h-925.21411698c-20.56031346 0-41.12062691-17.13359531-41.12062805-41.12062692v-246.72376491c0-20.56031346 17.13359531-41.12062691 41.12062805-41.12062691h921.78739883c20.56031346 0 41.12062691 17.13359531 41.12062691 41.12062691v246.72376491c0 23.98703275-17.13359531 41.12062691-37.69390876 41.12062692zM90.51356843 928.82823509h842.97286314v-164.48250994H90.51356843v164.48250994z" fill="#515151" p-id="969"></path><path d="M974.60705849 1017.92292864h-925.21411698c-27.41375203 0-47.97406549-20.56031346-47.97406549-47.97406549v-246.72376491c0-27.41375203 20.56031346-47.97406549 47.97406549-47.97406549h921.78739883c27.41375203 0 47.97406549 20.56031346 47.97406435 47.97406549v246.72376491c3.42671929 23.98703275-20.56031346 47.97406549-44.5473462 47.97406549z m-925.21411698-325.53830173c-17.13359531 0-30.84047019 13.70687602-30.84047132 30.84047133v246.72376491c0 17.13359531 13.70687602 30.84047019 30.84047132 30.84047018h921.78739883c17.13359531 0 30.84047019-13.70687602 30.84047019-30.84047018v-246.72376491c0-17.13359531-13.70687602-30.84047019-30.84047019-30.84047133H49.39294151z m890.9469275 243.29704675h-856.67973802v-181.61610523h860.10645731v181.61610523h-3.42671929zM100.79372515 921.97479765h825.83926784V774.62588188H100.79372515v147.34891577z m411.20627485-582.54222223H49.39294151c-27.41375203 0-47.97406549-20.56031346-47.97406549-47.97406549V44.73474502c0-27.41375203 20.56031346-47.97406549 47.97406549-47.97406549H512c27.41375203 0 47.97406549 20.56031346 47.97406549 47.97406549v246.72376491c0 27.41375203-20.56031346 47.97406549-47.97406549 47.97406549zM49.39294151 13.89427484c-17.13359531 0-30.84047019 13.70687602-30.84047132 30.84047018v246.72376491c0 17.13359531 13.70687602 30.84047019 30.84047132 30.84047019H512c17.13359531 0 30.84047019-13.70687602 30.84047019-30.84047019V44.73474502c0-17.13359531-13.70687602-30.84047019-30.84047019-30.84047018H49.39294151zM481.15952981 260.61803974H83.66013099V79.00193451h397.49939882V260.61803974zM100.79372515 243.48444444h363.23220936V96.13552981H100.79372515v147.34891463z" fill="#515151" p-id="970"></path><path d="M974.60705849 130.40271929H628.50844445c-6.85343744 0-10.28015673 3.42671929-10.28015674 10.28015672v58.25422223c0 6.85343744 3.42671929 10.28015673 10.28015674 10.28015673h304.97798712V466.2211766H546.26718947l27.41375204-20.56031345c3.42671929-3.42671929 6.85343744-10.28015673 6.85343744-17.13359531v-58.25422223c0-6.85343744-3.42671929-10.28015673-10.28015673-10.28015672-3.42671929 0-3.42671929 0-6.85343744 3.42671928L409.19843157 486.78149006c-10.28015673 6.85343744-10.28015673 20.56031346-3.42671928 27.41375203l3.42671928 3.42671816 157.62907136 130.21532045c3.42671929 3.42671929 10.28015673 3.42671929 13.70687602 0 0-3.42671929 3.42671929-3.42671929 3.42671929-6.85343744v-61.6809415c0-6.85343744-3.42671929-10.28015673-6.85343858-13.70687602l-20.56031345-17.13359417h421.48643157c20.56031346 0 41.12062691-17.13359531 41.12062691-41.12062805V168.09662691c-6.85343744-20.56031346-23.98703275-37.69390877-44.5473462-37.69390762z" fill="#515151" p-id="971"></path><path d="M573.68094151 661.54415673c-3.42671929 0-6.85343744 0-10.28015673-3.42671929l-157.62907249-130.21531933-3.4267193-3.42671928c-3.42671929-6.85343744-6.85343744-13.70687602-6.85343744-20.56031346 0-6.85343744 3.42671929-13.70687602 10.28015674-20.5603146l157.62907249-126.78860117c3.42671929-3.42671929 6.85343744-3.42671929 10.28015673-3.42671815 10.28015673 0 17.13359531 6.85343744 17.13359417 17.13359416v58.25422223c0 10.28015673-3.42671929 17.13359531-10.28015673 23.98703275l-10.28015673 6.85343744H923.20627485v-239.87032634h-294.6978304c-10.28015673 0-17.13359531-6.85343744-17.13359531-17.13359416V140.68287601c0-10.28015673 6.85343744-17.13359531 17.13359531-17.13359531h346.09861404c27.41375203 0 47.97406549 20.56031346 47.97406549 47.9740655v335.81845732c0 27.41375203-20.56031346 47.97406549-47.97406549 47.97406549H577.10765966l3.42671929 3.42671929c6.85343744 6.85343744 10.28015673 13.70687602 10.28015673 20.56031346v61.6809415c0 3.42671929 0 6.85343744-3.42671815 10.28015674-3.42671929 6.85343744-10.28015673 10.28015673-13.70687602 10.28015673z m0-291.27111112l-157.6290725 126.78860117c-3.42671929 3.42671929-3.42671929 3.42671929-3.42671815 6.85343859s0 6.85343744 3.42671815 10.28015672l157.6290725 130.21532047h3.42671815v-61.68094151c0-3.42671929 0-6.85343744-3.42671815-10.28015673l-41.12062805-34.26718948h442.04674503c17.13359531 0 30.84047019-13.70687602 30.84047132-30.84047132V168.09662691c0-17.13359531-13.70687602-30.84047019-30.84047132-30.84047018H628.50844445v61.68094151h311.83142456v274.1375158H522.28015673l47.97406549-37.69390763c3.42671929-3.42671929 3.42671929-6.85343744 3.42671929-10.28015787v-54.82750293z" fill="#515151" p-id="972"></path></svg>',handler(T,w){this.toggleAttribute(T,w)},children:{before:{content:p("insB4"),handler(){this.insertParagraph(-1)}},after:{content:p("insAft"),handler(){this.insertParagraph(1)}}}},delete:{content:p("delTable"),icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 10V44H39V10H9Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/><path d="M20 20V33" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M28 20V33" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 10H44" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 10L19.289 4H28.7771L32 10H16Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/></svg>',handler(){this.deleteTable()}}},S={copy:{content:p("copyTable"),icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 12.4316V7.8125C13 6.2592 14.2592 5 15.8125 5H40.1875C41.7408 5 43 6.2592 43 7.8125V32.1875C43 33.7408 41.7408 35 40.1875 35H35.5163" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M32.1875 13H7.8125C6.2592 13 5 14.2592 5 15.8125V40.1875C5 41.7408 6.2592 43 7.8125 43H32.1875C33.7408 43 35 41.7408 35 40.1875V15.8125C35 14.2592 33.7408 13 32.1875 13Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/></svg>',handler(){this.copyTable()}}};return b!=null&&b.length?Object.values(b).reduce((T,w)=>(T[w]=Object.assign({},A,S)[w],T),{}):A}(l,n))){const{content:p,icon:b,children:A,handler:S}=h,T=this.createList(A),w=E(p),G=this.createMenu(b,ht,!!A);G.appendChild(w),T&&G.appendChild(T),a.appendChild(G),G.addEventListener("click",S.bind(this,T,w))}return this.quill.container.appendChild(a),a}deleteColumn(s=!1){const{computeBounds:r,leftTd:n,rightTd:l}=this.getSelectedTdsInfo(),a=this.table.getBoundingClientRect(),h=st(r,this.table,this.quill.container,"column"),p=ot(r,this.table,this.quill.container),b=g().find(n).table(),{changeTds:A,delTds:S}=this.getCorrectTds(h,r,n,l);s&&S.length!==this.tableBetter.cellSelection.selectedTds.length||(this.tableBetter.cellSelection.updateSelected("column"),b.deleteColumn(A,S,this.deleteTable.bind(this),p),Rt(this.table,a,r.left-r.right),this.updateMenus())}deleteRow(s=!1){const r=this.tableBetter.cellSelection.selectedTds,n={};for(const a of r){let h=~~a.getAttribute("rowspan")||1,p=g().find(a.parentElement);if(h>1)for(;p&&h;){const b=p.children.head.domNode.getAttribute("data-row");n[b]||(n[b]=p),p=p.next,h--}else{const b=a.getAttribute("data-row");n[b]||(n[b]=p)}}const l=Object.values(n);s&&l.reduce((a,h)=>a+h.children.length,0)!==r.length||(this.tableBetter.cellSelection.updateSelected("row"),g().find(r[0]).table().deleteRow(l,this.deleteTable.bind(this)),this.updateMenus())}deleteTable(){const s=g().find(this.table);if(!s)return;const r=s.offset(this.quill.scroll);s.remove(),this.tableBetter.hideTools(),this.quill.setSelection(r-1,0,g().sources.USER)}destroyTablePropertiesForm(){this.tablePropertiesForm&&(this.tablePropertiesForm.removePropertiesForm(),this.tablePropertiesForm=null)}getCellsOffset(s,r,n,l){const a=g().find(this.table).descendants(vt),h=Math.max(r.left,s.left),p=Math.min(r.right,s.right),b=new Map,A=new Map,S=new Map;for(const T of a){const{left:w,right:G}=Q(T.domNode,this.quill.container);w+2>=h&&G<=p+2?this.setCellsMap(T,b):w+2>=s.left&&G<=r.left+2?this.setCellsMap(T,A):w+2>=r.right&&G<=s.right+2&&this.setCellsMap(T,S)}return this.getDiffOffset(b)||this.getDiffOffset(A,n)+this.getDiffOffset(S,l)}getColsOffset(s,r,n){let l=s.children.head;const a=Math.max(n.left,r.left),h=Math.min(n.right,r.right);let p=null,b=null,A=0;for(;l;){const{width:S}=l.domNode.getBoundingClientRect();if(p||b?(p=b,b+=S):(p=Q(l.domNode,this.quill.container).left,b=p+S),p>h)break;p>=a&&b<=h&&A--,l=l.next}return A}getCorrectBounds(s){const r=this.quill.container.getBoundingClientRect(),n=Q(s,this.quill.container);return n.width>=r.width?[Object.assign(Object.assign({},n),{left:0,right:r.width}),r]:[n,r]}getCorrectTds(s,r,n,l){const a=[],h=[],p=g().find(n).table().colgroup(),b=~~n.getAttribute("colspan")||1,A=~~l.getAttribute("colspan")||1;if(p)for(const S of s){const T=Q(S,this.quill.container);if(T.left+2>=r.left&&T.right<=r.right+2)h.push(S);else{const w=this.getColsOffset(p,r,T);a.push([S,w])}}else for(const S of s){const T=Q(S,this.quill.container);if(T.left+2>=r.left&&T.right<=r.right+2)h.push(S);else{const w=this.getCellsOffset(r,T,b,A);a.push([S,w])}}return{changeTds:a,delTds:h}}getDiffOffset(s,r){let n=0;const l=this.getTdsFromMap(s);if(l.length)if(r){for(const a of l)n+=~~a.getAttribute("colspan")||1;n-=r}else for(const a of l)n-=~~a.getAttribute("colspan")||1;return n}getRefInfo(s,r){let n=null;if(!s)return{id:Ee(),ref:n};let l=s.children.head;const a=l.domNode.getAttribute("data-row");for(;l;){const{left:h}=l.domNode.getBoundingClientRect();if(Math.abs(h-r)<=2)return{id:a,ref:l};Math.abs(h-r)>=2&&!n&&(n=l),l=l.next}return{id:a,ref:n}}getSelectedTdAttrs(s){const r=function(n){const l="left";let a=null;const h=n.descendants(xt),p=n.descendants(lt),b=n.descendants(zt);function A(T){for(const w of T.domNode.classList)if(/ql-align-/.test(w))return w.split("ql-align-")[1];return l}for(const T of[...h,...p,...b]){const w=A(T);if((S=a)!=null&&S!==w)return l;a=w}var S;return a??l}(g().find(s));return r?Object.assign(Object.assign({},rt(s,B)),{"text-align":r}):rt(s,B)}getSelectedTdsAttrs(s){const r=new Map;let n=null;for(const l of s){const a=this.getSelectedTdAttrs(l);if(n)for(const h of Object.keys(n))r.has(h)||a[h]!==n[h]&&r.set(h,!1);else n=a}for(const l of Object.keys(n))r.has(l)&&(n[l]=k[l]);return n}getSelectedTdsInfo(){const{startTd:s,endTd:r}=this.tableBetter.cellSelection,n=Q(s,this.quill.container),l=Q(r,this.quill.container),a=J(n,l);return n.left<=l.left&&n.top<=l.top?{computeBounds:a,leftTd:s,rightTd:r}:{computeBounds:a,leftTd:r,rightTd:s}}getTableAlignment(s){const r=s.getAttribute("align");if(!r){const{[Gn.left]:n,[Gn.right]:l}=rt(s,[Gn.left,Gn.right]);return n==="auto"?l==="auto"?"center":"right":"left"}return r||"center"}getTdsFromMap(s){return Object.values(Object.fromEntries(s)).reduce((r,n)=>r.length>n.length?r:n,[])}handleClick(s){const r=s.target.closest("table");if(this.prevList&&this.prevList.classList.add("ql-hidden"),this.prevTooltip&&this.prevTooltip.classList.remove("ql-table-tooltip-hidden"),this.prevList=null,this.prevTooltip=null,!r&&!this.tableBetter.cellSelection.selectedTds.length)return this.hideMenus(),void this.destroyTablePropertiesForm();this.tablePropertiesForm||(this.showMenus(),this.updateMenus(r),(r&&!r.isEqualNode(this.table)||this.scroll)&&this.updateScroll(!1),this.table=r)}hideMenus(){this.root.classList.add("ql-hidden")}insertColumn(s,r){const{left:n,right:l,width:a}=s.getBoundingClientRect(),h=g().find(s).table(),p=s.parentElement.lastChild.isEqualNode(s),b=r>0?l:n;h.insertColumn(b,p,a,r),this.quill.scrollSelectionIntoView()}insertParagraph(s){const r=g().find(this.table),n=this.quill.getIndex(r),l=s>0?r.length():0,a=new(L())().retain(n+l).insert(`
`);this.quill.updateContents(a,g().sources.USER),this.quill.setSelection(n+l,g().sources.SILENT),this.tableBetter.hideTools(),this.quill.scrollSelectionIntoView()}insertRow(s,r){const n=g().find(s),l=n.rowOffset(),a=n.table();if(r>0){const h=~~s.getAttribute("rowspan")||1;a.insertRow(l+r+h-1,r)}else a.insertRow(l+r,r);this.quill.scrollSelectionIntoView()}mergeCells(){var s,r;const{selectedTds:n}=this.tableBetter.cellSelection,{computeBounds:l,leftTd:a}=this.getSelectedTdsInfo(),h=g().find(a),[p,b]=j(h),A=h.children.head,S=h.table().tbody().children,T=h.row(),w=T.children.reduce((ct,bt)=>{const St=Q(bt.domNode,this.quill.container);return St.left>=l.left&&St.right<=l.right&&(ct+=~~bt.domNode.getAttribute("colspan")||1),ct},0),G=S.reduce((ct,bt)=>{const St=Q(bt.domNode,this.quill.container);if(St.top>=l.top&&St.bottom<=l.bottom){let Gt=Number.MAX_VALUE;bt.children.forEach(Zt=>{const oe=~~Zt.domNode.getAttribute("rowspan")||1;Gt=Math.min(Gt,oe)}),ct+=Gt}return ct},0);let it=0;for(const ct of n){if(a.isEqualNode(ct))continue;const bt=g().find(ct);bt.moveChildren(h),bt.remove(),!((r=(s=bt.parent)===null||s===void 0?void 0:s.children)===null||r===void 0)&&r.length||it++}it&&T.children.forEach(ct=>{if(ct.domNode.isEqualNode(a))return;const bt=ct.domNode.getAttribute("rowspan"),[St]=j(ct);ct.replaceWith(ct.statics.blotName,Object.assign(Object.assign({},St),{rowspan:bt-it}))}),h.setChildrenId(b),A.format(h.statics.blotName,Object.assign(Object.assign({},p),{colspan:w,rowspan:G-it})),this.tableBetter.cellSelection.setSelected(A.parent.domNode),this.quill.scrollSelectionIntoView()}setCellsMap(s,r){const n=s.domNode.getAttribute("data-row");r.has(n)?r.set(n,[...r.get(n),s.domNode]):r.set(n,[s.domNode])}showMenus(){this.root.classList.remove("ql-hidden")}splitCell(){const{selectedTds:s}=this.tableBetter.cellSelection,{leftTd:r}=this.getSelectedTdsInfo(),n=g().find(r).children.head;for(const l of s){const a=~~l.getAttribute("colspan")||1,h=~~l.getAttribute("rowspan")||1;if(a===1&&h===1)continue;const p=[],{width:b,right:A}=l.getBoundingClientRect(),S=g().find(l),T=S.table(),w=S.next,G=S.row();if(h>1)if(a>1){let ct=G.next;for(let bt=1;bt<h;bt++){const{ref:St,id:Gt}=this.getRefInfo(ct,A);for(let Zt=0;Zt<a;Zt++)p.push([ct,Gt,St]);ct&&(ct=ct.next)}}else{let ct=G.next;for(let bt=1;bt<h;bt++){const{ref:St,id:Gt}=this.getRefInfo(ct,A);p.push([ct,Gt,St]),ct&&(ct=ct.next)}}if(a>1){const ct=l.getAttribute("data-row");for(let bt=1;bt<a;bt++)p.push([G,ct,w])}for(const[ct,bt,St]of p)T.insertColumnCell(ct,bt,St);const[it]=j(S);S.replaceWith(S.statics.blotName,Object.assign(Object.assign({},it),{width:~~(b/a),colspan:null,rowspan:null}))}this.tableBetter.cellSelection.setSelected(n.parent.domNode),this.quill.scrollSelectionIntoView()}toggleAttribute(s,r){this.prevList&&!this.prevList.isEqualNode(s)&&(this.prevList.classList.add("ql-hidden"),this.prevTooltip.classList.remove("ql-table-tooltip-hidden")),s&&(s.classList.toggle("ql-hidden"),r.classList.toggle("ql-table-tooltip-hidden"),this.prevList=s,this.prevTooltip=r)}updateMenus(s=this.table){s&&requestAnimationFrame(()=>{this.root.classList.remove("ql-table-triangle-none");const[r,n]=this.getCorrectBounds(s),{left:l,right:a,top:h,bottom:p}=r,{height:b,width:A}=this.root.getBoundingClientRect(),S=this.quill.getModule("toolbar"),T=getComputedStyle(S.container);let w=h-b-10,G=l+a-A>>1;w>-parseInt(T.paddingBottom)?(this.root.classList.add("ql-table-triangle-up"),this.root.classList.remove("ql-table-triangle-down")):(w=p>n.height?n.height+10:p+10,this.root.classList.add("ql-table-triangle-down"),this.root.classList.remove("ql-table-triangle-up")),G<n.left?(G=0,this.root.classList.add("ql-table-triangle-none")):G+A>n.right&&(G=n.right-A,this.root.classList.add("ql-table-triangle-none")),at(this.root,{left:`${G}px`,top:`${w}px`})})}updateScroll(s){this.scroll=s}updateTable(s){this.table=s}};const dc=g().import("blots/inline");g().import("ui/icons")["table-better"]=W;class fc extends dc{}class pc{constructor(){this.computeChildren=[],this.root=this.createContainer()}clearSelected(r){for(const n of r)n.classList&&n.classList.remove("ql-cell-selected");this.computeChildren=[],this.root&&this.setLabelContent(this.root.lastElementChild,null)}createContainer(){const r=document.createElement("div"),n=document.createElement("div"),l=document.createElement("div"),a=document.createDocumentFragment();for(let h=1;h<=10;h++)for(let p=1;p<=10;p++){const b=document.createElement("span");b.setAttribute("row",`${h}`),b.setAttribute("column",`${p}`),a.appendChild(b)}return l.innerHTML="0 x 0",r.classList.add("ql-table-select-container","ql-hidden"),n.classList.add("ql-table-select-list"),l.classList.add("ql-table-select-label"),n.appendChild(a),r.appendChild(n),r.appendChild(l),r.addEventListener("mousemove",h=>this.handleMouseMove(h,r)),r}getComputeChildren(r,n){const l=[],{clientX:a,clientY:h}=n;for(const p of r){const{left:b,top:A}=p.getBoundingClientRect();a>=b&&h>=A&&l.push(p)}return l}getSelectAttrs(r){return[~~r.getAttribute("row"),~~r.getAttribute("column")]}handleClick(r,n){this.toggle(this.root);const l=r.target.closest("span[row]");if(l)this.insertTable(l,n);else{const a=this.computeChildren[this.computeChildren.length-1];a&&this.insertTable(a,n)}}handleMouseMove(r,n){const l=n.firstElementChild.children;this.clearSelected(this.computeChildren);const a=this.getComputeChildren(l,r);for(const h of a)h.classList&&h.classList.add("ql-cell-selected");this.computeChildren=a,this.setLabelContent(n.lastElementChild,a[a.length-1])}hide(r){this.clearSelected(this.computeChildren),r&&r.classList.add("ql-hidden")}insertTable(r,n){const[l,a]=this.getSelectAttrs(r);n(l,a),this.hide(this.root)}setLabelContent(r,n){if(n){const[l,a]=this.getSelectAttrs(n);r.innerHTML=`${l} x ${a}`}else r.innerHTML="0 x 0"}show(r){this.clearSelected(this.computeChildren),r&&r.classList.remove("ql-hidden")}toggle(r){this.clearSelected(this.computeChildren),r&&r.classList.toggle("ql-hidden")}}g().import("core/module");const gc=g().import("blots/container"),qo=g().import("modules/toolbar");class Oo extends qo{attach(r){let n=Array.from(r.classList).find(a=>a.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),r.tagName==="BUTTON"&&r.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null)return void console.warn("ignoring attaching to nonexistent format",n,r);const l=r.tagName==="SELECT"?"change":"click";r.addEventListener(l,a=>{var h;const{cellSelection:p}=this.getTableBetter();((h=p==null?void 0:p.selectedTds)===null||h===void 0?void 0:h.length)>1?this.cellSelectionAttach(r,n,a,p):this.toolbarAttach(r,n,a)}),this.controls.push([n,r])}cellSelectionAttach(r,n,l,a){if(r.tagName==="SELECT"){if(r.selectedIndex<0)return;const h=r.options[r.selectedIndex],p=typeof(h==null?void 0:h.value)!="string"||(h==null?void 0:h.value),b=a.getCorrectValue(n,p);a.setSelectedTdsFormat(n,b)}else{const h=(r==null?void 0:r.value)||!0,p=a.getCorrectValue(n,h);a.setSelectedTdsFormat(n,p),l.preventDefault()}}getTableBetter(){return this.quill.getModule("table-better")}setTableFormat(r,n,l,a,h){let p=null;const{cellSelection:b,tableMenus:A}=this.getTableBetter(),S=function(T,w,G){if(w.length===1){const it=function(ct,bt=0,St=Number.MAX_VALUE){const Gt=(Zt,oe,Be)=>{let nr=[],$r=Be;return Zt.children.forEachAt(oe,Be,(xr,Ir,Ur)=>{xr instanceof gc&&(nr.push(xr),nr=nr.concat(Gt(xr,Ir,$r))),$r-=Ur}),nr};return Gt(ct,bt,St)}(g().find(w[0]),T.index,T.length);return Ro(it)===Ro(G)}return w.length>1}(r,n,h);for(const T of h){const w=mc(n,a,T,S);p=T.format(a,l,w)}if(n.length<2){if(S||h.length===1){const T=ut(p);Promise.resolve().then(()=>{T&&this.quill.root.contains(T.domNode)?b.setSelected(T.domNode,!1):b.setSelected(n[0],!1)})}else b.setSelected(n[0],!1);this.quill.setSelection(r,g().sources.SILENT)}return A.updateMenus(),p}toolbarAttach(r,n,l){let a;if(r.tagName==="SELECT"){if(r.selectedIndex<0)return;const p=r.options[r.selectedIndex];a=!p.hasAttribute("selected")&&(p.value||!1)}else a=!r.classList.contains("ql-active")&&(r.value||!r.hasAttribute("value")),l.preventDefault();this.quill.focus();const[h]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,a);else if(this.quill.scroll.query(n).prototype instanceof Te){if(a=prompt(`Enter ${n}`),!a)return;this.quill.updateContents(new(L())().retain(h.index).delete(h.length).insert({[n]:a}),g().sources.USER)}else this.quill.format(n,a,g().sources.USER);this.update(h)}}function mc(s,r,n,l){return s.length===1&&r==="list"&&n.statics.blotName===zt.blotName||l}function Ro(s){return s.reduce((r,n)=>r+n.length(),0)}function Mo(s,r,n,l){const a=this.quill.getSelection();if(!l)if(a.length||r.length!==1)l=this.quill.getLines(a);else{const[h]=this.quill.getLine(a.index);l=[h]}return this.setTableFormat(a,r,s,n,l)}Oo.DEFAULTS=le()({},qo.DEFAULTS,{handlers:{header(s,r){const{cellSelection:n}=this.getTableBetter(),l=n==null?void 0:n.selectedTds;if(l!=null&&l.length)return Mo.call(this,s,l,"header",r);this.quill.format("header",s,g().sources.USER)},list(s,r){const{cellSelection:n}=this.getTableBetter(),l=n==null?void 0:n.selectedTds;if(l!=null&&l.length){if(l.length===1){const p=this.quill.getSelection(!0),b=this.quill.getFormat(p);s=n.getListCorrectValue("list",s,b)}return Mo.call(this,s,l,"list",r)}const a=this.quill.getSelection(!0),h=this.quill.getFormat(a);s==="check"?h.list==="checked"||h.list==="unchecked"?this.quill.format("list",!1,g().sources.USER):this.quill.format("list","unchecked",g().sources.USER):this.quill.format("list",s,g().sources.USER)},"table-better"(){}}});var bc=Oo;const ds=["error","warn","log","info"];let fs="warn";function Io(s){if(fs&&ds.indexOf(s)<=ds.indexOf(fs)){for(var r=arguments.length,n=new Array(r>1?r-1:0),l=1;l<r;l++)n[l-1]=arguments[l];console[s](...n)}}function ps(s){return ds.reduce((r,n)=>(r[n]=Io.bind(console,n,s),r),{})}ps.level=s=>{fs=s},Io.level=ps.level;var vc=ps;g().import("core/module");const yc=g().import("modules/clipboard"),wc=vc("quill:clipboard");var xc=class extends yc{onPaste(s,{text:r,html:n}){const l=this.quill.getFormat(s.index),a=this.getTableDelta({text:r,html:n},l);wc.log("onPaste",a,{text:r,html:n});const h=new(L())().retain(s.index).delete(s.length).concat(a);this.quill.updateContents(h,g().sources.USER),this.quill.setSelection(h.length()-s.length,g().sources.SILENT),this.quill.scrollSelectionIntoView()}getTableDelta({html:s,text:r},n){var l,a,h;const p=this.convert({text:r,html:s},n);if(n[xt.blotName])for(const b of p.ops){if(b!=null&&b.attributes&&(b.attributes[Et.blotName]||b.attributes[xt.blotName]))return new(L());(!((l=b==null?void 0:b.attributes)===null||l===void 0)&&l.header||!((a=b==null?void 0:b.attributes)===null||a===void 0)&&a.list||!(!((h=b==null?void 0:b.attributes)===null||h===void 0)&&h[xt.blotName]))&&(b.attributes=Object.assign(Object.assign({},b.attributes),n))}return p}};const Tc=g().import("core/module");class jo extends Tc{constructor(r,n){super(r,n),r.clipboard.addMatcher("td, th",qe),r.clipboard.addMatcher("tr",_e),r.clipboard.addMatcher("col",me),r.clipboard.addMatcher("table",Me),this.language=new ve(n==null?void 0:n.language),this.cellSelection=new x(r,this),this.operateLine=new I(r,this),this.tableMenus=new hc(r,this),this.tableSelect=new pc,r.root.addEventListener("keyup",this.handleKeyup.bind(this)),r.root.addEventListener("mousedown",this.handleMousedown.bind(this)),r.root.addEventListener("scroll",this.handleScroll.bind(this)),this.registerToolbarTable(n==null?void 0:n.toolbarTable)}static register(){g().register(xt,!0),g().register(vt,!0),g().register(Lt,!0),g().register(Jt,!0),g().register(Et,!0),g().register(Mt,!0),g().register(Yt,!0),g().register(Wt,!0),g().register({"modules/toolbar":bc,"modules/clipboard":xc},!0)}clearHistorySelected(){const[r]=this.getTable();if(!r)return;const n=Array.from(r.domNode.querySelectorAll("td.ql-cell-focused, td.ql-cell-selected"));for(const l of n)l.classList&&l.classList.remove("ql-cell-focused","ql-cell-selected")}deleteTable(){const[r]=this.getTable();if(r==null)return;const n=r.offset();r.remove(),this.hideTools(),this.quill.update(g().sources.USER),this.quill.setSelection(n,g().sources.SILENT)}deleteTableTemporary(r=g().sources.API){const n=this.quill.scroll.descendants(Et);for(const l of n)l.remove();this.hideTools(),this.quill.update(r)}getTable(r=this.quill.getSelection()){if(r==null)return[null,null,null,-1];const[n,l]=this.quill.getLine(r.index);if(n==null||n.statics.blotName!==xt.blotName)return[null,null,null,-1];const a=n.parent,h=a.parent;return[h.parent.parent,h,a,l]}handleKeyup(r){this.cellSelection.handleKeyup(r),!r.ctrlKey||r.key!=="z"&&r.key!=="y"||(this.hideTools(),this.clearHistorySelected()),this.updateMenus(r)}handleMousedown(r){var n;if((n=this.tableSelect)===null||n===void 0||n.hide(this.tableSelect.root),!r.target.closest("table"))return this.hideTools();this.cellSelection.handleMousedown(r),this.cellSelection.setDisabled(!0)}handleScroll(){var r;this.hideTools(),(r=this.tableMenus)===null||r===void 0||r.updateScroll(!0)}hideTools(){var r,n,l,a,h,p,b;(r=this.cellSelection)===null||r===void 0||r.clearSelected(),(n=this.cellSelection)===null||n===void 0||n.setDisabled(!1),(l=this.operateLine)===null||l===void 0||l.hideDragBlock(),(a=this.operateLine)===null||a===void 0||a.hideDragTable(),(h=this.operateLine)===null||h===void 0||h.hideLine(),(p=this.tableMenus)===null||p===void 0||p.hideMenus(),(b=this.tableMenus)===null||b===void 0||b.destroyTablePropertiesForm()}insertTable(r,n){const l=this.quill.getSelection(!0);if(l==null||this.isTable(l))return;const a=`width: ${72*n}px`,h=this.quill.getFormat(l.index-1),[,p]=this.quill.getLine(l.index),b=!!h[xt.blotName]||p!==0,A=b?2:1,S=b?new(L())().insert(`
`):new(L()),T=new(L())().retain(l.index).delete(l.length).concat(S).insert(`
`,{[Et.blotName]:{style:a}}),w=new Array(r).fill(0).reduce(G=>{const it=Ee();return new Array(n).fill(`
`).reduce((ct,bt)=>ct.insert(bt,{[xt.blotName]:Xt(),[vt.blotName]:{"data-row":it,width:"72"}}),G)},T);this.quill.updateContents(w,g().sources.USER),this.quill.setSelection(l.index+A,g().sources.SILENT),this.showTools()}isTable(r){return!!this.quill.getFormat(r.index)[xt.blotName]}registerToolbarTable(r){if(!r)return;g().register({"formats/table-better":fc},!0);const n=this.quill.getModule("toolbar").container.querySelector("button.ql-table-better");n&&this.tableSelect.root&&(n.appendChild(this.tableSelect.root),n.addEventListener("click",l=>{this.tableSelect.handleClick(l,this.insertTable.bind(this))}),document.addEventListener("click",l=>{l.composedPath().includes(n)||this.tableSelect.root.classList.contains("ql-hidden")||this.tableSelect.hide(this.tableSelect.root)}))}showTools(r){const[n,,l]=this.getTable();n&&l&&(this.cellSelection.setDisabled(!0),this.cellSelection.setSelected(l.domNode,r),this.tableMenus.showMenus(),this.tableMenus.updateMenus(n.domNode),this.tableMenus.updateTable(n.domNode))}updateMenus(r){this.cellSelection.selectedTds.length&&(r.key==="Enter"||r.ctrlKey&&r.key==="v")&&this.tableMenus.updateMenus()}}const Nc={"table-cell down":Po(!1),"table-cell up":Po(!0),"table-cell-block backspace":Bo("Backspace"),"table-cell-block delete":Bo("Delete"),"table-header backspace":Do("Backspace"),"table-header delete":Do("Delete"),"table-header enter":{key:"Enter",collapsed:!0,format:["table-header"],suffix:/^$/,handler(s,r){const[n,l]=this.quill.getLine(s.index),a=new(L())().retain(s.index).insert(`
`,r.format).retain(n.length()-l-1).retain(1,{header:null});this.quill.updateContents(a,g().sources.USER),this.quill.setSelection(s.index+1,g().sources.SILENT),this.quill.scrollSelectionIntoView()}},"table-list backspace":zo("Backspace"),"table-list delete":zo("Delete"),"table-list empty enter":{key:"Enter",collapsed:!0,format:["table-list"],empty:!0,handler(s,r){const{line:n}=r,{cellId:l}=n.parent.formats()[n.parent.statics.blotName],a=n.replaceWith(xt.blotName,l),h=this.quill.getModule("table-better"),p=ut(a);p&&h.cellSelection.setSelected(p.domNode,!1)}}};function Bo(s){return{key:s,format:["table-cell-block"],collapsed:!0,handler(r,n){var l;const[a]=this.quill.getLine(r.index),{offset:h,suffix:p}=n;if(h===0&&!a.prev)return!1;const b=(l=a.prev)===null||l===void 0?void 0:l.statics.blotName;return h!==0||b!==K.blotName&&b!==xt.blotName&&b!==zt.blotName?!(h!==0&&!p&&s==="Delete"):$o.call(this,a,r)}}}function Po(s){return{key:s?"ArrowUp":"ArrowDown",collapsed:!0,format:["table-cell"],handler(){return!1}}}function Do(s){return{key:s,format:["table-header"],collapsed:!0,empty:!0,handler(r,n){const[l]=this.quill.getLine(r.index);if(l.prev)return $o.call(this,l,r);{const a=H(l.formats()[l.statics.blotName]);l.replaceWith(xt.blotName,a)}}}}function zo(s){return{key:s,format:["table-list"],collapsed:!0,empty:!0,handler(r,n){const[l]=this.quill.getLine(r.index),a=H(l.parent.formats()[l.parent.statics.blotName]);l.replaceWith(xt.blotName,a)}}}function $o(s,r){const n=this.quill.getModule("table-better");return s.remove(),n==null||n.tableMenus.updateMenus(),this.quill.setSelection(r.index-1,g().sources.SILENT),!1}jo.keyboardBindings=Nc;var Ac=jo}(),f.default}()})}(qs)),qs.exports}var E1=A1();const oc=rs(E1);tt.register("modules/resize",T1);tt.register({"modules/table-better":oc},!0);const R1=({routeName:o,editorValue:t,setEditorValue:e,placeholder:i,className:c})=>{const u=Bi.useRef(null),f=Bi.useRef(null),m=Bi.useRef(null);Bi.useEffect(()=>{if(!m.current){const M=tt.import("formats/font");M.whitelist=["sans-serif","serif","monospace"],tt.register(M,!0);const N=new tt(u.current,{theme:"snow",modules:{toolbar:{container:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]},{align:[]}],["link","image"],["table-better"],["clean"]],handlers:{image:()=>{var R;return(R=f.current)==null?void 0:R.click()}}},resize:{locale:{}},table:!1,"table-better":{language:"en_US",menus:["column","row","merge","table","cell","wrap","copy","delete"],toolbarTable:!0},keyboard:{bindings:oc.keyboardBindings}}});m.current=N,N.on("text-change",()=>{let R=N.root.innerHTML;e(R)}),m.current=N}const L=t&&t.length>0?g(t):t;m.current&&L!==m.current.root.innerHTML&&(m.current.root.innerHTML=L)},[t,e]);const g=L=>{let M=L;return M=M.replace(/<ul([^>]*)>(.*?)<\/ul>/g,(N,R,_)=>_.includes('data-list="bullet"')?`<ol${R}>${_}</ol>`:N),M},y=async L=>{var N,R,_,k;const M=(N=L.target.files)==null?void 0:N[0];if(M&&m.current){const B=new FormData;B.append("image",M);const $=`https://bo-api.lorenzaceramica.com${o}`;try{const et=await(await fetch($,{method:"POST",body:B})).json();if((R=et.imageUrls)!=null&&R.length){const U=(_=m==null?void 0:m.current)==null?void 0:_.getSelection();(k=m.current)==null||k.insertEmbed((U==null?void 0:U.index)||0,"image",et.imageUrls[0])}}catch(D){console.error("Image upload failed:",D)}}};return ms.jsxDEV("div",{className:"position-relative",children:[ms.jsxDEV("div",{className:`${c} description-container`,ref:u,children:i},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/shared/QuillTextEditor.tsx",lineNumber:137,columnNumber:13},void 0),ms.jsxDEV("input",{ref:f,type:"file",style:{display:"none"},onChange:y},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/shared/QuillTextEditor.tsx",lineNumber:138,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/shared/QuillTextEditor.tsx",lineNumber:136,columnNumber:9},void 0)};export{R1 as Q};
