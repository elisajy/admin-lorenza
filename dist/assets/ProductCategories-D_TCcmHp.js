import{l as y,a as r,n as k,p as j,q as o,B as L}from"./index-ChGBaCPw.js";import{F as U,C as s,S as V}from"./Table-DuMrltci.js";import{C as T}from"./ConfirmationDialog-CjTt7aX9.js";import"./useForceUpdate-DuvXfk5J.js";import"./Dropdown-BGgjrH9C.js";import"./index-D6FC3MZ1.js";import"./Skeleton-Te47yDLn.js";const B=()=>{const n=y(),[C,m]=r.useState(),[h,i]=r.useState(!1),[p,w]=r.useState([]),[t,f]=r.useState({title:"",message:"",buttonText:"",action:()=>{}}),[N,b]=r.useState(0),{setSuccessNotification:x,setErrorNotification:P}=k(),D=j(),v=new URLSearchParams(D.search),c=Number(v.get("page"))||1,[z,d]=r.useState({current:c,pageSize:10}),S=e=>{d(e),n(`?page=${e.current}`)};r.useEffect(()=>{d(e=>({...e,current:c}))},[c]);const u=(e,a)=>{e==="edit"&&n(`/product-categories/edit/${a.key}`),e==="add"&&n("/product-categories/add")};r.useEffect(()=>{l()},[N]);const l=()=>{m([]);try{fetch("https://bo-api.lorenzaceramica.com/all-categories-no-level",{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},cache:"no-store"}).then(e=>e.json()).then(e=>{const a=e.length>0?e.map(g=>({...g,key:g.id})):[];m([...a])})}catch(e){console.error("Error fetching Product Categories:",e)}},E=e=>{i(!0),f({title:"Confirm Submission?",message:"This action will delete selected record(s).",buttonText:"Confirm",action:async()=>{fetch(`https://bo-api.lorenzaceramica.com/delete-category/${e.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(async a=>{a.status===204&&(x("Delete Successful!"),await l())}).catch(a=>{console.log("Delete Category error:",a),P("Delete Failed. Please try again later.")}),i(!1),b(a=>a+1)}})};return o.jsxDEV(o.Fragment,{children:[o.jsxDEV("div",{className:"form-button-container",children:[o.jsxDEV("div",{children:o.jsxDEV("h2",{children:"Product Categories"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:106,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:105,columnNumber:17},void 0),o.jsxDEV("div",{children:o.jsxDEV(L,{type:"primary",className:"form-button",onClick:()=>u("add"),children:"Add"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:109,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:108,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:104,columnNumber:13},void 0),o.jsxDEV(T,{showModal:h,title:t.title,confirmationMessage:t.message,setShowModal:i,action:t.action,actionText:t.buttonText},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:112,columnNumber:13},void 0),o.jsxDEV("div",{children:o.jsxDEV(U,{dataSource:C,pagination:z,onChange:S,rowKey:"id",children:[o.jsxDEV(s,{title:"Name",dataIndex:"name"},"categoryName",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:121,columnNumber:21},void 0),o.jsxDEV(s,{title:"Main Category",dataIndex:"mainCategoryName"},"mainCategoryName",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:122,columnNumber:21},void 0),o.jsxDEV(s,{title:"Updated At",dataIndex:"updatedAt"},"updatedAt",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:123,columnNumber:21},void 0),o.jsxDEV(s,{title:"Action",render:(e,a)=>o.jsxDEV(V,{size:"middle",children:[o.jsxDEV("a",{onClick:()=>u("edit",a),children:"Edit"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:129,columnNumber:33},void 0),o.jsxDEV("a",{onClick:()=>E(a),children:"Delete"},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:130,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:128,columnNumber:29},void 0)},"action",!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:124,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:117,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:116,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/Phing/Documents/SookCheng/LorenzaCeramica/admin-lorenza/src/pages/products/ProductCategories.tsx",lineNumber:103,columnNumber:9},void 0)};export{B as default};
